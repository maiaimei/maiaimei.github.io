(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{659:function(t,e,n){t.exports=n.p+"assets/img/20240511132157.d5724636.png"},660:function(t,e,n){t.exports=n.p+"assets/img/20240511104742.b81c0e3b.jpg"},661:function(t,e,n){t.exports=n.p+"assets/img/20240511105351.5f6f0ebc.jpg"},751:function(t,e,n){"use strict";n.r(e);var s=n(7),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"基本概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),s("h3",{attrs:{id:"junit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#junit"}},[t._v("#")]),t._v(" JUnit")]),t._v(" "),s("p",[t._v("JUnit is a simple framework to write repeatable tests.")]),t._v(" "),s("p",[t._v("测试运行器：决定了用什么方式偏好去运行这些测试集/类/方法。")]),t._v(" "),s("p",[t._v("测试集：可能包含多个测试类。")]),t._v(" "),s("p",[t._v("测试类：包含一个或多个测试方法的文件。")]),t._v(" "),s("p",[t._v("测试方法/测试用例：用@Test注解标记的方法。")]),t._v(" "),s("p",[t._v("测试类及测试用例命名规范:")]),t._v(" "),s("ul",[s("li",[t._v("测试类命名规范: 被测试类+Test，例如：UserServiceTest")]),t._v(" "),s("li",[t._v("测试用例命名规范: test+被测试方法，例如：testGet")])]),t._v(" "),s("p",[t._v("常见的测试运行器：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("JUnit 4")]),t._v(" "),s("th",[t._v("JUnit 5")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("@RunWith(JUnit38ClassRunner.class)")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("用于兼容JUnit3.8的运行器")])]),t._v(" "),s("tr",[s("td",[t._v("@RunWith(JUnit4.class)")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("JUnit 4的默认运行器，用JUnit4测试工具来运行测试")])]),t._v(" "),s("tr",[s("td",[t._v("@RunWith(MockitoJUnitRunner.class)")]),t._v(" "),s("td",[t._v("@ExtendWith(MockitoExtension.class)")]),t._v(" "),s("td",[t._v("运行Mockito的运行环境")])]),t._v(" "),s("tr",[s("td",[t._v("@RunWith(SpringJUnit4ClassRunner.class)"),s("br"),t._v("@RunWith(SpringRunner.class)")]),t._v(" "),s("td",[t._v("@ExtendWith(SpringExtension.class)")]),t._v(" "),s("td",[t._v("让类运行在Spring的测试环境，以便测试开始时自动创建Spring应用上下文，并使用JUnit4测试工具运行测试。"),s("br"),t._v("@RunWith(SpringRunner.class)继承了 @RunWith(SpringJUnit4ClassRunner.class) ，用法相同。")])]),t._v(" "),s("tr",[s("td",[t._v("@RunWith(Parameterized.class)")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("参数化运行器，配合@Parameters使用JUnit的参数化功能")])]),t._v(" "),s("tr",[s("td",[t._v("@RunWith(Suite.class)"),s("br"),t._v("@SuiteClasses({ATest.class,BTest.class,CTest.class})")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("测试集运行器，配合@SuiteClasses使用JUnit的测试集功能")])])])]),t._v(" "),s("p",[t._v("JUnit3中测试用例需要继承TestCase类")]),t._v(" "),s("p",[t._v("JUnit4中测试用例无需继承TestCase类，只需标记@Test注解即可。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("JUnit 3")]),t._v(" "),s("th",[t._v("JUnit 4")]),t._v(" "),s("th",[t._v("JUnit 5")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("所有测试用例前仅执行一次")]),t._v(" "),s("td",[t._v("N/A")]),t._v(" "),s("td",[t._v("@BeforeClass")]),t._v(" "),s("td",[t._v("@BeforeAll")])]),t._v(" "),s("tr",[s("td",[t._v("每个测试用例前执行")]),t._v(" "),s("td",[t._v("setUp()")]),t._v(" "),s("td",[t._v("@Before")]),t._v(" "),s("td",[t._v("@BeforeEach")])]),t._v(" "),s("tr",[s("td",[t._v("执行测试用例")]),t._v(" "),s("td",[t._v("N/A")]),t._v(" "),s("td",[t._v("@Test")]),t._v(" "),s("td",[t._v("@Test")])]),t._v(" "),s("tr",[s("td",[t._v("每个测试用例后执行")]),t._v(" "),s("td",[t._v("tearDown()")]),t._v(" "),s("td",[t._v("@After")]),t._v(" "),s("td",[t._v("@AfterEach")])]),t._v(" "),s("tr",[s("td",[t._v("所有测试用例后仅执行一次")]),t._v(" "),s("td",[t._v("N/A")]),t._v(" "),s("td",[t._v("@AfterClass")]),t._v(" "),s("td",[t._v("@AfterAll")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("JUnit 4 Annotation")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("JUnit 5 Annotation")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("@Test")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@Test")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Denotes that a method is a test method. Unlike JUnit 4’s "),s("code",[t._v("@Test")]),t._v(" annotation, this annotation does not declare any attributes, since test extensions in JUnit Jupiter operate based on their own dedicated annotations. Such methods are "),s("em",[t._v("inherited")]),t._v(" unless they are "),s("em",[t._v("overridden")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@ParameterizedTest")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Denotes that a method is a "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests",target:"_blank",rel:"noopener noreferrer"}},[t._v("parameterized test"),s("OutboundLink")],1),t._v(". Such methods are "),s("em",[t._v("inherited")]),t._v(" unless they are "),s("em",[t._v("overridden")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@RepeatedTest")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Denotes that a method is a test template for a "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-repeated-tests",target:"_blank",rel:"noopener noreferrer"}},[t._v("repeated test"),s("OutboundLink")],1),t._v(". Such methods are "),s("em",[t._v("inherited")]),t._v(" unless they are "),s("em",[t._v("overridden")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@TestFactory")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Denotes that a method is a test factory for "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-dynamic-tests",target:"_blank",rel:"noopener noreferrer"}},[t._v("dynamic tests"),s("OutboundLink")],1),t._v(". Such methods are "),s("em",[t._v("inherited")]),t._v(" unless they are "),s("em",[t._v("overridden")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@TestTemplate")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Denotes that a method is a "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-templates",target:"_blank",rel:"noopener noreferrer"}},[t._v("template for test cases"),s("OutboundLink")],1),t._v(" designed to be invoked multiple times depending on the number of invocation contexts returned by the registered "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#extensions-test-templates",target:"_blank",rel:"noopener noreferrer"}},[t._v("providers"),s("OutboundLink")],1),t._v(". Such methods are "),s("em",[t._v("inherited")]),t._v(" unless they are "),s("em",[t._v("overridden")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@TestClassOrder")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Used to configure the "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-execution-order-classes",target:"_blank",rel:"noopener noreferrer"}},[t._v("test class execution order"),s("OutboundLink")],1),t._v(" for "),s("code",[t._v("@Nested")]),t._v(" test classes in the annotated test class. Such annotations are "),s("em",[t._v("inherited")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@TestMethodOrder")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Used to configure the "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-execution-order-methods",target:"_blank",rel:"noopener noreferrer"}},[t._v("test method execution order"),s("OutboundLink")],1),t._v(" for the annotated test class; similar to JUnit 4’s "),s("code",[t._v("@FixMethodOrder")]),t._v(". Such annotations are "),s("em",[t._v("inherited")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@TestInstance")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Used to configure the "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle",target:"_blank",rel:"noopener noreferrer"}},[t._v("test instance lifecycle"),s("OutboundLink")],1),t._v(" for the annotated test class. Such annotations are "),s("em",[t._v("inherited")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@DisplayName")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Declares a custom "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-display-names",target:"_blank",rel:"noopener noreferrer"}},[t._v("display name"),s("OutboundLink")],1),t._v(" for the test class or test method. Such annotations are not "),s("em",[t._v("inherited")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@DisplayNameGeneration")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Declares a custom "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-display-name-generator",target:"_blank",rel:"noopener noreferrer"}},[t._v("display name generator"),s("OutboundLink")],1),t._v(" for the test class. Such annotations are "),s("em",[t._v("inherited")]),t._v(".")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("@Before")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@BeforeEach")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Denotes that the annotated method should be executed "),s("em",[t._v("before")]),t._v(" "),s("strong",[t._v("each")]),t._v(" "),s("code",[t._v("@Test")]),t._v(", "),s("code",[t._v("@RepeatedTest")]),t._v(", "),s("code",[t._v("@ParameterizedTest")]),t._v(", or "),s("code",[t._v("@TestFactory")]),t._v(" method in the current class; analogous to JUnit 4’s "),s("code",[t._v("@Before")]),t._v(". Such methods are "),s("em",[t._v("inherited")]),t._v(" – unless they are "),s("em",[t._v("overridden")]),t._v(" or "),s("em",[t._v("superseded")]),t._v(" (i.e., replaced based on signature only, irrespective of Java’s visibility rules).")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("@After")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@AfterEach")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Denotes that the annotated method should be executed "),s("em",[t._v("after")]),t._v(" "),s("strong",[t._v("each")]),t._v(" "),s("code",[t._v("@Test")]),t._v(", "),s("code",[t._v("@RepeatedTest")]),t._v(", "),s("code",[t._v("@ParameterizedTest")]),t._v(", or "),s("code",[t._v("@TestFactory")]),t._v(" method in the current class; analogous to JUnit 4’s "),s("code",[t._v("@After")]),t._v(". Such methods are "),s("em",[t._v("inherited")]),t._v(" – unless they are "),s("em",[t._v("overridden")]),t._v(" or "),s("em",[t._v("superseded")]),t._v(" (i.e., replaced based on signature only, irrespective of Java’s visibility rules).")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("@BeforeClass")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@BeforeAll")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Denotes that the annotated method should be executed "),s("em",[t._v("before")]),t._v(" "),s("strong",[t._v("all")]),t._v(" "),s("code",[t._v("@Test")]),t._v(", "),s("code",[t._v("@RepeatedTest")]),t._v(", "),s("code",[t._v("@ParameterizedTest")]),t._v(", and "),s("code",[t._v("@TestFactory")]),t._v(" methods in the current class; analogous to JUnit 4’s "),s("code",[t._v("@BeforeClass")]),t._v(". Such methods are "),s("em",[t._v("inherited")]),t._v(" – unless they are "),s("em",[t._v("hidden")]),t._v(", "),s("em",[t._v("overridden")]),t._v(", or "),s("em",[t._v("superseded")]),t._v(", (i.e., replaced based on signature only, irrespective of Java’s visibility rules) – and must be "),s("code",[t._v("static")]),t._v(' unless the "per-class" '),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle",target:"_blank",rel:"noopener noreferrer"}},[t._v("test instance lifecycle"),s("OutboundLink")],1),t._v(" is used.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("@AfterClass")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@AfterAll")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Denotes that the annotated method should be executed "),s("em",[t._v("after")]),t._v(" "),s("strong",[t._v("all")]),t._v(" "),s("code",[t._v("@Test")]),t._v(", "),s("code",[t._v("@RepeatedTest")]),t._v(", "),s("code",[t._v("@ParameterizedTest")]),t._v(", and "),s("code",[t._v("@TestFactory")]),t._v(" methods in the current class; analogous to JUnit 4’s "),s("code",[t._v("@AfterClass")]),t._v(". Such methods are "),s("em",[t._v("inherited")]),t._v(" – unless they are "),s("em",[t._v("hidden")]),t._v(", "),s("em",[t._v("overridden")]),t._v(", or "),s("em",[t._v("superseded")]),t._v(", (i.e., replaced based on signature only, irrespective of Java’s visibility rules) – and must be "),s("code",[t._v("static")]),t._v(' unless the "per-class" '),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle",target:"_blank",rel:"noopener noreferrer"}},[t._v("test instance lifecycle"),s("OutboundLink")],1),t._v(" is used.")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@Nested")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Denotes that the annotated class is a non-static "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-nested",target:"_blank",rel:"noopener noreferrer"}},[t._v("nested test class"),s("OutboundLink")],1),t._v(". On Java 8 through Java 15, "),s("code",[t._v("@BeforeAll")]),t._v(" and "),s("code",[t._v("@AfterAll")]),t._v(" methods cannot be used directly in a "),s("code",[t._v("@Nested")]),t._v(' test class unless the "per-class" '),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle",target:"_blank",rel:"noopener noreferrer"}},[t._v("test instance lifecycle"),s("OutboundLink")],1),t._v(" is used. Beginning with Java 16, "),s("code",[t._v("@BeforeAll")]),t._v(" and "),s("code",[t._v("@AfterAll")]),t._v(" methods can be declared as "),s("code",[t._v("static")]),t._v(" in a "),s("code",[t._v("@Nested")]),t._v(" test class with either test instance lifecycle mode. Such annotations are not "),s("em",[t._v("inherited")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@Tag")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Used to declare "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-tagging-and-filtering",target:"_blank",rel:"noopener noreferrer"}},[t._v("tags for filtering tests"),s("OutboundLink")],1),t._v(", either at the class or method level; analogous to test groups in TestNG or Categories in JUnit 4. Such annotations are "),s("em",[t._v("inherited")]),t._v(" at the class level but not at the method level.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("@Ignore")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@Disabled")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Used to "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-disabling",target:"_blank",rel:"noopener noreferrer"}},[t._v("disable"),s("OutboundLink")],1),t._v(" a test class or test method; analogous to JUnit 4’s "),s("code",[t._v("@Ignore")]),t._v(". Such annotations are not "),s("em",[t._v("inherited")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@Timeout")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Used to fail a test, test factory, test template, or lifecycle method if its execution exceeds a given duration. Such annotations are "),s("em",[t._v("inherited")]),t._v(".")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("@RunWith")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@ExtendWith")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Used to "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#extensions-registration-declarative",target:"_blank",rel:"noopener noreferrer"}},[t._v("register extensions declaratively"),s("OutboundLink")],1),t._v(". Such annotations are "),s("em",[t._v("inherited")]),t._v("."),s("br"),t._v("指定测试用例运行环境")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@RegisterExtension")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Used to "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#extensions-registration-programmatic",target:"_blank",rel:"noopener noreferrer"}},[t._v("register extensions programmatically"),s("OutboundLink")],1),t._v(" via fields. Such fields are "),s("em",[t._v("inherited")]),t._v(" unless they are "),s("em",[t._v("shadowed")]),t._v(".")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("@TempDir")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Used to supply a "),s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-built-in-extensions-TempDirectory",target:"_blank",rel:"noopener noreferrer"}},[t._v("temporary directory"),s("OutboundLink")],1),t._v(" via field injection or parameter injection in a lifecycle method or test method; located in the "),s("code",[t._v("org.junit.jupiter.api.io")]),t._v(" package.")])])])]),t._v(" "),s("h4",{attrs:{id:"junit-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#junit-4"}},[t._v("#")]),t._v(" JUnit 4")]),t._v(" "),s("p",[t._v("https://junit.org/junit4/")]),t._v(" "),s("h4",{attrs:{id:"junit-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#junit-5"}},[t._v("#")]),t._v(" JUnit 5")]),t._v(" "),s("p",[t._v("Unlike previous versions of JUnit, JUnit 5 is composed of several different modules from three different sub-projects.")]),t._v(" "),s("p",[t._v("JUnit 5 = JUnit Platform + JUnit Jupiter+ JUnit Vintage")]),t._v(" "),s("p",[t._v("JUnit Platform：用于在 JVM 上运行测试的基础设施，无论是编程模型还是命令行工具。")]),t._v(" "),s("p",[t._v("JUnit Jupiter：JUnit 5 的新模块，它提供了编写测试的新的程序化模型。")]),t._v(" "),s("p",[t._v("JUnit Vintage：用于在 JUnit 平台上运行旧的 JUnit 3 和 JUnit 4 测试的引擎。")]),t._v(" "),s("p",[t._v("JUnit Platform是JUnit5的核心组成部分，它定义了一个抽象的TestEngine API，用于在平台上运行测试框架。这意味着其他自动化测试引擎或开发人员自己定制的引擎都可以接入JUnit5实现对接和执行。JUnit Platform还支持通过命令行、Gradle和Maven来运行测试。")]),t._v(" "),s("p",[t._v("JUnit Jupiter是JUnit5的扩展部分，它提供了新的编程模型和扩展模型，使编写测试用例更加方便。这个部分可以看作是承载JUnit4原有功能的演进，包含了JUnit5最新的编程模型和扩展机制。通过这些新特性，JUnit Jupiter使自动化测试更加方便、功能更加强大。")]),t._v(" "),s("p",[t._v("JUnit Vintage提供了一个在平台上运行JUnit3和JUnit4的TestEngine。这意味着，如果你在使用JUnit3或JUnit4编写的旧测试用例，你可以将这些用例迁移到JUnit5上，并从中受益。")]),t._v(" "),s("p",[t._v("IntelliJ IDEA supports running tests on the JUnit Platform since version 2016.2. For details please see the "),s("a",{attrs:{href:"https://blog.jetbrains.com/idea/2016/08/using-junit-5-in-intellij-idea/",target:"_blank",rel:"noopener noreferrer"}},[t._v("post on the IntelliJ IDEA blog"),s("OutboundLink")],1),t._v(". Note, however, that it is recommended to use IDEA 2017.3 or newer since these newer versions of IDEA will download the following JARs automatically based on the API version used in the project: "),s("code",[t._v("junit-platform-launcher")]),t._v(", "),s("code",[t._v("junit-jupiter-engine")]),t._v(", and "),s("code",[t._v("junit-vintage-engine")]),t._v(".")]),t._v(" "),s("p",[t._v("https://junit.org/junit5/")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://junit.org/junit5/docs/current/user-guide/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://junit.org/junit5/docs/current/user-guide/"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/junit-team/junit5-samples",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/junit-team/junit5-samples"),s("OutboundLink")],1)]),t._v(" "),s("h5",{attrs:{id:"参数化测试-数据驱动测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数化测试-数据驱动测试"}},[t._v("#")]),t._v(" 参数化测试/数据驱动测试")]),t._v(" "),s("p",[t._v("参数化测试必须将 @Test 注解替换为 @ParameterizedTest 注解。")]),t._v(" "),s("ul",[s("li",[t._v("@ValueSource 注解可提供单个数组作为测试数据。")]),t._v(" "),s("li",[t._v("@NullSource 注解用于传递null值。")]),t._v(" "),s("li",[t._v("@EmptySource 注解用于传递空值。")]),t._v(" "),s("li",[t._v("@NullAndEmptySource 注解是 @NullSource 和 @EmptySource 的组合注解，可同时提供null值和空值。")]),t._v(" "),s("li",[t._v("@EnumSource 注解可提供单个枚举作为测试数据。")]),t._v(" "),s("li",[t._v("@MethodSource 注解读取指定方法的返回值作为参数化测试的入参（注意方法返回类型必须是一个流）。")]),t._v(" "),s("li",[t._v("@CsvSource 注解可提供单组或多组参数。")]),t._v(" "),s("li",[t._v("@CsvFileSource 注解通过读取CSV文件作为参数化测试的入参。")]),t._v(" "),s("li",[t._v("实现 ArgumentsProvider 接口，并配合 @ArgumentsSource 注解来给测试方法提供测试数据。")])]),t._v(" "),s("h3",{attrs:{id:"spring常用注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring常用注解"}},[t._v("#")]),t._v(" Spring常用注解")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("注解")]),t._v(" "),s("th",[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("@WebMvcTest")]),t._v(" "),s("td",[t._v("启动一个应用程序上下文，该上下文只包含测试 Web 控制器所需的 bean")])]),t._v(" "),s("tr",[s("td",[t._v("@AutoConfigureMockMvc")]),t._v(" "),s("td",[t._v("可以应用于测试类以启用和配置MockMvc的自动配置的注释。")])]),t._v(" "),s("tr",[s("td",[t._v("@PropertySource")]),t._v(" "),s("td",[t._v("加载配置文件")])]),t._v(" "),s("tr",[s("td",[t._v("@TestPropertySource")]),t._v(" "),s("td",[t._v("加载配置文件。@TestPropertySource可以用来覆盖掉来自于系统环境变量，Java的系统属性，@PropertySource的属性。")])]),t._v(" "),s("tr",[s("td",[t._v("@ActiveProfiles")]),t._v(" "),s("td",[t._v("激活指定环境"),s("br"),t._v('@ActiveProfiles(profiles = {"default", "local", "test"})'),s("br"),t._v("如果有相同配置，后面同名配置会覆盖前面的。")])]),t._v(" "),s("tr",[s("td",[t._v("@ContextConfiguration")]),t._v(" "),s("td",[t._v("用来加载ApplicationContext")])])])]),t._v(" "),s("p",[t._v("@WebMvcTest 示例：")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@WebMvcTest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("controllers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ExtendWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringExtension")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("@AutoConfigureMockMvc 示例：")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@AutoConfigureMockMvc")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootTest")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("@ContextConfiguration 示例：")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ActiveProfiles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"local"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PropertySource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/application-local.yml"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ContextConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    classes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SftpOutboundFactoryTest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ContextConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用来加载配置类")]),t._v("\n    initializers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConfigDataApplicationContextInitializer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用来加载配置文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ExtendWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringExtension")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h2",{attrs:{id:"常见的mock框架"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见的mock框架"}},[t._v("#")]),t._v(" 常见的Mock框架")]),t._v(" "),s("p",[s("img",{attrs:{src:n(659),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"mockito"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mockito"}},[t._v("#")]),t._v(" Mockito")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://site.mockito.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://site.mockito.org/"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("strong",[t._v("mockito-core")]),t._v("：Mockito 核心依赖，提供了 Mockito 框架的核心功能和 API。")]),t._v(" "),s("p",[s("strong",[t._v("mockito-junit-jupiter")]),t._v("：Mockito 与 JUnit Jupiter 的集成依赖，用于在 JUnit 5 环境下使用 Mockito 进行单元测试。")]),t._v(" "),s("p",[s("strong",[t._v("mockito-inline")]),t._v("：Mockito 的内联依赖，用于支持内联（inline）Mocks 的创建和使用。")]),t._v(" "),s("p",[s("strong",[t._v("Note that you must use @RunWith(MockitoJUnitRunner.class) or MockitoAnnotations.initMocks(this) to initialize these mocks and inject them.")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#mock-java.lang.Class-",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("mock()")]),s("OutboundLink")],1),t._v("/"),s("a",{attrs:{href:"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mock.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("@Mock")]),s("OutboundLink")],1),t._v(": create mock\n"),s("ul",[s("li",[t._v("optionally specify how it should behave via "),s("a",{attrs:{href:"http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/stubbing/Answer.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Answer")]),s("OutboundLink")],1),t._v("/"),s("a",{attrs:{href:"http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/MockSettings.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("MockSettings")]),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#when-T-",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("when()")]),s("OutboundLink")],1),t._v("/"),s("a",{attrs:{href:"http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/BDDMockito.html#given-T-",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("given()")]),s("OutboundLink")],1),t._v(" to specify how a mock should behave")]),t._v(" "),s("li",[t._v("If the provided answers don’t fit your needs, write one yourself extending the "),s("a",{attrs:{href:"http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/stubbing/Answer.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Answer")]),s("OutboundLink")],1),t._v(" interface")])])]),t._v(" "),s("li",[s("a",{attrs:{href:"http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#spy-T-",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("spy()")]),s("OutboundLink")],1),t._v("/"),s("a",{attrs:{href:"http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Spy.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("@Spy")]),s("OutboundLink")],1),t._v(": partial mocking, real methods are invoked but still can be verified and stubbed")]),t._v(" "),s("li",[s("a",{attrs:{href:"http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/InjectMocks.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("@InjectMocks")]),s("OutboundLink")],1),t._v(": automatically inject mocks/spies fields annotated with "),s("code",[t._v("@Spy")]),t._v(" or "),s("code",[t._v("@Mock")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#verify-T-",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("verify()")]),s("OutboundLink")],1),t._v(": to check methods were called with given arguments\n"),s("ul",[s("li",[t._v("can use flexible argument matching, for example any expression via the "),s("a",{attrs:{href:"http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/ArgumentMatchers.html#any--",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("any()")]),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("or capture what arguments were called using "),s("a",{attrs:{href:"http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Captor.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("@Captor")]),s("OutboundLink")],1),t._v(" instead")])])])]),t._v(" "),s("p",[t._v("What are the limitations of Mockito: "),s("a",{attrs:{href:"https://github.com/mockito/mockito/wiki/FAQ",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/mockito/mockito/wiki/FAQ"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("常见注解使用：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Non-Spring Env")]),t._v(" "),s("th",[t._v("Spring Env")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("@InjectMocks")]),t._v(" "),s("td",[t._v("@Autowired")]),t._v(" "),s("td",[t._v("创建类实例并注入依赖的模拟，以便在单元测试中更好地控制测试环境，提高测试的准确性。"),s("br"),t._v("@InjectMocks creates an instance of the class and injects the mocks that are created with the @Mock (or @Spy ) annotations into this instance."),s("br"),t._v("@InjectMocks will only inject mocks/spies created using the @Spy or @Mock annotation."),s("br"),t._v("@Autowired will only inject mocks/spies created using the @SpyBean or @MockBean annotation.")])]),t._v(" "),s("tr",[s("td",[t._v("@Mock")]),t._v(" "),s("td",[t._v("@MockBean")]),t._v(" "),s("td",[t._v("创建模拟"),s("br"),t._v("@Mock 相当于 Mockito.mock(Class"),s("T",[t._v(" classToMock)"),s("br"),t._v("打桩的方法均使用模拟，不会真实调用")])],1)]),t._v(" "),s("tr",[s("td",[t._v("@Spy")]),t._v(" "),s("td",[t._v("@SpyBean")]),t._v(" "),s("td",[t._v("创建模拟"),s("br"),t._v("@Spy 相当于 Mockito.spy(Class"),s("T",[t._v(" classToSpy)"),s("br"),t._v("如果某方法没有打桩，则真实调用，否则使用模拟。")])],1)])])]),t._v(" "),s("h4",{attrs:{id:"打桩-stubbing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打桩-stubbing"}},[t._v("#")]),t._v(" 打桩（stubbing）")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 有返回值")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mockObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("thenReturn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someReturnValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doReturn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someReturnValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mockObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 无返回值")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doNothing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mockObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 抛出异常")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mockObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("thenThrow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someException"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doThrow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someException"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mockObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h4",{attrs:{id:"断言-assertion"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#断言-assertion"}},[t._v("#")]),t._v(" 断言（assertion）")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// org.junit.jupiter.api.Assertions")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法是否被调用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mockObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("never")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"never called"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mockObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("atLeastOnce")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"called at least once"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mockObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("atLeast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"called at least twice"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mockObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("atMost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"called at most three times"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mockObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("times")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"called four times"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h3",{attrs:{id:"powermock"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#powermock"}},[t._v("#")]),t._v(" PowerMock")]),t._v(" "),s("p",[t._v("当所测逻辑里有静态工具类方法或私有方法时，我们希望它返回特定值时（极值边界、异常测试场景），我们可以用PowerMock弥补Mockito的不足。")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://powermock.github.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://powermock.github.io/"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/powermock/powermock/wiki/Mockito-Maven",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/powermock/powermock/wiki/Mockito-Maven"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"常用插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用插件"}},[t._v("#")]),t._v(" 常用插件")]),t._v(" "),s("h3",{attrs:{id:"maven-surefire-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#maven-surefire-plugin"}},[t._v("#")]),t._v(" Maven Surefire Plugin")]),t._v(" "),s("p",[t._v("Maven Surefire Plugin的作用是用于执行单元测试。")]),t._v(" "),s("p",[t._v("这个插件可以自动识别和运行src/test目录下利用特定测试框架（如JUnit、TestNG等）编写的测试用例。Surefire Plugin也能识别和执行符合一定命名约定的普通类中的测试方法，例如，以Test结尾的测试类（如helloTest.java）。在Maven的生命周期中，test阶段默认绑定了Surefire Plugin的test目标，无需额外配置，直接运行run test即可。此外，Surefire Plugin还具有高度的可配置性和灵活性，支持多种单元测试框架，并且可以自定义测试用例的命名模式，通过合理配置和使用该插件，可以帮助开发者提高代码质量和项目稳定性。")]),t._v(" "),s("h3",{attrs:{id:"jacoco-java-code-coverage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jacoco-java-code-coverage"}},[t._v("#")]),t._v(" JaCoCo（Java Code Coverage）")]),t._v(" "),s("p",[t._v("JaCoCo（Java Code Coverage）是一种分析单元测试覆盖率的工具。")]),t._v(" "),s("p",[t._v("The JaCoCo Maven Plugin provides the JaCoCo runtime agent to your tests and allows basic report creation.")]),t._v(" "),s("p",[t._v("IDEA配置JaCoCo")]),t._v(" "),s("p",[s("img",{attrs:{src:n(660),alt:""}})]),t._v(" "),s("p",[t._v("正常情况下，测试类所在包结构与被测试的类所在包结构相同，直接点击run tests with coverage就可以运行测试查看覆盖率。若包结构不同，但是你又没有权限修改该项目的包结构，那么可以通过配置来查看单测覆盖率。")]),t._v(" "),s("p",[s("img",{attrs:{src:n(661),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),s("h3",{attrs:{id:"springextension-mockitoextension"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springextension-mockitoextension"}},[t._v("#")]),t._v(" SpringExtension & MockitoExtension")]),t._v(" "),s("p",[s("code",[t._v("SpringExtension")]),t._v(" integrates the Spring TestContext Framework into JUnit 5's Jupiter.")]),t._v(" "),s("p",[s("code",[t._v("MockitoExtension")]),t._v(" is the JUnit Jupiter equivalent of our JUnit4 "),s("code",[t._v("MockitoJUnitRunner")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("When to use @Extendwith(SpringExtension.class) or @Extendwith(MockitoExtension.class) in JUnit 5?")])]),t._v(" "),s("p",[s("strong",[t._v("When involving Spring")]),t._v(":")]),t._v(" "),s("p",[t._v("If you want to use Spring test framework features in your tests like for example "),s("code",[t._v("@MockBean")]),t._v(" , then you have to use "),s("code",[t._v("@Extendwith(SpringExtension.class)")]),t._v(". It replaces the deprecated JUnit 4 "),s("code",[t._v("@Runwith(SpringJUnit4classRunner.class)")])]),t._v(" "),s("p",[s("strong",[t._v("When NOT involving Spring")]),t._v(":")]),t._v(" "),s("p",[t._v("If you just want to involve Mockito and don't have to involve Spring, for example,when you just want to use the "),s("code",[t._v("@Mock")]),t._v(" / "),s("code",[t._v("@InjectMocks")]),t._v(" annotations, then you want to use "),s("code",[t._v("@Extendwith(MockitoExtension.class)")]),t._v(" as it doesn't load in a bunch of unneeded Spring stuff. It replaces the deprecated JUnit 4 "),s("code",[t._v("@Runwith(MockitooUnitRunner.class)")]),t._v(".")])])}),[],!1,null,null,null);e.default=a.exports}}]);