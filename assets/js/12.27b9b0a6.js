(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{644:function(s,t,a){s.exports=a.p+"assets/img/20210321105806.5c8a9d51.png"},645:function(s,t){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkwAAAH+CAMAAABZUKESAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABy1BMVEX//////Pn95dH827/7yqL6t4D5sXX7wZL7zaj+9e783sX6voz4oFf3lkb4nVL6uob++PP+8uj4o137yJ371LP6tHr5qmn3mUz+7uL84cv817n96Nb4p2P5rW/7xJf70a7969z//7ZmOma22///tpBmkLbb/////9u2kJDbkGZmtv//tmYAOpDb2/8AZrb/25A6AGa2//9mADqQ2///27a2tra2tpBmOgCQZgAAAGbbtrZmZpC2kDo6Oma2ZgDbttuQOgAAAAA6AAA6kNvbkDq2kGaQOjoAADpmAAA6OpAAOma2ZjqQkLY6ZrZmtrZmttu2ttuQkJD/29uQZjq2tmZmOjpmkNs6Zmbb25A6ADrbtmbb29uQttvb27Y6ZpDbtpA6OjqQZma2/9tmZmaQtv+g0+FLrMaPzNyQOmakvt3S3+54n8xKfrtLocNLjb/09/tVhr9KlcFLqcaDp9GQkDrb/7ZmAGaQ27YAZmYAOjq7zuVhjsTo7/aOr9VzvtNit81LpsQ6kLa2ZpDb/9sAZpCQkGaQtrZmZraQZpCQ29u2tv9mkJBmZjq225BmOpC2Zma229uQtpA6OgDbkJCQ25CQkNu227ZmkGa2kLaQcXUVAAAAAWJLR0QAiAUdSAAAAAlwSFlzAAAOwwAADsMBx2+oZAAAI+dJREFUeNrtnf1/00aex4dgAiQoQCiEQnhwA1ZjBRs3MdnwoEaxIIGQpSWku5C0gdK95SG7tPvQ3dJ2d7u90t3bvW2ve3t3f+69ZkaSZVu25FiyvqN83j9AbNmj72fm45nRSPqKMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgLLsGhjYncvtGWxkb27fwMD+tGMDirBrYCg3PHhA68jI4MHc7oFDaccK6HJ4KDc44vpldHDwCO+GGnktlzs6eMz9zNjgkd3H044akON110djgwdzJ0I7nYGh3F6n+xobPDK0K+3wARVO7jsqbHHgaO71ruZDuwb2HRwXXz2VG0hbBUifoWHRI42f7s5HdXYN5E6JHurgbnRQO5mBvXyoOjB8oscDtF1Dp8fhp53M4SOjfKJ9OqYp9OEzfGI+NnwybV2g77x+VDjpbJxlHs7x/unUCXRPO4lD+0YT6kSO7x3RtJEjh9NWCPrEodyIpo3uS2ghe9cJPtwNw047AWGlwaEkd3FyGHbaEezjVkp8Uegwt9NenMTLNAPj/bASc+w08lraekFi7B/WtPG+LVUfH9S0U7EeLQI6nBjRRvb1c4e7D2jaEawTZJBDBzXtYJ9nMYeOaNopTMQzx8lRbeT1FHY7ro3sTls7iJczY9pgKgdXh4Y1bS+GuiyxV9Nyae37xJh2FG7KDLsOpjLEuRwf1Y7hEt+McOioNpLqIfrhY9oxTMMzwa5j2mjKV2ofOqaNYjk8CxzVRlPvFnYd1Y5h3qQ+p7WR1L0k+qajaccAeuWMNkbi2sfDB7S9accAeuOkpiV6tUl0zo5pWL1Uml3HtCNpx+ByQjuASbjK5LRxOvPeo9rBtEMA2+fsmEZiwiTZP4KBTmH2aKfTDsHPCe0AnX4SdMdZbYzWLOUYuiZlIdYxMTakHUs7BLA94u6Y8m9MeH+fO19gjOlvTnRXxCiVhQrQJbm4lgkni+I/Y4ob6IL8uyT+K1+sdFXSGW1P2rUCtsWpuLqB/FvTM9Xqpdnz1Wr1R3OiM+JmulytXrpSrV69Ft1Qh7URTMFV5JA2FtdVRGbR65gcRM90eYIx/e2uShrVkMhJRYa0wagf1ectCbdIecGyrBpjtvuGg1n0Pn65enXq+tyEfmOalS92NW06nd4Vn6AHct21m7E4Lf43rSJ3V43ZUwWWX/K6o/LNgnHLM46cM9klZk93FdQQLh5QkmHtRDcfd8xkWG4HxM3E7MVpvVpdvllgZk046ILz6RKfMr15+9KV6qXZleh7Oa6dSrtewDbY0930RJpJn/e6ImEm+a5RY/bij6tXp6pXnf5L9kz6jTtdBrVfG027XsA2OKV1dbGutE1+yZsluT2TNJP+jrceID59690LTXPyaGhjadcL2AajWldXWLpmqrlvcDOVF4R/DPmmMNPdAmMzqwulmWq1Or9S5asF3VhqVEu7XsA2OLY9M9V7Jkse1QkzcevwYa56b6HE8mvvCV+Vbxb4GlRXUY3BTCoyGMecydnm65lY/c/laXFA1w27tANp1wvYBsPdLYA7R3N249GcZDLQTOW1n9z+6f3uOqbDONWrJEe0rnJtOWbS54WbzFrdTPpy7YE4r9vcMzH9+sKt7k71vh59JRUQosuTqu6ipTdXcs2kz4te6Ep1/fLG+vr6+9ULdTMt31pd+KAbO8V28hn0lcPaSDwF6cJUm6sP+XkWi5/onXljlptpc+18gc3ML3Yx0g3iGhQ1GU3uAnD90Yebjx5vyK5r+aPI3zs0piGFhZIM0zupOoSzKYryOr3r9/doZ9IOAWyPY92d6k2es9oYNXuDiJC7fp/cHQ4gOsSu3yd36xXogte0A5QOnk6hY1KZQUprhGdoWRt0yfExOhfwHx7TUszSCnpnH5lkkrsGteG0YwC9cYpKMsk92igGOcU5NE7jfpC9JFJrgt44PEpheMkRSa0JeuPsiDac9kiXI5NaE/TG2ZG0H16yVxsjdmIHbJeUH16S8qNbQLwcPqaNpjZl2X8q5Ue3gHg5dErT+vpE1TpDI9o4juOyRU7TjqawfLnrtJb+9B/EzcAB7UDf05OeHMfUO5PsH9S0wb4+K+zQXk0bT/npZCAhToxoY318NPzuA9rYPgxxWYU/fXm0T8POwKCmHUW3lGVOjvfHTkPHNO0AZktZ58Qot1Oyo89ubqUzGOF2ALypR44ktvazf98BWGkHMXRK07SjiZziODs8pmmjr8FKO4iTw5qmjZ6O+TTH4TPHNE3bgxNxO439uQPx+kk6aeQ0zp3sSIaGR7if9g71Pii9fpo7aezgboxvOxfpJ+1UroeLCs7uO6rBSYAzkOPTcU0bPH2i6yHv+O4jg2P8y+OnY+jeQBbYNXR6XJOO2psbiGSp4wP7TksfaaPDJ4jcTgWoMHBm+Jh0lDY+mMvldg8MtJ4NOTkwsC+XG3Q/OLonN4AbmEAwAydyR09pERgfPHIGPgLh7B/YncvtHRwcb7bQgcHBg7ncawM4gQsAAAAAAAAAAACwg/jZv1Hk52lXy86t+l7qPu3Q25B2Q/eDtOs4/ron2W4kg9ohKmEmJaGpEmZSEpoqYSYloakSZlISmiphpq7wPfG8663qqEwjKpKK6JhJn0/OWySrHmbqDpgpqahIKkomKMN5gnmwmTpvVUdlmlGRVAQzpQfMFIQ+b1mWNVdhhmVZUwVm8pc1zy7lBcsqchMFbjVrtvguM/m2ki0+Uy+SjsrYgZkC0OdLjJlzFWbPVeTUp6HvyS/VmP6k3VZmWiX5tjCTVZKfd4ukozJ+YKYA8ktFMXaJ/4VVWszkfqp1q/CQeEv2TPIdt0hCKuMHZgrA7Ub4cGZZVotdbP4Wa7dV+Ke8UGwwE3omFRXFYyY5veGOkDRPsU2LWy14axszxThjIlr1MFMQ5fvSHM54FnS8Vl4ottsaOMy5RRJSGT8wUwD5JUsep9ncJcZUweujhF2MkjRL8FZnzl1iTXMmp0g6KuMHZgpAny86C9i26wBTLga4dnFeBW91VwMah7linGviJKseZgrCFpMbO2CKE+V0ivBP9CJTUxk/MFMANu9nxEjVsmXbZmpbZGoq4wdmCsJ217RbNmzXTO2LTE9l7MBMSkJTJcykJDRVwkxq8fQZYZUwk1o833r+jKxKmEktnm9tcTvRVJlJMz3dyjjPf0Gx6mEmRfnli7Qruk3dp/HdRAVl3kwff/KrtOu5Xd2n8V2SghSAz5k+fvqCpkqYSS2ecytRVQkzqcWvn76gqxJmUhKaKmEmJaGpEmZSEpoqYSYloakSZlISmiphJiWhqRJmUhKaKsmaSdzR4btINr9U1OcjXPZKs5rjhqbKhM1kyLtY6/crBlO/Odaj2Uz8+mojws0dNKs5bmiqTNhMtmWVtm0m/0vRK8lUEckJUgeaKpM209xv+G2vvZtJ3l5tht8qRLOa44amysTN9CEfq6SZnNxY4k5EQ+YRcTwk/zB8N8iWTCfBkZNYK/JNjDSrOW5oqkzcTBXDKkozubmxhHPMhzVWnwOJt7zcWSLNliXN5CbWkh1VhARHNKs5bmiqTN5M3BvcEl5uLJ6qSH9yz70Rnzlm8rbLbsysm8nNmBQ4HMYpSB1oquyDmcoLNW6Jem4se6pQvvnbTyv1+TQ3ibddOsYd5mRiLZhJBZV9MBOzF38nzORZ5/60XdPni/UjfWmmhgmUayaZWMtZJYCZSKvsh5nyS78Xw5x7RKfP18wis0u2d2wmhzlne8Mwx3xZ2DBnIq6yH2bih2l8Au7mxmL2ZxcrzLg163UzwiTedj4BN50JuJdYC0dz9FX2xUzMbMyNVV4QywWOM3hSNdEpudt5/sea7eU+FksDsk8yw5Nl0azmuKGpkuy5uSbE2Be29tnvoNKDpkpVzIRzcwqoVMZMuGqAvkplzKR0UDtEJcykJDRVwkxKQlMlzKQkNFVm2kwvX6YdTT9U0iHDZnr5+dbTtKNJXiUlMmuml59vbcFM6kRFUpEMSlgp0zxLu6Lb1n3/v5uooC8ybyWYqX+Cvvgy7baGmfr43aQFSTthzqRMVCQVeUFxO8FMykRFUpEvqC++hJmUiYqkIpJB7RCVMJOS0FQJMykJTZUwU+xEuFA9AyrjjoqkooSDsp0bSTsAM2VGUdJmEneVWp3uBeVminCDH2WVKURFUlE/zNT5KeAwU2YU9cdMvgxBTtIfmQ3BuQ/ZjPVR4f1XmUJUJBX1w0ymuAHZyQDkJP1pMBN6pmwo6scEXGZWbMgAxGAmmKlbbJGIrMj8GYJ8SX9gpkwp6sswJ9Ij1o/oZNIfmAlm6g6ZkNMqNuY9EEl/YCaYqTuEmUTqMTcDkJf0Z3HaSwQUJSsZZZUpREVSUT/MJI3kZgBykv40JALibyZpJ5JVDzOpCU2VMJOS0FQJMykJTZUwk5LQVAkzKQlNlTCTktBUCTMpCU2VMJOS0FTZm5lIknaV9gOaKnuJ6g9p2yaQP6Zdpf0ge2YCqUGz2WhGBUKg2Ww0owIh0Gw2mlGBEGg2G82oQAg0m41mVCAEms1GMyoQAs1moxkVCIFms9GMCoRAs9loRgVCoNlsNKMCIdBsNppRgRBoNhvNqEAINJuNZlQgBJrNRjMqEALNZqMZFQiBZrPRjAqEQLPZaEYFQqDZbDSjAiHQbDaaUYEQaDYbzahACDSbjWZUIASazUYzKhACzWajGRUIgWaz0YwKhECz2WhGBUKg2Ww0owIh0Gw2mlGBEGg2G82oQAg0m41mVCAEms1GMyoQAs1moxkVCIFms/UW1c/SzuwVzM/TrtXEyaKZ0nZNO9Ku1cShKbFXM6UdvzpR7QCJMJOS0JQIMykJTYkwk5LQlAgzKQlNiTCTktCUCDN1BX9s6na3KiIxtaiyqKkj3ZhJPBZaPYmpRZVFTR2BmZKLKouaAuHPmmdtzdR5qyISU48qi5oCgZmSjyqLmpgYoSzLsuYqzLAsa6rATP6y5tmlvGBZRW6iwK1mzRbfZSbfVrLFZ+pFEpGYBDBTAPp8iTFzrsLsuYqc+jT0PfmlGtOftNvKTKsk3xZmskry826RRCQmAswUQH6pKMYu8b+wSouZ3E+1bhUeEm/Jnkm+4xZJRWIiwEwBuN0IH84sy2qxi83fYu22Cv+UF4oNZkLPtCM1uVOmuYpwhKR5im1a3GrBW9uYKcYZUzYrPouauBPuS3M441nQ8Vp5odhua+Aw5xZJRWIiwEwB5JcseZxmc5cYUwWvjxJ2MUrSLMFbnTl3iTXNmZwiiUhMBJgpAH2+6Cxg264DTLkY4NrFeRW81V0NaBzminGuiWex4rOoiZtCTG7sgClOlNMpwj/Ri0xHYiLATAHYvJ8RI1XLlm2bqW2R6UhMBJgpCNtd027ZsF0ztS8yJYlJADMpCU2JMJOS0JQIM6nF02eEJcJMavF86/kzshJhJrV4vrXF7URTYibN9MlWxnn+C5oVDzMpyS9fpF3LQRUPMynIx5/8Ku1KDqz4LJqJZFTxwOdMHz99QVMizKQWz7mVqEqEmdTi109f0JUIMykJTYkwk5LQlAgzKQlNiTCTksQvUVwN2uOFoDCTkmxfou3cntUMzKRSVEQkiiuHxXWfjZgxXJ5O2EzNv5X8UlGfj3KtIszUAWGmgOuHlTCTIW89rN9kFkz9jka/vAYz8YtijShX5MNMHXDMVKvn3RA315RMJzmCm5Sjv1FF/LZtWaVtm8n/UvRK8v7+RDUpQY9mMvmkycu7IVJ0WNJMblKOPkcV8dv23G945L2bSd4Ta0a4vwNm6oCYgJf8eTdk05h1M6UQVcRv23Mfcvc3dKzi12HI5A+Oh+QfnTre6HeewUwdsEU3VPTl3ZBV79a2bW0/VUsfzFQxrKI0k9uxivDNhzVWnwOJtzp2vLKjipKVBmbqgO2mIWv6Hbtmkkk5+h1VxG/z4M25CreE17Hy/DL6k3vu3dOuoo4dr8hJEzgcxqxJCXo0k/fzZt50tm6mSHUcc1QRv22L1DQ1HnE9oZE9VSjf/O2nlfp8mgvo2PHCTPFIFGaSeRTcvBt8HDCdccBNytHnqCJ+Wy6SLf5OmMmzzv1pu6bPF+tH+tJMHTpeZ5UAZupRojP1FIdzVj3dZs328iZSXhqQ6xq/F8Oce6Sgz9fMIrNLtndsJoe5Th0v5kzkJfbHTPwwrcbqHSuzP7tYYcatWe83IEzSsePF0Rx5iX0yEzMbExqVF8RygeMMnglLdEqdOl7ZJ0VZ9adZ07FCUyLhc3NNiLEv0poazZqOFZoS1TETzs2Rl6iQmXDVAHWJCplJ8ah2gESYSUloSoSZlISmRJhJSWhKzLSZXr5MO5TEJZIiw2Z6+fnW07RDSVgiMTJrppefb23BTCpFRVaTsFKmeZZ2LQdXfGrfTkzTnzJvJZipf5q++DLttoaZ+vztJDVJO2HOpFBUlDVxO8FMCkVFW9MXX8JMCkWVRU1KQFMizKQkNCXCTEpCUyLMpCQ0JcJMsRNHpiPiEhOJKouaOtMui58PmAmaotEui58PbqZt32FNQGJaUWVRU2faZfHzATNBUzQCsvjJ/FEysYZzS7sZ66PC+ywxraiyqKkzrVn8nPxRDWZCzwRNEWiXxY/BTDBTt7Rm8WvIHwUzQVN0WrP4efmjYCaYqTtas/gxN38UzAQzdUdrFj8vf9TitJdTavtpIQlITCuqLGrqTEAWPyd/VENOKf5mknbKYsVnUZMS0JQIMykJTYkwk5LQlAgzKQlNiTCTktCUCDMpCU2JMJOS0JTYq5loknatJg5Nib1F9Ye0XRPMH9Ou1cTJoplAStBsNppRgRBoNhvNqEAINJuNZlQgBJrNRjMqEALNZqMZFQiBZrPRjAqEQLPZaEYFQqDZbDSjAiHQbDaaUYEQaDYbzahACDSbjWZUIASazUYzKhACzWajGRUIgWaz0YwKhECz2WhGBUKg2Ww0owIh0Gw2mlGBEGg2G82oQAg0m41mVCAEms1GMyoQAs1moxkVCIFms9GMCoRAs9loRgVCoNlsNKMCIdBsNppRgRBoNhvNqEAINJutt6h+lnZWgWB+nnatJk4WzZS2a9qRdq0mDk2JyM+kJDQlwkxKQlMizKQkNCXCTEpCUyLMpCQ0JcJMSkJTIszUFXbHx8zbfXgIfeISU4sqi5o60o2ZxIPE1JOYWlRZ1NQRmCm5qLKoKRD3yZbBZuq8VRGJqUeVRU2BwEzJR5VFTYzJp1pa1lyFGfJpl/xhl1bNswt/crh4EH3gVrNmi+/KB/aWbPm8TK9IIhKTAGYKQDwJ3OQPnZ+ryKlPQ9/Dn/WsP2m3lZlWSb4tzGSV5OfdIolITASYKYD8UlGMXeJ/YZUWM7mfat0qn9HL35I9k3zHLZKKxESAmQJwuxE+nFmW1WIXm7/F2m0V/hEPp/eZCT3TjtTkTpnmKr4HyjdPsU2LWy14axszxThjymbFZ1ETd8J9aQ5nPAs6XisvFNttDRzm3CKpSEwEmCmA/JIlj9Ns7hJjquD1UcIuRkmaJXirM+cusaY5k1MkEYmJADMFoM8XnQVs23WAKRcDXLs4r4K3uqsBjcNcMc418SxWfBY1cVOIyY0dMMWJcjpF+Cd6kelITASYKQCb9zNipGrZsm0ztS0yHYmJADMFYbtr2i0btmum9kWmJDEJYCYloSkRZlKLp88IS4SZ1OL51vNnZCXCTGrxfGuL24mmxEya6ZOtjPP8FzQrHmZSkl++SLuWgyoeZlKQjz/5VdqVHFjxWTQTyajigc+ZPn76gqZEmEktnnMrUZUIM6nFr5++oCsRZlISmhJhJiWhKRFmUhKaEmEmJaEpEWZSEpoSYSYloSkRZlISmhIJm0lchu+7sjG/VNTno1yrSLOmY4WmxMTNZMhbD+s3mQVTv6PRo9lM/KJYI8oV+TRrOlZoSkzcTLZllbZtJv9L0SvJ+/sT1aQENCUmb6a53/B7FXs3k7wn1oxwfwfNmo4VmhL7YKYP+VglzeQkNBK3jxky+YPjIfmH4bursWQ6WWmcbEjR7zyjWdOxQlNiH8xUMayiNJOb0Eg4x3xYY/U5kHjLS3gkciNZ0kxuNiTZUUXJSkOzpmOFpsR+mIl7g1vCS2jE88voT+65d08zx0zedtmNmXUzuWluAofDmDUpAU2JfTFTeaHGLVFPaGRPFco3f/tppT6f5ibxtkvHuMOczIYEM9GX2BczMXvxd8JMnnXuT9s1fb5YP9KXZmqYQLlmktmQnFUCmImwxP6YKb/0ezHMuUd0+nzNLDK7ZHvHZnKYc7Y3DHPMlzoLcybSEvtjJn6YxifgbkIjZn92scKMW7NeNyNM4m3nE3DTmYB72ZBwNEddYp/MxMzGhEblBbFc4DiDZ8ISnZK7nSftq9lewlqxNCD7JDNChiOaNR0rNCUSPjfXhBj7wtY++x5VStCUqI6ZcG6OvESFzISrBqhLVMhMike1AyTCTEpCUyLMpCQ0JcJMSkJTYqbN9PJl2qEkLpEUGTbTy8+3nqYdSsISiZFZM738fGsLZlIpKrKahJUyzbO0azm44lP7dmKa/pR5K8FM/dP0xZdptzXM1OdvJ6lJ2glzJoWioqyJ2wlmUigq2pq++BJmUiiqLGpSApoSYSYloSkRZlISmhJhJiWhKRFmip0o9zwoLjGRqLKoqTO2c09yB2AmaIqGvEHZ6nRbMTdTlHtFqUpMK6osauqMc4NypyxRMBM0RcMxky/ZlJM/SibWcG5pN2N9VHifJaYVVRY1dUaYyRT3sjvJpJz8UQ1mQs8ETREQE3CZpLMhmRSDmWCmbrFFTrsi8yeb8uWPgpmgKTpymBOZNutHdDJ/FMwEM3WHzO1qFRtTaIj8UTATzNQdwkwii52bTMrLH7U47eWUipTgjqrEtKLKoqbOOCnHxOGcszTg5I9qyCnF30zSTlms+CxqUgKaEmEmJaEpEWZSEpoSYSYloSkRZlISmhJhJiWhKRFmUhKaEns1E03SrtXESbuCk6j4P6QdfDB/TLutEwcVDwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEB0Jr9KJFX/8ntxlKI/mmCMbd7xhZi/4r7Q6+/qTyYSCSDS/qvy/+U7XZZ9W3xv0vua/ueJ7krwBfVG/avnzvNy9Te3Xdg2ub7BmN2SCVu/cf7r29txmP5ow/3TWDxfrd67VukxQP0GTxRo/LsvmuWVgn65Wq1WL83Wk8YbLUm7ygsrnYvOv+P+9f6q/Ojk+arH8koh6v7zb8lkhqYXQvmKW8xqJ4OVr03w7GMrXuHl+9Mz8nvXH0ZMkDgpd2qIh3dckH/LsMoXe6387hAZH1vNxMwa19V9ebLqhSBhI3uq11+H05i+Rw0YQR7JL915s8n9Zmnzo85lc+HX3/3m8ZVX1XXvDf/GiPt33/GZ6WbBKcHs2D3yDHbis4LJla9XpxmbecctIQr5t7j/Ls3y38GP5kR182gvV6uXrlSrV3v+NUenLprdbWiIGu+019t8y5wqiHSRDuJXel1E7ZnpgUgDWP6224Caig5ozPy3AbWsz9eY/peGDeWLFf1R55rkP13T36FFMVPr/vUnFcZ4hzL/VfWSzMfqM1PHLIflFcaWp93x0tll+eJEBzO11JDYg+F/R0R7mXd6b3db/91hWP7niZgf8J6Y/3NdPvah/MYr0TlPVavVq9YdJ0NtmB5eEaWCrHpeL/r1b67xYh698oYL2RBLlj+HZGjRerV6ae38bI0ZpbvrN8SH87cZO9cydCzz4PNrvvf1+WJLizTtvt4UnogmM0Xbf/k9pj/6a2PPdO2VU6/zDfuzrbq2y3I8u3eF9yvibddMPGoZesTK9+9av1y9OnV9boL/CoQtE4NnB/WZKf9GpakKnXHW90sM1tNQ6H/w98R049La32ZLBbYufnKyYF/pooHNenOGFy3t+ehvV6fW3/+04hXjFXlXzmucma+++tn5C86W5drmBGN2g5t4jZtNyZrNr0S/etPtGvJXhIw7vp4pbP9/LjgdQ+Aw55dYvv/3Zn1mg39nZCf/6vrcf3YwU2u7lm8WjFuecWTr2SVmJ5qY2l7867x/+C+yNmbiEb8dtcXPTbO8rGpvmCvfrFYvvcUNttr0ZKXyQq3+ZyQzyerJe41pTH3tzG4vicc2zTyeEL/yH00VNmetD0QByzXZ5vatjTa71+XQLBtb9qvCTP8oMLGv5mGu7f6vrriz5TAz6fMizW+j4JaR1ZCPDYpmJr1aXb5Z4KVwBzm/JKPEpx5v3r50pXppNuQopCd0n5mcWUaAmfh/Tjp2qcd9NBLPdVwyvSzazqjx3YRRYncv+Mx0riZnl8Jpnc3UuWj9xvTmBjOcVma+Yyen95x593t/8WKeJ7sqUfyDhVsNx6X+5jFKTsBu2MFm6rx/Zpy/YBfFqDX/FTc0azvM2XOVVjPJ7Xe9htBv/FfzMNe5howasxd/XL06Vb266I9Mv9HlSkVvZtqsuFXoDhisfP9VtXqjxivM0S30uI9GYqZ4JonU4zwnSQyXs0XRIvWjOcbslQdFxjYXSo3VZzQNcyFFz8x+MHHXa2VRRz/UGhqT6Y9e8XHq3Hl3uJpx7MOntrzfapDva01ppn9ueIdjAWaKsH9mtByxlVfcnunq9Lpfbt1MzpRpVg6zC6X6tKB5zhRSQ0aN6e80zEyMW+9eaJqTJ28mxu5WnQn4vQVnbeJmQTjCLLozA66n6dFIZl2PGz6XbkwV6maaWb2jz9/6/rvzTYryS3WNoUXr13+49nCa6d/9UPQa87tp58dcN9OTCn8hHkHA39MvSF1i6LtV8Wu3rDnfaz54/aPAymvumg73DD8CuXRRmina/vP8mNUv01kqEj1TddlyOwj+oI3mnin/1n/X1y/4LsvfNk/Awyrf8HmbdwkzqwslcWy54oz9/TKTp8FrX8dMdslwqp3r8R6NJLtdt6e1vafgLj+syYNxx0z6mxuFmbU7RmmzeQronwCHFq0/2hAl6vOfvefMWf45wcLM5KN8v9nMtu9hhfxLNRG9nGi19EyR9l9ee7x2ZaMgFzyX61MU07rWIF5UaLOZjKmv6ysado2Vvy00myms8g05bb86JbuE/Np7IjJegDsip2WmFTmDKN//oehvcd+Luh75nCQR+E8vVnhn6xvmHlybyM/6q6rFS5GKFiWWV2aWfvxpxRmLo5vJP+p6+ut9k1Fi31WEfluGZdeY7o5K/gl4x/3n3/i+/nnbG/HsFfurhnUu8djNpidv8uNbw3vDrpX/1bo0EFZDRvOoK//kY7zd6bGyyZuJRyZ+gyLeywW3p3U+0tDTegLFAyZrDa23+XiDzaz97q1pY6Xh4LxhmSdC0bLE5Wl2buPGtIgnopnERydbVwz9kyajVP7ImaybJdZh0bLz/v2ft909PrhZsGv5tWYzN/VM9orf8fZXFxh7v/pgqmmY61xDk4FmKq/95PZPt3MSYxtm8vcQDVU4/X713s0CM64trMijPfEULffRSGIO6D4TyX1OEvtu2q0lp2L0twu8Oid4N2v6Ds69x3nL3UcoWnaTK9Ln+m0WaKYbr6pXW3qmB9c2yo2nU8SPxOA9g9z9zF++2WCbt8XxtC7O09kf1M/NrdbNFLJ/fnLv3Y1GM02uFMSo1TzMimryKt+QjvFN2fjv8P573umU8BrSl2sPxD6aeyamX1+4leipXvG0Ud47BphppiAXC/ixu/FBYWZp6n++5WvGNfeLvB4anonkPCdpctoZH/2/shm+HM1XGPRlyz1BJ1agxVMpTT6djFC0s2jorGH970qwmdyeaWbVP4bMzC9uBKgvul6evFlg5ce31x2qF9r1TCH7v/zN2k++d424KoMWFyzwQWZmdtFbR20x0wNnqmYsnm9co9E3H3/D59jhNST6hvLaler65Y319fX3uQrXTMu3Vhc+6NeVA+6CvjzqEEenchWTTb4nDoqtSEPujBfv5tpDWU26GOVWH8pDxPXtH0/MrP4wV/nO8+KUN8zMrC540el/LriN23A2UV/u+PivfwqLbP79oetw/8UgjPEF9Ej7n1wRbnF6Jv7v5rviG2LGoi/fbNOeM4+8vRkLFp8N+HZfvh/xyWXyrN7m6kMxTecnemfeEBczbK6dL/AfVMIjXXvy/2L+C2Fm/q9LG+jLzs9Zvlxe6f2wdNJ3NYDOT146Vxix8pWmws+1XvxgR2yROPY/KcZU/9HrZKdFQ368W38185cYD+D1Rx9uPnrsFL/8Uc/lAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYuf/ActWj5r15ZdpAAAAAElFTkSuQmCC"},646:function(s,t,a){s.exports=a.p+"assets/img/20210321141145.ef7dff6f.png"},647:function(s,t,a){s.exports=a.p+"assets/img/20210321141224.8b50762c.jpg"},648:function(s,t,a){s.exports=a.p+"assets/img/20210321141225.aaa9397a.jpg"},649:function(s,t,a){s.exports=a.p+"assets/img/20210321141226.8b157fcd.jpg"},729:function(s,t,a){"use strict";a.r(t);var n=a(7),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"redis-安装、启动与停止"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-安装、启动与停止"}},[s._v("#")]),s._v(" Redis 安装、启动与停止")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -z或--gzip或--ungzip 通过gzip指令处理备份文件。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -x或--extract或--get 从备份文件中还原文件。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -v或--verbose 显示指令执行过程。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -f<备份文件>或--file=<备份文件> 指定备份文件。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf redis-6.0.9.tar.gz\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入Redis解压目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" redis-6.0.9\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果出现 “cc：命令未找到” 报错，需要安装gcc")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Centos中使用yum来安装gcc（这种方式需要能上网）")]),s._v("\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 若要安装g++，则输入（这种方式需要能上网）")]),s._v("\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc-c++\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果出现 “zmalloc.h:50:31: 致命错误：jemalloc/jemalloc.h：没有那个文件或目录” 报错")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MALLOC")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("libc\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 继续报错，server.c:5343:176: 错误：‘struct redisServer’没有名为‘maxmemory’的成员")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参考https://blog.csdn.net/Mr_FenKuan/article/details/111072880")]),s._v("\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" centos-release-scl -y\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" devtoolset-9-gcc\nscl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" devtoolset-9 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看Redis安装位置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" redis-cli\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" redis-server\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br")])]),s._v(" "),n("img",{attrs:{src:a(644)}}),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("文件")]),s._v(" "),n("th",[s._v("说明")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("redis-server")]),s._v(" "),n("td",[s._v("Redis服务器")])]),s._v(" "),n("tr",[n("td",[s._v("redis-cli")]),s._v(" "),n("td",[s._v("Redis客户端")])]),s._v(" "),n("tr",[n("td",[s._v("redis-benchmark")]),s._v(" "),n("td",[s._v("Redis性能测试")])]),s._v(" "),n("tr",[n("td",[s._v("redis-sentinel")]),s._v(" "),n("td",[s._v("Redis哨兵，用于主从复制、分片集群，保证高可用")])]),s._v(" "),n("tr",[n("td",[s._v("redis-check-rdb")]),s._v(" "),n("td",[s._v("检查RDB文件")])]),s._v(" "),n("tr",[n("td",[s._v("redis-check-aof")]),s._v(" "),n("td",[s._v("检查AOF文件")])])])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定配置文件启动Redis服务器")]),s._v("\n/usr/local/bin/redis-server /opt/redis/redis.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定某端口号启动Redis客户端")]),s._v("\n/usr/local/bin/redis-cli -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试连接")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v("\nPONG\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止Redis服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出Redis客户端")]),s._v("\nnot connected"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef|grep redis")]),s._v("\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12324")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10325")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":41 pts/1    00:00:00 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" --color"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auto redis\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试性能")]),s._v("\nredis-benchmark -h "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"redis-基本操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-基本操作"}},[s._v("#")]),s._v(" Redis 基本操作")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis有16个数据库，默认0号库，可以使用select切换库")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回当前数据库中 key 的数量")]),s._v("\ndbsize\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查找所有符合给定模式 的 key")]),s._v("\nkeys *\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查给定 key 是否存在")]),s._v("\nexists key\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除给定的一个或多个 key")]),s._v("\ndel key\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置过期时间")]),s._v("\nexpire key seconds\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看存活时间，即还有多少秒过期")]),s._v("\nttl key\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以字符串的形式返回存储在 key 中的值的类型")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" key\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清空当前库")]),s._v("\nflushdb\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清空所有库")]),s._v("\nflushall\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# config get 配置项，查看配置信息")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" config get port\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"port"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6379"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" config get "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dir"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/redis"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br")])]),n("h2",{attrs:{id:"redis-数据类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-数据类型"}},[s._v("#")]),s._v(" Redis 数据类型")]),s._v(" "),n("h3",{attrs:{id:"基本数据类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本数据类型"}},[s._v("#")]),s._v(" 基本数据类型")]),s._v(" "),n("h4",{attrs:{id:"string-字符串"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#string-字符串"}},[s._v("#")]),s._v(" String（字符串）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将键 key 的值设置为 value，如果 key 已存在，则覆盖已有值")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" key value\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将键 key 的值设置为 value，并将键 key 的生存时间设置为 seconds 秒，如果 key 已存在，则覆盖已有值")]),s._v("\nsetex key seconds value\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果 key 不存在，则将键 key 的值设置为 value，否则什么都不做")]),s._v("\nsetnx key value\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取")]),s._v("\nget key\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将键 key 的值设为 value ， 并返回键 key 在被设置之前的旧值")]),s._v("\ngetset key value\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 批量设置")]),s._v("\nmset key value "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 批量获取")]),s._v("\nmget key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自增1")]),s._v("\nincr key\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加指定步长")]),s._v("\nincrby key increment\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自减1")]),s._v("\ndecr key\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 减去指定步长")]),s._v("\ndecrby key decrement\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("h4",{attrs:{id:"list-双向列表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#list-双向列表"}},[s._v("#")]),s._v(" List（双向列表）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lpush key element [element ...] 将一个或多个值依次插入到键为key的列表的头部")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" lpush list "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpush key element [element ...] 将一个或多个值依次插入到键为key的列表的底部")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" rpush list "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lrange key start stop 返回列表中指定区间内的元素，-1表示最后一个元素")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" lrange list "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -1\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# llen key 返回列表元素个数")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" llen list\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lpop key [count] 用于删除并返回列表头部的元素")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" lpop list\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" lrange list "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -1\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" lpop list "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" lrange list "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -1\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpop key [count] 用于删除并返回列表底部的元素")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" rpop list\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" lrange list "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -1\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" rpop list "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" lrange list "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -1\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# linsert key BEFORE|AFTER pivot element 在指定元素前或后插入新元素")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lindex key index 获取指定索引的元素")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lpos key element [RANK rank] [COUNT num-matches] [MAXLEN len] 获取指定元素的索引")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br")])]),n("h4",{attrs:{id:"set-无序集合"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#set-无序集合"}},[s._v("#")]),s._v(" Set（无序集合）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加")]),s._v("\nsadd key member "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("member "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 随机删除成员并返回被删除的成员")]),s._v("\nspop key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回集合中所有成员")]),s._v("\nsmembers key \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回集合中随机成员")]),s._v("\nsrandmember key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断成员是否存在")]),s._v("\nsismember key member\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回集合中元素个数")]),s._v("\nscard key\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 差集，返回第一个集合与其他集合之间的差异，也可以认为说第一个集合中独有的元素")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sdiff")]),s._v(" key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 交集")]),s._v("\nsinter key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 并集")]),s._v("\nsunion key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("h4",{attrs:{id:"zset-有序集合"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#zset-有序集合"}},[s._v("#")]),s._v(" Zset（有序集合）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加")]),s._v("\nzadd key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("NX"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("XX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("GT"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("LT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("CH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INCR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" score member "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("score member "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除并返回得分最高的元素")]),s._v("\nzpopmax key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除并返回得分最低的元素")]),s._v("\nzpopmin key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回指定区间中的元素，-1表示最后一个元素")]),s._v("\nzrange key min max "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("BYSCORE"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("BYLEX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("REV"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("LIMIT offset count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WITHSCORES"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回集合中元素个数")]),s._v("\nzcard key\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h4",{attrs:{id:"hash-哈希表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hash-哈希表"}},[s._v("#")]),s._v(" Hash（哈希表）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建哈希表并赋值或者覆盖值")]),s._v("\nhset key field value "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("field value "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回哈希表中指定字段 field 的值")]),s._v("\nhget key field\n\nhmset key field value "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("field value "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nhmget key field "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("field "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回存储在 key 中哈希表的所有域")]),s._v("\nhkeys key\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回存储在 key 中哈希表的所有值")]),s._v("\nhvals key\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回哈希表中所有域和值")]),s._v("\nhgetall\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除返回哈希表中指定域")]),s._v("\nhdel key field "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("field "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h3",{attrs:{id:"特殊数据类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#特殊数据类型"}},[s._v("#")]),s._v(" 特殊数据类型")]),s._v(" "),n("h4",{attrs:{id:"hyperloglog"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hyperloglog"}},[s._v("#")]),s._v(" HyperLogLog")]),s._v(" "),n("p",[s._v("HyperLogLog 是用来做基数统计的算法。每个 HyperLogLog 键只需要花费 12 KB 内存，就可以计算接近 264 个不同元素的基数。")]),s._v(" "),n("p",[s._v("比如数据集 {1, 3, 5, 7, 5, 7, 8}， 那么这个数据集的基数集为 {1, 3, 5 ,7, 8}, 基数(不重复元素)为5。 基数估计就是在误差可接受的范围内，快速计算基数。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加指定元素到 HyperLogLog 中")]),s._v("\npfadd key element "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("element "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回给定 HyperLogLog 的基数估算值")]),s._v("\npfcount key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将多个 HyperLogLog 合并为一个 HyperLogLog")]),s._v("\npfmerge destkey sourcekey "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sourcekey "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h4",{attrs:{id:"geo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#geo"}},[s._v("#")]),s._v(" GEO")]),s._v(" "),n("p",[s._v("GEO 主要用于存储地理位置信息，并对存储的信息进行操作，该功能在 Redis 3.2 版本新增。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加地理位置的坐标")]),s._v("\ngeoadd key "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("NX"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("XX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("CH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" longitude latitude member "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("longitude latitude member "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取地理位置的坐标")]),s._v("\ngeopos key member "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("member "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 计算两个位置之间的距离")]),s._v("\ngeodist key member1 member2 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("m"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("km"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("ft"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("mi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据用户给定的经纬度坐标来获取指定范围内的地理位置集合")]),s._v("\ngeoradius key longitude latitude radius m"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("km"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("ft"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("mi "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WITHCOORD"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WITHDIST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WITHHASH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("COUNT count "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ANY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ASC"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("DESC"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("STORE key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("STOREDIST key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" geoadd city "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("116.23128")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("40.22077")]),s._v(" beijing "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("121.48941")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("31.40527")]),s._v(" shanghai "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("113.27324")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23.15792")]),s._v(" guangzhou "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("113.88308")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22.55329")]),s._v(" shenzhen\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" geopos city shenzhen\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"113.88307839632034302"')]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"22.55329111565713873"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" geodist city guangzhou shenzhen km\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"91.8118"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" georadius city "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" km\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("empty array"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" georadius city "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" km\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("empty array"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" georadius city "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v(" km\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shenzhen"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"guangzhou"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shanghai"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"beijing"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h4",{attrs:{id:"bitmap"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bitmap"}},[s._v("#")]),s._v(" BitMap")]),s._v(" "),n("p",[s._v("位图")]),s._v(" "),n("h2",{attrs:{id:"redis-事务操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-事务操作"}},[s._v("#")]),s._v(" Redis 事务操作")]),s._v(" "),n("p",[s._v("Redis的事务不是严格意义上的事务，单个命令执行是原子性的。")]),s._v(" "),n("p",[s._v("一个事务从开始到执行会经历以下三个阶段：")]),s._v(" "),n("ul",[n("li",[s._v("开启事务 multi")]),s._v(" "),n("li",[s._v("命令入队")]),s._v(" "),n("li",[s._v("执行事务 exec / 取消事务 discard")])]),s._v(" "),n("p",[s._v("multi、exec、discard、watch 这四个指令构成了 Redis 事务处理的基础。")]),s._v(" "),n("ul",[n("li",[s._v("multi 用来组装一个事务；")]),s._v(" "),n("li",[s._v("exec 用来执行一个事务；")]),s._v(" "),n("li",[s._v("discard 用来取消一个事务；")]),s._v(" "),n("li",[s._v("watch 监视一个(或多个) key，一旦这些 key 在事务执行之前被改变，则取消事务的执行；")]),s._v(" "),n("li",[s._v("unwatch 取消 watch 命令对所有 key 的监视。")])]),s._v(" "),n("p",[s._v("正常情况")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启事务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" multi\nOK\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令入队")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k1 v1\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k2 v2\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" get k1\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" get k2\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k3 v3\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行事务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" OK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" OK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v2"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" OK\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("编译时异常（语法错误，命令都不执行）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" multi \nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k1 v1\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k2 v2\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" suibianshuru666\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ERR unknown "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("suibianshuru666"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(", with args beginning with: \n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k3 v3\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" EXECABORT Transaction discarded because of previous errors.\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("运行时异常（其他错误，命令部分执行）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" multi\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k1 v1\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k2 v2\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" incr k1\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k3 v3\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" OK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" OK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ERR value is not an integer or out of range\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" OK\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("乐观锁")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" balance "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 监听余额")]),s._v("\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" multi\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" decrby balance "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 扣减余额")]),s._v("\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" incrby paymeng "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新增支出")]),s._v("\nQUEUED\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行事务，如果在执行事务之前balance被修改，则事务执行失败")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9990")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"redis-发布订阅"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-发布订阅"}},[s._v("#")]),s._v(" Redis 发布订阅")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 订阅一个或多个频道的信息")]),s._v("\nsubscribe channel "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("channel "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将信息发送到指定频道")]),s._v("\npublish channel message\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退订一个或多个频道")]),s._v("\nunsubscribe "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("channel "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("channel "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"redis-配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-配置文件"}},[s._v("#")]),s._v(" Redis 配置文件")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# GENERAL #####################################")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# By default Redis does not run as a daemon. Use 'yes' if you need it.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Note that Redis will write a pid file in /var/run/redis.pid when daemonized.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# When Redis is supervised by upstart or systemd, this parameter has no impact.")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将no改为yes")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"redis-持久化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-持久化"}},[s._v("#")]),s._v(" Redis 持久化")]),s._v(" "),n("p",[s._v("Redis 提供了两种持久化的方式，分别是RDB（Redis DataBase）和AOF（Append Only File）。")]),s._v(" "),n("ol",[n("li",[s._v("默认开启RDB，关闭AOF；")]),s._v(" "),n("li",[s._v("如果RDB和AOF同时存在，则优先采用AOF方式，这是因为AOF方式的数据恢复完整度更高；")]),s._v(" "),n("li",[s._v("不管是RDB还是AOF，主线程负责接收客户端请求进行读写操作，新开启的线程负责生成RDB或AOF文件。")])]),s._v(" "),n("h3",{attrs:{id:"rdb-redis-database"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rdb-redis-database"}},[s._v("#")]),s._v(" RDB（Redis DataBase）")]),s._v(" "),n("p",[n("strong",[s._v("RDB，在一定的时间窗口内进行了指定次数的写操作，则将Redis存储的数据生成快照并存储到磁盘等介质中。")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################ SNAPSHOTTING  ################################")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Save the DB to disk.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# save <seconds> <changes>")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis will save the DB if both the given number of seconds and the given")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# number of write operations against the DB occurred.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Snapshotting can be completely disabled with a single empty string argument")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# as in following example:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# save "" # 禁用RDB')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Unless specified otherwise, by default Redis will save the DB:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   * After 3600 seconds (an hour) if at least 1 key changed")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   * After 300 seconds (5 minutes) if at least 100 keys changed")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   * After 60 seconds if at least 10000 keys changed")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You can set these explicitly by uncommenting the three following lines.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# save 3600 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# save 300 100")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# save 60 10000")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The filename where to dump the DB")]),s._v("\ndbfilename dump.rdb\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The working directory.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The DB will be written inside this directory, with the filename specified")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# above using the 'dbfilename' configuration directive.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The Append Only File will also be created inside this directory.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Note that you must specify a directory here, not a file name.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" ./\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])]),n("p",[s._v("dump.rdb在以下情况时会生成：")]),s._v(" "),n("ol",[n("li",[s._v("满足配置文件的条件，在一定的时间窗口内进行了指定次数的写操作；")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Unless specified otherwise, by default Redis will save the DB:")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   * After 3600 seconds (an hour) if at least 1 key changed")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   * After 300 seconds (5 minutes) if at least 100 keys changed")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   * After 60 seconds if at least 10000 keys changed")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# You can set these explicitly by uncommenting the three following lines.")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# save 3600 1")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# save 300 100")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# save 60 10000")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[n("p",[s._v("执行 "),n("code",[s._v("save")]),s._v(" 命令；")])]),s._v(" "),n("li",[n("p",[s._v("执行 "),n("code",[s._v("flushdb")]),s._v(" 命令；")])]),s._v(" "),n("li",[n("p",[s._v("执行 "),n("code",[s._v("flushall")]),s._v(" 命令；")])]),s._v(" "),n("li",[n("p",[s._v("执行 "),n("code",[s._v("shutdown")]),s._v(" 命令。")])])]),s._v(" "),n("h3",{attrs:{id:"aof-append-only-file"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#aof-append-only-file"}},[s._v("#")]),s._v(" AOF（Append Only File）")]),s._v(" "),n("p",[s._v("AOF，是将在Redis中执行的所有写指令记录下来，在下次Redis服务启动的时候，将这些写指令从前到后执行一遍，实现数据恢复。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("############################## APPEND ONLY MODE ###############################")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# By default Redis asynchronously dumps the dataset on disk. This mode is")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# good enough in many applications, but an issue with the Redis process or")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# a power outage may result into a few minutes of writes lost (depending on")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the configured save points).")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The Append Only File is an alternative persistence mode that provides")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# much better durability. For instance using the default data fsync policy")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (see later in the config file) Redis can lose just one second of writes in a")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dramatic event like a server power outage, or a single write if something")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wrong with the Redis process itself happens, but the operating system is")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# still running correctly.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# AOF and RDB persistence can be enabled at the same time without problems.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# If the AOF is enabled on startup Redis will load the AOF, that is the file")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# with the better durability guarantees.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Please check http://redis.io/topics/persistence for more information.")]),s._v("\n\nappendonly no "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否开启AOF方式")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# The name of the append only file (default: "appendonly.aof")')]),s._v("\n\nappendfilename "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appendonly.aof"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The fsync() call tells the Operating System to actually write data on disk")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# instead of waiting for more data in the output buffer. Some OS will really flush")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# data on disk, some other OS will just try to do it ASAP.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis supports three different modes:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# no: don't fsync, just let the OS flush the data when it wants. Faster.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# always: fsync after every write to the append only log. Slow, Safest.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# everysec: fsync only one time every second. Compromise.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# The default is "everysec", as that\'s usually the right compromise between')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# speed and data safety. It's up to you to understand if you can relax this to")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# "no" that will let the operating system flush the output buffer when')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# it wants, for better performances (but if you can live with the idea of")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# some data loss consider the default persistence mode that's snapshotting),")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# or on the contrary, use "always" that\'s very slow but a bit safer than')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# everysec.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# More details please check the following article:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http://antirez.com/post/redis-persistence-demystified.html")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# If unsure, use "everysec".')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# appendfsync always")]),s._v("\nappendfsync everysec\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# appendfsync no")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br")])]),n("h2",{attrs:{id:"redis-主从复制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-主从复制"}},[s._v("#")]),s._v(" Redis 主从复制")]),s._v(" "),n("p",[s._v("测试主从复制：同一机器创建三个配置文件，启动三个不同端口号的Redis服务，并分别使用三个客户端连接。")]),s._v(" "),n("p",[s._v("配置文件如下：")]),s._v(" "),n("p",[s._v("redis_6379.conf")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 公用配置")]),s._v("\ninclude /opt/redis/redis.conf\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 个性化配置")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\npidfile /var/run/redis_6379.pid\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis_6379.log"')]),s._v("\ndbfilename dump_6379.rdb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("redis_6380.conf")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 公用配置")]),s._v("\ninclude /opt/redis/redis.conf\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 个性化配置")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\npidfile /var/run/redis_6380.pid\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis_6380.log"')]),s._v("\ndbfilename dump_6380.rdb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("redis_6381.conf")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 公用配置")]),s._v("\ninclude /opt/redis/redis.conf\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 个性化配置")]),s._v("\nport "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v("\npidfile /var/run/redis_6381.pid\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis_6381.log"')]),s._v("\ndbfilename dump_6381.rdb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("启动服务，连接客户端")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务器")]),s._v("\n/usr/local/bin/redis-server /opt/redis/redis_6379.conf\n/usr/local/bin/redis-server /opt/redis/redis_6380.conf\n/usr/local/bin/redis-server /opt/redis/redis_6381.conf\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动客户端")]),s._v("\n/usr/local/bin/redis-cli -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n/usr/local/bin/redis-cli -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\n/usr/local/bin/redis-cli -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("使用 "),n("code",[s._v("info replication")]),s._v(" 查看主从配置，Redis服务器启动默认是master节点。")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" info replication\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Replication")]),s._v("\nrole:master\nconnected_slaves:0\nmaster_failover_state:no-failover\nmaster_replid:d8ddf17b411a6e03263cf8f870bd1c2b5fd6e732\nmaster_replid2:0000000000000000000000000000000000000000\nmaster_repl_offset:0\nsecond_repl_offset:-1\nrepl_backlog_active:0\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:0\nrepl_backlog_histlen:0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("使用 "),n("code",[s._v("slaveof host port")]),s._v(" 手动绑定主从，或者在配置文件中配置 "),n("code",[s._v("replicaof <masterip> <masterport>")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" slaveof "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" info replication\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Replication")]),s._v("\nrole:slave\nmaster_host:127.0.0.1\nmaster_port:6379\nmaster_link_status:up\nmaster_last_io_seconds_ago:10\nmaster_sync_in_progress:0\nslave_repl_offset:112\nslave_priority:100\nslave_read_only:1\nconnected_slaves:0\nmaster_failover_state:no-failover\nmaster_replid:02496d2e289dd49a98a6f8dde2c153fb1587ba6e\nmaster_replid2:0000000000000000000000000000000000000000\nmaster_repl_offset:112\nsecond_repl_offset:-1\nrepl_backlog_active:1\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:1\nrepl_backlog_histlen:112\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" info replication\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Replication")]),s._v("\nrole:master\nconnected_slaves:2\nslave0:ip"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1,port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v(",state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("online,offset"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("126")]),s._v(",lag"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nslave1:ip"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1,port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v(",state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("online,offset"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("126")]),s._v(",lag"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nmaster_failover_state:no-failover\nmaster_replid:02496d2e289dd49a98a6f8dde2c153fb1587ba6e\nmaster_replid2:0000000000000000000000000000000000000000\nmaster_repl_offset:126\nsecond_repl_offset:-1\nrepl_backlog_active:1\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:1\nrepl_backlog_histlen:126\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("使用 "),n("code",[s._v("slaveof no one")]),s._v(" 解绑主从")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" slaveof no one\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" info replication\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Replication")]),s._v("\nrole:master\nconnected_slaves:0\nmaster_failover_state:no-failover\nmaster_replid:954afb72e238ca2fe9b2e84009d52585207ab7c3\nmaster_replid2:02496d2e289dd49a98a6f8dde2c153fb1587ba6e\nmaster_repl_offset:361\nsecond_repl_offset:362\nrepl_backlog_active:1\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:29\nrepl_backlog_histlen:333\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("blockquote",[n("p",[s._v("使用 slaveof host port 绑定主从，会有两个问题：")]),s._v(" "),n("ol",[n("li",[s._v("主服务器宕机，从服务器群龙无首；")]),s._v(" "),n("li",[s._v("从服务器断开，重新连接时，需要手动执行slaveof绑定主从。")])]),s._v(" "),n("p",[s._v("为了解决以上问题，引用哨兵模式。")])]),s._v(" "),n("p",[n("strong",[s._v("哨兵模式，是从服务器经过投票选举，票数高的自动提升为主服务器。")])]),s._v(" "),n("p",[s._v("sentinel.conf")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# By default Redis Sentinel does not run as a daemon. Use 'yes' if you need it.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Note that Redis will write a pid file in /var/run/redis-sentinel.pid when")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# daemonized.")]),s._v("\ndaemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以守护进程启动哨兵")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sentinel monitor <master-name> <ip> <redis-port> <quorum>")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Tells Sentinel to monitor this master, and to consider it in O_DOWN")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (Objectively Down) state only if at least <quorum> sentinels agree.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Note that whatever is the ODOWN quorum, a Sentinel will require to")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# be elected by the majority of the known Sentinels in order to")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# start a failover, so no failover can be performed in minority.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Replicas are auto-discovered, so you don't need to specify replicas in")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# any way. Sentinel itself will rewrite this configuration file adding")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the replicas using additional configuration options.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Also note that the configuration file is rewritten when a")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replica is promoted to master.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Note: master name should not include special characters or spaces.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# The valid charset is A-z 0-9 and the three characters ".-_".')]),s._v("\nsentinel monitor mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1表示执行故障恢复操作前至少需要几个哨兵节点同意。因为只有两个从节点，因此这个数值（quorum）只能设置为1")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("p",[s._v("启动哨兵")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("/usr/local/bin/redis-sentinel /opt/redis/sentinel.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("关掉6379，查看哨兵日志")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/bin/redis-sentinel /opt/redis/sentinel.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04:21.330 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04:21.331 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis version=6.2.1, bits=64, commit=00000000, modified=0, pid=6189, just started")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04:21.331 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Configuration loaded")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04:21.331 * Increased maximum number of "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" files to "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10032")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("it was originally "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" to "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04:21.331 * monotonic clock: POSIX clock_gettime\n                _._                                                  \n           _.-`"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("__ "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("-._                                             \n      _.-"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("_.  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("-._           Redis "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.2")]),s._v(".1 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("00000000/0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bit\n  .-"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v(" .-"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("`"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("`"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/    _.,_ "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("-._                                   \n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("    '      ,       .-"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v(",    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     Running "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" sentinel mode\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".-"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" __"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".-.`"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("'"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" _.-"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'|     Port: 26379\n |    `-._   `._    /     _.-'")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     PID: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._    "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._  "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-./  _.-"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'    _.-'")]),s._v("                                   \n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._    "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-.__.-"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'    _.-'")]),s._v("_.-"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'|                                  \n |    `-._`-._        _.-'")]),s._v("_.-"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'    |           http://redis.io        \n  `-._    `-._`-.__.-'")]),s._v("_.-"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'    _.-'")]),s._v("                                   \n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._    "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-.__.-"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'    _.-'")]),s._v("_.-'"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                                  \n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._"),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._        _.-"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'_.-'")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                                  \n  "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._    "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-.__.-"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'_.-'")]),s._v("    _.-"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'                                   \n      `-._    `-.__.-'")]),s._v("    _.-"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'                                       \n          `-._        _.-'")]),s._v("                                           \n              `-.__.-'                                               \n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04:21.332 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04:21.334 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Sentinel ID is 2fecb2124682385875472f734a46504ae74760fa")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04:21.334 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +monitor master mymaster 127.0.0.1 6379 quorum 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04:21.335 * +slave slave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6380 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v(" @ mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":04:21.337 * +slave slave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6381 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v(" @ mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:14.936 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +sdown master mymaster 127.0.0.1 6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:14.936 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +odown master mymaster 127.0.0.1 6379 #quorum 1/1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:14.936 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +new-epoch 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:14.936 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +try-failover master mymaster 127.0.0.1 6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:14.941 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +vote-for-leader 2fecb2124682385875472f734a46504ae74760fa 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:14.941 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +elected-leader master mymaster 127.0.0.1 6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:14.941 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +failover-state-select-slave master mymaster 127.0.0.1 6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:15.018 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +selected-slave slave 127.0.0.1:6380 127.0.0.1 6380 @ mymaster 127.0.0.1 6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:15.018 * +failover-state-send-slaveof-noone slave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6380 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v(" @ mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:15.118 * +failover-state-wait-promotion slave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6380 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v(" @ mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:15.331 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +promoted-slave slave 127.0.0.1:6380 127.0.0.1 6380 @ mymaster 127.0.0.1 6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:15.331 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +failover-state-reconf-slaves master mymaster 127.0.0.1 6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:15.361 * +slave-reconf-sent slave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6381 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v(" @ mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:16.325 * +slave-reconf-inprog slave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6381 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v(" @ mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:16.325 * +slave-reconf-done slave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6381 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v(" @ mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:16.425 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +failover-end master mymaster 127.0.0.1 6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:16.425 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +switch-master mymaster 127.0.0.1 6379 127.0.0.1 6380")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:16.425 * +slave slave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6381 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v(" @ mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:16.425 * +slave slave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" @ mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":05:46.468 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# +sdown slave 127.0.0.1:6379 127.0.0.1 6379 @ mymaster 127.0.0.1 6380")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":06:09.740 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -sdown slave 127.0.0.1:6379 127.0.0.1 6379 @ mymaster 127.0.0.1 6380")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6189")]),s._v(":X "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Mar "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":06:19.731 * +convert-to-slave slave "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" @ mymaster "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br")])]),n("h2",{attrs:{id:"redis-集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-集群"}},[s._v("#")]),s._v(" Redis 集群")]),s._v(" "),n("p",[s._v("Redis 集群，数据自动在多个Redis节点间分片。")]),s._v(" "),n("p",[s._v("Redis集群提供的能力：")]),s._v(" "),n("ol",[n("li",[s._v("自动切分数据集到多个节点上。")]),s._v(" "),n("li",[s._v("当部分节点故障或不可达的情况下继续提供服务。")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/bin/redis-server /opt/redis/cluster/redis_6379.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/bin/redis-server /opt/redis/cluster/redis_6380.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/bin/redis-server /opt/redis/cluster/redis_6381.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/bin/redis-server /opt/redis/cluster/redis_6389.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/bin/redis-server /opt/redis/cluster/redis_6390.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/bin/redis-server /opt/redis/cluster/redis_6391.conf")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef|grep redis")]),s._v("\nroot       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8545")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":39 ?        00:00:00 /usr/local/bin/redis-server *:6379 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8550")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":39 ?        00:00:00 /usr/local/bin/redis-server *:6380 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8567")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":40 ?        00:00:00 /usr/local/bin/redis-server *:6381 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8572")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":40 ?        00:00:00 /usr/local/bin/redis-server *:6389 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8577")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":40 ?        00:00:00 /usr/local/bin/redis-server *:6390 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8582")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":40 ?        00:00:00 /usr/local/bin/redis-server *:6391 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nroot       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8672")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2228")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":40 pts/0    00:00:00 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" --color"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auto redis\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建集群，选项 --cluster-replicas 1 表示为每一个主服务器配一个从服务器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./redis-cli --cluster create ${IP}:${PORT} ${IP}:${PORT} ${IP}:${PORT} ${IP}:${PORT} ${IP}:${PORT} ${IP}:${PORT} --cluster-replicas 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/bin/redis-cli --cluster create 192.168.66.133:6379 192.168.66.133:6380 192.168.66.133:6381 192.168.66.133:6389 192.168.66.133:6390 192.168.66.133:6391 --cluster-replicas 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Performing "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("hash")]),s._v(" slots allocation on "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" nodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nMaster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Slots "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5460")]),s._v("\nMaster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Slots "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5461")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10922")]),s._v("\nMaster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Slots "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10923")]),s._v(" - "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16383")]),s._v("\nAdding replica "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6390 to "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6379\nAdding replica "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6391 to "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6380\nAdding replica "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6389 to "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6381\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Trying to optimize slaves allocation "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" anti-affinity\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WARNING"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Some slaves are "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the same "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" as their master\nM: b8a032204ae864920827c9825bc1df5c2bf19f8f "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6379\n   slots:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-5460"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5461")]),s._v(" slots"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" master\nM: a970ee79f6939aa6f15dbba55e7cfc32f4de193f "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6380\n   slots:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5461")]),s._v("-10922"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5462")]),s._v(" slots"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" master\nM: 79074d9fe1f4d59bc6e027c326112094ade7bf93 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6381\n   slots:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10923")]),s._v("-16383"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5461")]),s._v(" slots"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" master\nS: d656dba4a474c9c840c44ce90d8ef847b36fff47 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6389\n   replicates b8a032204ae864920827c9825bc1df5c2bf19f8f\nS: 2a54c3642936c5b19751d50664811df5f87696a3 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6390\n   replicates a970ee79f6939aa6f15dbba55e7cfc32f4de193f\nS: 78fee4677ca3aeba72e7432926f887c0e0417aa5 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6391\n   replicates 79074d9fe1f4d59bc6e027c326112094ade7bf93\nCan I "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" the above configuration? "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yes'")]),s._v(" to accept"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Nodes configuration updated\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Assign a different config epoch to each node\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Sending CLUSTER MEET messages to "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v(" the cluster\nWaiting "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the cluster to "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Performing Cluster Check "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("using node "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nM: b8a032204ae864920827c9825bc1df5c2bf19f8f "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6379\n   slots:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-5460"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5461")]),s._v(" slots"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" master\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" additional replica"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nS: d656dba4a474c9c840c44ce90d8ef847b36fff47 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6389\n   slots: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" slots"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" slave\n   replicates b8a032204ae864920827c9825bc1df5c2bf19f8f\nM: a970ee79f6939aa6f15dbba55e7cfc32f4de193f "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6380\n   slots:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5461")]),s._v("-10922"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5462")]),s._v(" slots"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" master\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" additional replica"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nM: 79074d9fe1f4d59bc6e027c326112094ade7bf93 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6381\n   slots:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10923")]),s._v("-16383"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5461")]),s._v(" slots"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" master\n   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" additional replica"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nS: 78fee4677ca3aeba72e7432926f887c0e0417aa5 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6391\n   slots: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" slots"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" slave\n   replicates 79074d9fe1f4d59bc6e027c326112094ade7bf93\nS: 2a54c3642936c5b19751d50664811df5f87696a3 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6390\n   slots: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" slots"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" slave\n   replicates a970ee79f6939aa6f15dbba55e7cfc32f4de193f\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" All nodes agree about slots configuration.\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Check "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" slots"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Check slots coverage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" All "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16384")]),s._v(" slots covered.\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入客户端，-c表示以集群方式启动")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/bin/redis-cli  -p 6379 -c")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k1 v1\n-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Redirected to slot "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12706")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" located at "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6381\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:638"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k2 v2\n-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Redirected to slot "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("449")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" located at "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6379\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k3 v3\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k4 v4\n-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Redirected to slot "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8455")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" located at "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6380\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:638"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k5 v5\n-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Redirected to slot "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12582")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" located at "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6381\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:638"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k6 v6\n-"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Redirected to slot "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("325")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" located at "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:6379\nOK\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" dbsize\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".66.133:637"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br")])]),n("h2",{attrs:{id:"redis-应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-应用"}},[s._v("#")]),s._v(" Redis 应用")]),s._v(" "),n("ol",[n("li",[s._v("热点数据缓存")]),s._v(" "),n("li",[s._v("单点登录缓存用户信息")]),s._v(" "),n("li",[s._v("分布式锁")])]),s._v(" "),n("h2",{attrs:{id:"java-操作-redis"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#java-操作-redis"}},[s._v("#")]),s._v(" Java 操作 Redis")]),s._v(" "),n("p",[n("strong",[s._v("Redis 出厂配置，默认只接受本机访问请求。")])]),s._v(" "),n("p",[s._v("如果应用程序与 Redis 服务器不在同一台服务器，需要修改redis.conf。")]),s._v(" "),n("ol",[n("li",[s._v("将 bind 127.0.0.1 注释掉")]),s._v(" "),n("li",[s._v("将 protected-mode yes 改为 protected-mode no")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /path/to/redis.conf\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################## NETWORK #####################################")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bind 127.0.0.1")]),s._v("\nprotected-mode no\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"jedis"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jedis"}},[s._v("#")]),s._v(" Jedis")]),s._v(" "),n("p",[n("strong",[s._v("Jedis直连")])]),s._v(" "),n("img",{attrs:{src:a(645)}}),s._v(" "),n("p",[n("strong",[s._v("Jedis连接池")])]),s._v(" "),n("img",{attrs:{src:a(646)}}),s._v(" "),n("p",[n("strong",[s._v("两种方式比较")])]),s._v(" "),n("img",{attrs:{src:a(647)}}),s._v(" "),n("p",[n("strong",[s._v("配置优化")])]),s._v(" "),n("img",{attrs:{src:a(648)}}),s._v(" "),n("img",{attrs:{src:a(649)}}),s._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- https://mvnrepository.com/artifact/redis.clients/jedis --\x3e")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("redis.clients"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("jedis"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("3.5.2"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 直连")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Jedis")]),s._v(" jedis "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Jedis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.66.133"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 连接池")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisPoolConfig")]),s._v(" jedisPoolConfig "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisPoolConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\njedisPoolConfig"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setMaxTotal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\njedisPoolConfig"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setMaxWaitMillis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisPool")]),s._v(" jedisPool "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisPool")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jedisPoolConfig"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.66.133"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Jedis")]),s._v(" jedis "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tjedis "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" jedisPool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getResource")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jedis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\te"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("finally")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jedis "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\tjedis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\njedisPool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 集群")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" nodes "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashSet")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nnodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.66.133"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nnodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.66.133"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nnodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HostAndPort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.66.133"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisCluster")]),s._v(" jedisCluster "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JedisCluster")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\njedisCluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("h3",{attrs:{id:"redistemplate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redistemplate"}},[s._v("#")]),s._v(" RedisTemplate")]),s._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[s._v("    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependencyManagement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependencies")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.springframework.boot"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-boot-starter-parent"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("2.3.5.RELEASE"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("pom"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("scope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("import"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("scope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependencies")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependencyManagement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependencies")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.springframework.boot"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-boot-starter-web"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.springframework.boot"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-boot-starter-data-redis"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.springframework.boot"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("spring-boot-starter-test"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- Redis序列化 --\x3e")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com.alibaba"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("fastjson"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("1.2.75"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- Redis要使用连接池，需要引入commons-pool2 --\x3e")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.apache.commons"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("commons-pool2"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependencies")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])]),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自动配置类：RedisAutoConfiguration")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置属性：RedisProperties")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 单机配置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    host: 192.168.66.133")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    port: 6379")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 集群配置")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cluster")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 192.168.66.133"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 192.168.66.133"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6390")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 192.168.66.133"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6391")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 单机或集群配置连接池，SpringBoot2.X采用Lettuce客户端连接Redis服务端，默认不使用连接池，只有配置以下属性时才使用连接池")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("lettuce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("shutdown-timeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭超时时间")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("pool")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max-active")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接池最大连接数（使用负值表示没有限制）")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max-idle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接池中的最大空闲连接")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max-wait")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接池最大阻塞等待时间（使用负值表示没有限制）")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("min-idle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接池中的最小空闲连接")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Configuration")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RedisConfig")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RedisTemplate")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("redisTemplate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RedisConnectionFactory")]),s._v(" redisConnectionFactory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UnknownHostException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RedisTemplate")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" template "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RedisTemplate")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// key的序列化采用StringRedisSerializer")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringRedisSerializer")]),s._v(" stringRedisSerializer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringRedisSerializer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setKeySerializer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stringRedisSerializer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setHashKeySerializer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stringRedisSerializer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// value的序列化采用fastJsonRedisSerializer")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FastJsonRedisSerializer")]),s._v(" fastJsonRedisSerializer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FastJsonRedisSerializer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setValueSerializer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fastJsonRedisSerializer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setHashValueSerializer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fastJsonRedisSerializer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setConnectionFactory")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("redisConnectionFactory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringRedisTemplate")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("stringRedisTemplate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RedisConnectionFactory")]),s._v(" redisConnectionFactory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UnknownHostException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringRedisTemplate")]),s._v(" template "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringRedisTemplate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// key的序列化采用StringRedisSerializer")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringRedisSerializer")]),s._v(" stringRedisSerializer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringRedisSerializer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setKeySerializer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stringRedisSerializer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// value的序列化采用fastJsonRedisSerializer")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FastJsonRedisSerializer")]),s._v(" fastJsonRedisSerializer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FastJsonRedisSerializer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setValueSerializer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fastJsonRedisSerializer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setConnectionFactory")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("redisConnectionFactory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使 @Autowired 等注解标记的类能实例化到IOC容器中，否则会报NullPointerExecption")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RunWith")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringRunner")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@SpringBootTest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestRedis")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RedisTemplate")]),s._v(" redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("test1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 数据类型")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.opsForValue()  字符串")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.opsForList()   列表")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.opsForSet()    无序列表")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.opsForZSet()   有序列表")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.opsForHash()   哈希表")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.opsForHyperLogLog() HyperLogLog")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.opsForGeo()    地理位置")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// key操作")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.keys(pattern)")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.hasKey(key)")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.delete(key)")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 事务操作")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.watch(key)")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.multi()")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.exec()")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.discard()")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// redisTemplate.expire()")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 字符串")]),s._v("\n        redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k4"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v4"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k5"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v5"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k6"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v6"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k7"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v7"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k8"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v8"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        redisTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k9"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v9"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);