<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SSH学习笔记 | 初冬十月的笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <script>
		       var _hmt = _hmt || [];
		       (function() {
		         var hm = document.createElement("script");
		         hm.src = "https://hm.baidu.com/hm.js?ea067d5ff639c55d3843c3f224a1c187";
		         var s = document.getElementsByTagName("script")[0]; 
		         s.parentNode.insertBefore(hm, s);
		       })();
		         </script>
    <meta name="description" content="初冬十月的笔记努力加载中~~">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="keywords" content="初冬拾月,初冬十月,maiaimei,maiamy,maiam">
    
    <link rel="preload" href="/assets/css/0.styles.2038d0e5.css" as="style"><link rel="preload" href="/assets/js/app.a8f1b8c2.js" as="script"><link rel="preload" href="/assets/js/4.3ce32107.js" as="script"><link rel="preload" href="/assets/js/1.f767751f.js" as="script"><link rel="preload" href="/assets/js/27.0e20a0f9.js" as="script"><link rel="prefetch" href="/assets/js/10.b92763d3.js"><link rel="prefetch" href="/assets/js/100.30fff016.js"><link rel="prefetch" href="/assets/js/101.6657ba2c.js"><link rel="prefetch" href="/assets/js/102.20e8796c.js"><link rel="prefetch" href="/assets/js/103.14dfbae8.js"><link rel="prefetch" href="/assets/js/104.c664c372.js"><link rel="prefetch" href="/assets/js/105.f87c79b8.js"><link rel="prefetch" href="/assets/js/106.906e160c.js"><link rel="prefetch" href="/assets/js/107.a7825b94.js"><link rel="prefetch" href="/assets/js/108.431e29a8.js"><link rel="prefetch" href="/assets/js/109.61f8c8f9.js"><link rel="prefetch" href="/assets/js/11.635087ae.js"><link rel="prefetch" href="/assets/js/110.9e1064fc.js"><link rel="prefetch" href="/assets/js/12.f13fb97e.js"><link rel="prefetch" href="/assets/js/13.124462b1.js"><link rel="prefetch" href="/assets/js/14.77b34b24.js"><link rel="prefetch" href="/assets/js/15.99aa1c26.js"><link rel="prefetch" href="/assets/js/16.0713a946.js"><link rel="prefetch" href="/assets/js/17.c02a9fea.js"><link rel="prefetch" href="/assets/js/18.3b064b50.js"><link rel="prefetch" href="/assets/js/19.b3ea32f7.js"><link rel="prefetch" href="/assets/js/20.224e5e2e.js"><link rel="prefetch" href="/assets/js/21.8021b092.js"><link rel="prefetch" href="/assets/js/22.c81248e6.js"><link rel="prefetch" href="/assets/js/23.c08137b3.js"><link rel="prefetch" href="/assets/js/24.fadb2dba.js"><link rel="prefetch" href="/assets/js/25.9a70dbcd.js"><link rel="prefetch" href="/assets/js/26.e9c7ecd2.js"><link rel="prefetch" href="/assets/js/28.501aef18.js"><link rel="prefetch" href="/assets/js/29.fb4ba11a.js"><link rel="prefetch" href="/assets/js/3.0ff98c8e.js"><link rel="prefetch" href="/assets/js/30.48e7ea09.js"><link rel="prefetch" href="/assets/js/31.f8ff4f61.js"><link rel="prefetch" href="/assets/js/32.a2c9ce27.js"><link rel="prefetch" href="/assets/js/33.cdb2a6cc.js"><link rel="prefetch" href="/assets/js/34.d20b2549.js"><link rel="prefetch" href="/assets/js/35.ac60d51b.js"><link rel="prefetch" href="/assets/js/36.597280ad.js"><link rel="prefetch" href="/assets/js/37.e24918ef.js"><link rel="prefetch" href="/assets/js/38.61fe72f0.js"><link rel="prefetch" href="/assets/js/39.4e9f701e.js"><link rel="prefetch" href="/assets/js/40.8991c886.js"><link rel="prefetch" href="/assets/js/41.5f886f32.js"><link rel="prefetch" href="/assets/js/42.8f7573b5.js"><link rel="prefetch" href="/assets/js/43.c4c87c52.js"><link rel="prefetch" href="/assets/js/44.a1bcf2e4.js"><link rel="prefetch" href="/assets/js/45.46920807.js"><link rel="prefetch" href="/assets/js/46.a1909cc6.js"><link rel="prefetch" href="/assets/js/47.cd2779ee.js"><link rel="prefetch" href="/assets/js/48.b7642c54.js"><link rel="prefetch" href="/assets/js/49.f48ba757.js"><link rel="prefetch" href="/assets/js/5.8bf31079.js"><link rel="prefetch" href="/assets/js/50.68c0e51e.js"><link rel="prefetch" href="/assets/js/51.9cc81fe0.js"><link rel="prefetch" href="/assets/js/52.0c69a83a.js"><link rel="prefetch" href="/assets/js/53.a37e679b.js"><link rel="prefetch" href="/assets/js/54.29de196a.js"><link rel="prefetch" href="/assets/js/55.9df7af98.js"><link rel="prefetch" href="/assets/js/56.e022d95e.js"><link rel="prefetch" href="/assets/js/57.6d62e2d7.js"><link rel="prefetch" href="/assets/js/58.b74c2ea8.js"><link rel="prefetch" href="/assets/js/59.1d64074e.js"><link rel="prefetch" href="/assets/js/6.6ffd2931.js"><link rel="prefetch" href="/assets/js/60.6e99f375.js"><link rel="prefetch" href="/assets/js/61.624bb6b3.js"><link rel="prefetch" href="/assets/js/62.17c0af89.js"><link rel="prefetch" href="/assets/js/63.055ed0e3.js"><link rel="prefetch" href="/assets/js/64.4793156c.js"><link rel="prefetch" href="/assets/js/65.315ed07a.js"><link rel="prefetch" href="/assets/js/66.aa219bd4.js"><link rel="prefetch" href="/assets/js/67.d45a645f.js"><link rel="prefetch" href="/assets/js/68.02f28870.js"><link rel="prefetch" href="/assets/js/69.9348b724.js"><link rel="prefetch" href="/assets/js/7.ab9876e7.js"><link rel="prefetch" href="/assets/js/70.cb43f30c.js"><link rel="prefetch" href="/assets/js/71.f38fdc1c.js"><link rel="prefetch" href="/assets/js/72.c2d67b31.js"><link rel="prefetch" href="/assets/js/73.b85de438.js"><link rel="prefetch" href="/assets/js/74.8817c5e1.js"><link rel="prefetch" href="/assets/js/75.0268c6fe.js"><link rel="prefetch" href="/assets/js/76.09aa7208.js"><link rel="prefetch" href="/assets/js/77.14e28640.js"><link rel="prefetch" href="/assets/js/78.477768a3.js"><link rel="prefetch" href="/assets/js/79.11dfc448.js"><link rel="prefetch" href="/assets/js/8.b060aacc.js"><link rel="prefetch" href="/assets/js/80.52a887a8.js"><link rel="prefetch" href="/assets/js/81.6e6a700a.js"><link rel="prefetch" href="/assets/js/82.592f2bdd.js"><link rel="prefetch" href="/assets/js/83.63bd35e7.js"><link rel="prefetch" href="/assets/js/84.1a558c8a.js"><link rel="prefetch" href="/assets/js/85.038b89d7.js"><link rel="prefetch" href="/assets/js/86.42bb5e7f.js"><link rel="prefetch" href="/assets/js/87.7fe28c1f.js"><link rel="prefetch" href="/assets/js/88.adb1ccb1.js"><link rel="prefetch" href="/assets/js/89.a9098918.js"><link rel="prefetch" href="/assets/js/9.6c78d3d8.js"><link rel="prefetch" href="/assets/js/90.609277d9.js"><link rel="prefetch" href="/assets/js/91.af413178.js"><link rel="prefetch" href="/assets/js/92.24d6e0f0.js"><link rel="prefetch" href="/assets/js/93.904fb076.js"><link rel="prefetch" href="/assets/js/94.d100949e.js"><link rel="prefetch" href="/assets/js/95.afcb0cb7.js"><link rel="prefetch" href="/assets/js/96.1498a675.js"><link rel="prefetch" href="/assets/js/97.88b96afc.js"><link rel="prefetch" href="/assets/js/98.7ab86e6b.js"><link rel="prefetch" href="/assets/js/99.e87ed470.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2038d0e5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>初冬十月的笔记</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>初冬十月的笔记努力加载中~~</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>maiaimei</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2025
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="初冬十月的笔记" class="logo"> <span class="site-name">初冬十月的笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/数据结构/" class="nav-link"><i class="undefined"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/categories/DevOps/" class="nav-link"><i class="undefined"></i>
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端开发/" class="nav-link"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/categories/操作系统/" class="nav-link"><i class="undefined"></i>
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/中间件/" class="nav-link"><i class="undefined"></i>
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/测试框架/" class="nav-link"><i class="undefined"></i>
  测试框架
</a></li><li class="dropdown-item"><!----> <a href="/categories/Tool/" class="nav-link"><i class="undefined"></i>
  Tool
</a></li><li class="dropdown-item"><!----> <a href="/categories/加密算法/" class="nav-link"><i class="undefined"></i>
  加密算法
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机术语/" class="nav-link"><i class="undefined"></i>
  计算机术语
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mail server/" class="nav-link"><i class="undefined"></i>
  Mail server
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    maiaimei
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>91</h3> <h6 data-v-828910c6>文章</h6></div> <div data-v-828910c6><h3 data-v-828910c6>54</h3> <h6 data-v-828910c6>标签</h6></div></div> <ul class="social-links" data-v-828910c6><li class="social-item" data-v-828910c6><i class="iconfont reco-github" style="color:#f8b26a;" data-v-828910c6></i></li><li class="social-item" data-v-828910c6><i class="iconfont reco-mayun" style="color:#f26d6d;" data-v-828910c6></i></li></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/数据结构/" class="nav-link"><i class="undefined"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/categories/DevOps/" class="nav-link"><i class="undefined"></i>
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端开发/" class="nav-link"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/categories/操作系统/" class="nav-link"><i class="undefined"></i>
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/中间件/" class="nav-link"><i class="undefined"></i>
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/测试框架/" class="nav-link"><i class="undefined"></i>
  测试框架
</a></li><li class="dropdown-item"><!----> <a href="/categories/Tool/" class="nav-link"><i class="undefined"></i>
  Tool
</a></li><li class="dropdown-item"><!----> <a href="/categories/加密算法/" class="nav-link"><i class="undefined"></i>
  加密算法
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机术语/" class="nav-link"><i class="undefined"></i>
  计算机术语
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mail server/" class="nav-link"><i class="undefined"></i>
  Mail server
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>我的笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/java/ant-style-path-pattern" class="sidebar-heading clickable"><span>Java</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/python" class="sidebar-heading clickable"><span>Python</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/spring/async-task" class="sidebar-heading clickable"><span>Spring</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/linux/command" class="sidebar-heading clickable open"><span>Linux</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/category/linux/command.html" class="sidebar-link">Linux学习笔记</a></li><li><a href="/category/linux/cp.html" class="sidebar-link">cp/rcp/scp</a></li><li><a href="/category/linux/file-management.html" class="sidebar-link">文件管理</a></li><li><a href="/category/linux/ftp.html" class="sidebar-link">FTP/TFTP/FTPS/SFTP学习笔记</a></li><li><a href="/category/linux/get-started.html" class="sidebar-link">Linux入门</a></li><li><a href="/category/linux/ln.html" class="sidebar-link">硬链接和软连接</a></li><li><a href="/category/linux/package-manager.html" class="sidebar-link">Linux软件安装</a></li><li><a href="/category/linux/shell.html" class="sidebar-link">Shell学习笔记</a></li><li><a href="/category/linux/ssh.html" aria-current="page" class="active sidebar-link">SSH学习笔记</a></li><li><a href="/category/linux/user-and-group.html" class="sidebar-link">用户与组管理</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/devops/aliyun_docker_nginx" class="sidebar-heading clickable"><span>DevOps</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/oracle/get-started" class="sidebar-heading clickable"><span>Oracle</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/tool/PlantUML" class="sidebar-heading clickable"><span>Tool</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/middleware" class="sidebar-heading clickable"><span>中间件</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/database" class="sidebar-heading clickable"><span>数据库</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/data-structure" class="sidebar-heading clickable"><span>数据结构</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/design-pattern" class="sidebar-heading clickable"><span>设计模式</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/testing-frameworks" class="sidebar-heading clickable"><span>测试框架</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/front-end-development" class="sidebar-heading clickable"><span>前端开发</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/wiki" class="sidebar-heading clickable"><span>知识中心</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>SSH学习笔记</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>maiaimei</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2025
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">SSH学习笔记</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>maiaimei</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2024/6/29</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>Linux</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="ssh-简介"><a href="#ssh-简介" class="header-anchor">#</a> SSH 简介</h2> <p>SSH（Secure Shell）是一种能够以安全方式提供远程登录的协议，也是目前远程管理Linux系统的首选方式。</p> <p><a href="https://www.openssh.com/" target="_blank" rel="noopener noreferrer">OpenSSH<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是 SSH 协议的免费开源实现。</p> <p>OpenSSH is the premier connectivity tool for remote login with the SSH protocol. It encrypts all traffic to eliminate eavesdropping, connection hijacking, and other attacks. In addition, OpenSSH provides a large suite of secure tunneling capabilities, several authentication methods, and sophisticated configuration options.</p> <p>The OpenSSH suite consists of the following tools:</p> <ul><li>Remote operations are done using <a href="https://man.openbsd.org/ssh.1" target="_blank" rel="noopener noreferrer">ssh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://man.openbsd.org/scp.1" target="_blank" rel="noopener noreferrer">scp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and <a href="https://man.openbsd.org/sftp.1" target="_blank" rel="noopener noreferrer">sftp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Key management with <a href="https://man.openbsd.org/ssh-add.1" target="_blank" rel="noopener noreferrer">ssh-add<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://man.openbsd.org/ssh-keysign.8" target="_blank" rel="noopener noreferrer">ssh-keysign<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://man.openbsd.org/ssh-keyscan.1" target="_blank" rel="noopener noreferrer">ssh-keyscan<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and <a href="https://man.openbsd.org/ssh-keygen.1" target="_blank" rel="noopener noreferrer">ssh-keygen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>The service side consists of <a href="https://man.openbsd.org/sshd.8" target="_blank" rel="noopener noreferrer">sshd<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://man.openbsd.org/sftp-server.8" target="_blank" rel="noopener noreferrer">sftp-server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and <a href="https://man.openbsd.org/ssh-agent.1" target="_blank" rel="noopener noreferrer">ssh-agent<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul> <h2 id="ssh-环境搭建"><a href="#ssh-环境搭建" class="header-anchor">#</a> SSH 环境搭建</h2> <p>查看系统是否已经安装OpenSSH：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 检查系统上是否存在sshd进程</span>
<span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> sshd

<span class="token comment"># 检查系统是否安装了OpenSSH客户端，如果SSH客户端已安装并正确配置，它将显示路径：/usr/bin/ssh</span>
<span class="token function">which</span> <span class="token function">ssh</span>

<span class="token comment"># 检查系统是否安装了OpenSSH</span>
<span class="token function">rpm</span> -qa <span class="token operator">|</span> <span class="token function">grep</span> openssh
<span class="token comment"># 检查系统是否安装了OpenSSH服务端</span>
<span class="token function">rpm</span> -qa <span class="token operator">|</span> <span class="token function">grep</span> openssh-server
<span class="token comment"># 检查系统是否安装了OpenSSH客户端</span>
<span class="token function">rpm</span> -qa <span class="token operator">|</span> <span class="token function">grep</span> openssh-clients

<span class="token comment"># 查看版本</span>
<span class="token function">ssh</span> -V
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>如果在一台Linux主机上通过ssh命令登录另一台主机，需要安装SSH的客户端，这在最小化系统中并不默认安装，所以需要手动更新安装。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum <span class="token function">install</span> openssh-clients -y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>被登录的主机，需要安装SSH的服务端，可以按照以下步骤进行操作：</p> <ol><li><p>安装OpenSSH软件包（通常在Linux系统中已经默认安装）。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum <span class="token function">install</span> openssh-server -y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>打开SSH服务的配置文件，该文件位于/etc/ssh/sshd_config目录下，名为&quot;sshd_config&quot;。sshd_config 是 SSH 守护程序（sshd）的配置文件，用于定义 SSH 服务器的行为。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 从根目录开始递归搜索所有目录，查找名为 sshd_config 的文件</span>
<span class="token function">find</span> / -name sshd_config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>使用编辑器（比如vi或nano）打开sshd_config文件并修改相关设置。</p></li> <li><p>常见的配置选项：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># 指定SSH连接所使用的端口号，默认为22</span>
<span class="token attr-name">Port</span> <span class="token attr-value">22</span>

<span class="token comment"># 允许root用户登录</span>
<span class="token attr-name">PermitRootLogin</span> <span class="token attr-value">yes</span>

<span class="token comment"># 启用密码认证</span>
<span class="token attr-name">PasswordAuthentication</span> <span class="token attr-value">yes</span>

<span class="token comment"># 启用公钥认证</span>
<span class="token attr-name">PubkeyAuthentication</span> <span class="token attr-value">yes</span>
<span class="token comment"># 公钥认证文件</span>
<span class="token attr-name">AuthorizedKeysFile</span> <span class="token attr-value">.ssh/authorized_keys</span>

<span class="token comment"># 启用RSA认证</span>
<span class="token attr-name">RSAAuthentication</span> <span class="token attr-value">yes</span>

<span class="token comment"># Match配置：</span>
<span class="token comment"># https://www.cnblogs.com/joshua317/p/14148694.html</span>
<span class="token comment"># https://segmentfault.com/a/1190000014822400</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li> <li><p>保存并关闭sshd_config文件。</p></li> <li><p>重新启动SSH服务。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看SSH服务运行状态</span>
systemctl status sshd.service
<span class="token comment"># 启动SSH服务</span>
systemctl start sshd.service
<span class="token comment"># 停止SSH服务</span>
systemctl stop sshd.service
<span class="token comment"># 重启SSH服务</span>
systemctl restart sshd.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h3 id="远程登录命令"><a href="#远程登录命令" class="header-anchor">#</a> 远程登录命令</h3> <p>远程登录命令格式：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">ssh</span> 用户名@主机地址
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>远程登录可以使用密码登录和无密码登录（公钥登录）。</p> <h3 id="使用密码登录"><a href="#使用密码登录" class="header-anchor">#</a> 使用密码登录</h3> <p>使用密码登录远程主机：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost0132 ~<span class="token punctuation">]</span><span class="token comment"># ssh root@192.168.1.31</span>
The authenticity of <span class="token function">host</span> <span class="token string">'192.168.1.31 (192.168.1.31)'</span> can<span class="token string">'t be established.
ECDSA key fingerprint is SHA256:NLUDWgWXkB6X0A2032EYKLX2kIOHTutiRnhPE8ik3Jg.
ECDSA key fingerprint is MD5:c6:72:64:93:07:2d:b5:fd:d5:2b:5e:31:c7:03:da:16.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '</span><span class="token number">192.168</span>.1.31<span class="token string">' (ECDSA) to the list of known hosts.
root@192.168.1.31'</span>s password: 
Last login: Sun Jun <span class="token number">23</span> <span class="token number">12</span>:43:22 <span class="token number">2024</span> from <span class="token number">192.168</span>.1.102
<span class="token punctuation">[</span>root@localhost0131 ~<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="使用公钥登录"><a href="#使用公钥登录" class="header-anchor">#</a> 使用公钥登录</h3> <p>SSH 公钥登录的原理涉及到公钥和私钥的生成以及使用。SSH 公钥登录的过程如下：</p> <ul><li><p>用户生成一对公钥和私钥。</p></li> <li><p>用户将自己的公钥添加到远程服务器的~/.ssh/authorized_keys文件中。</p></li> <li><p>用户尝试通过SSH登录远程服务器时，服务器收到用户的公钥请求。</p></li> <li><p>服务器检查~/.ssh/authorized_keys文件中是否有用户提供的公钥，如果有，则生成一个随机字符串，并使用用户的公钥加密。</p></li> <li><p>服务器将加密的字符串发送给用户。</p></li> <li><p>用户接收到加密字符串后，使用自己的私钥解密，然后将解密后的字符串发送回服务器。</p></li> <li><p>服务器验证解密后的字符串与原始字符串匹配，如果匹配，则授权用户登录。</p></li></ul> <p><img src="/assets/img/20240623141828.6fc4adcb.jpg" alt=""></p> <p><strong>从A登录到B和C，需要在A上生成密钥对，把A的公钥复制到B和C上，就可以实现A免密登录B和C。命令主要是：</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> ~
<span class="token function">ls</span> -al

<span class="token comment"># 如果 ~/.ssh 不存在，创建 .ssh 并设置文件夹权限为700</span>
<span class="token function">mkdir</span> .ssh
<span class="token function">chmod</span> <span class="token number">700</span> ~/.ssh

<span class="token comment"># 生成密钥对</span>
ssh-keygen -t rsa -b <span class="token number">4096</span>

<span class="token comment"># 将公钥上传到远程服务器。</span>
<span class="token comment"># 原理是把当前登录用户的 ~/.ssh/id_rsa.pub 追加到要访问的远程服务器的 ~/.ssh/authorized_kes 文件中。</span>
<span class="token comment"># ssh-copy-id user@remote_server</span>

<span class="token comment"># 如果远程服务器的 ~/.ssh/authorized_kes 不存在，需要先创建并设置文件夹权限为600</span>
<span class="token function">touch</span> authorized_keys
<span class="token function">chmod</span> <span class="token number">600</span> ~/.ssh/authorized_keys

<span class="token comment"># 公钥登录远程服务器</span>
<span class="token function">ssh</span> user@remote_server

<span class="token comment"># 公钥登录远程服务器，-i或--identity-file 指定私钥路径</span>
<span class="token function">ssh</span> -i /path/to/your/private_key user@remote_server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="ssh-生成密钥对"><a href="#ssh-生成密钥对" class="header-anchor">#</a> SSH 生成密钥对</h2> <p><a href="https://www.ssh.com/academy/ssh/keygen" target="_blank" rel="noopener noreferrer">ssh-keygen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a tool for creating new authentication key pairs for SSH. Such key pairs are used for automating logins, single sign-on, and for authenticating hosts.</p> <p>The simplest way to generate a key pair is to run <code>ssh-keygen</code> without arguments.</p> <p>First, the tool asked where to save the file. SSH keys for user authentication are usually stored in the user's <code>.ssh</code> directory under the home directory. However, in enterprise environments, the location is often different. The default key file name depends on the algorithm, in this case <code>id_rsa</code> when using the default RSA algorithm. It could also be, for example, <code>id_dsa</code> or <code>id_ecdsa</code>.</p> <p>Then it asks to enter a <a href="https://www.ssh.com/ssh/passphrase" target="_blank" rel="noopener noreferrer">passphrase<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The passphrase is used for encrypting the key, so that it cannot be used even if someone obtains the private key file. The passphrase should be cryptographically strong. Our <a href="https://www.ssh.com/iam/password/generator" target="_blank" rel="noopener noreferrer">online random password generator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is one possible tool for generating strong passphrases.</p> <p>SSH supports several public key algorithms for authentication keys. These include:</p> <ul><li><code>rsa</code> - an old algorithm based on the difficulty of factoring large numbers. A key size of at least 2048 bits is recommended for RSA; 4096 bits is better. RSA is getting old and significant advances are being made in factoring. Choosing a different algorithm may be advisable. It is quite possible the RSA algorithm will become practically breakable in the foreseeable future. All SSH clients support this algorithm.</li> <li><code>dsa</code> - an old US government Digital Signature Algorithm. It is based on the difficulty of computing discrete logarithms. A key size of 1024 would normally be used with it. DSA in its original form is no longer recommended.</li> <li><code>ecdsa</code> - a new Digital Signature Algorithm standarized by the US government, using elliptic curves. This is probably a good algorithm for current applications. Only three key sizes are supported: 256, 384, and 521 (sic!) bits. We would recommend always using it with 521 bits, since the keys are still small and probably more secure than the smaller keys (even though they should be safe as well). Most SSH clients now support this algorithm.</li> <li><code>ed25519</code> - this is a new algorithm added in OpenSSH. Support for it in clients is not yet universal. Thus its use in general purpose applications may not yet be advisable.</li></ul> <p>The algorithm is selected using the <code>-t</code> option and key size using the <code>-b</code> option. The following commands illustrate:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ssh-keygen -t rsa -b <span class="token number">4096</span>
ssh-keygen -t dsa 
ssh-keygen -t ecdsa -b <span class="token number">521</span>
ssh-keygen -t ed25519
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Normally, the tool prompts for the file in which to store the key. However, it can also be specified on the command line using the <code>-f &lt;filename&gt;</code> option.</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ssh-keygen -f ~/tatu-key-ecdsa -t ecdsa -b <span class="token number">521</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>To use public key authentication, the public key must be copied to a server and installed in an <a href="https://www.ssh.com/ssh/authorized_keys" target="_blank" rel="noopener noreferrer">authorized_keys<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> file. This can be conveniently done using the <a href="https://www.ssh.com/ssh/copy-id" target="_blank" rel="noopener noreferrer">ssh-copy-id<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> tool. Like this:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ssh-copy-id -i ~/.ssh/tatu-key-ecdsa user@host
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Once the public key has been configured on the server, the server will allow any connecting user that has the private key to log in. During the login process, the client proves possession of the private key by digitally signing the key exchange.</p> <p>Here's a summary of commonly used options to the keygen tool:</p> <p><strong>-b</strong> “Bits” This option specifies the number of bits in the key. The regulations that govern the use case for SSH may require a specific key length to be used. In general, 2048 bits is considered to be sufficient for RSA keys.</p> <p><strong>-e</strong> “Export” This option allows reformatting of existing keys between the OpenSSH key file format and the format documented in <a href="https://tools.ietf.org/html/rfc4716" target="_blank" rel="noopener noreferrer">RFC 4716<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, “SSH Public Key File Format”.</p> <p><strong>-p</strong> “Change the passphrase” This option allows changing the passphrase of a private key file with <code>**[-P old_passphrase]**</code> and <code>**[-N new_passphrase]**</code>, <code>**[-f keyfile]**</code>.</p> <p><strong>-t</strong> “Type” This option specifies the type of key to be created. Commonly used values are: <strong>- rsa</strong> for <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)" target="_blank" rel="noopener noreferrer">RSA<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> keys <strong>- dsa</strong> for <a href="https://en.wikipedia.org/wiki/Digital_Signature_Algorithm" target="_blank" rel="noopener noreferrer">DSA<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> keys <strong>- ecdsa</strong> for <a href="https://en.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm" target="_blank" rel="noopener noreferrer">elliptic curve DSA<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> keys</p> <p><strong>-i</strong> &quot;Input&quot; When <em>ssh-keygen</em> is required to access an existing key, this option designates the file.</p> <p><strong>-f</strong> &quot;File&quot; Specifies name of the file in which to store the created key.</p> <p><strong>-N</strong> &quot;New&quot; Provides a new passphrase for the key.</p> <p><strong>-P</strong> &quot;Passphrase&quot; Provides the (old) passphrase when reading a key.</p> <p><strong>-c</strong> &quot;Comment&quot; Changes the comment for a keyfile.</p> <p><strong>-p</strong> Change the passphrase of a private key file.</p> <p><strong>-q</strong> Silence ssh-keygen.</p> <p><strong>-v</strong> Verbose mode.</p> <p><strong>-l</strong> &quot;Fingerprint&quot; Print the fingerprint of the specified public key.</p> <p><strong>-B</strong> &quot;Bubble babble&quot; Shows a &quot;bubble babble&quot; (Tectia format) fingerprint of a keyfile.</p> <p><strong>-F</strong> Search for a specified hostname in a known_hosts file.</p> <p><strong>-R</strong> Remove all keys belonging to a hostname from a known_hosts file.</p> <p><strong>-y</strong> Read a private OpenSSH format file and print an OpenSSH public key to stdout.</p> <p>This only listed the most commonly used options. For full usage, including the more exotic and special-purpose options, use the <code>man ssh-keygen</code> command.</p> <h2 id="sftp-服务器搭建"><a href="#sftp-服务器搭建" class="header-anchor">#</a> SFTP 服务器搭建</h2> <p>SFTP（Secure File Transfer Protocol ）是一个可以为文件进行安全传输的网络协议。</p> <p><img src="/assets/img/20240621232903.e7edab1d.png" alt=""></p> <p>SFTP和FTP的区别</p> <ul><li>链接方式：FTP 使用 TCP 端口21建立连接。SFTP 是在客户端和服务器之间通过SSH协议(TCP端口22)建立的安全连接来传输文件。</li> <li>安全性：SFTP 使用加密传输认证信息和传输的数据，使用 SFTP 相对于 FTP 安全</li> <li>效率：SFTP 使用加密解密技术，传输效率比普通的 FTP 要低得多。</li></ul> <h3 id="创建sftp用户与组"><a href="#创建sftp用户与组" class="header-anchor">#</a> 创建SFTP用户与组</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">groupadd</span> javgrp
<span class="token function">usermod</span> -G javgrp root
<span class="token function">useradd</span> -G javgrp -m -d /home/javadm -s /bin/bash javadm
<span class="token function">useradd</span> -G javgrp -m -d /home/appadm -s /bin/bash appadm
<span class="token function">mkdir</span> -p /appl/sftp-staging/jd/inbound
<span class="token function">chown</span> -R javadm:javgrp /appl/sftp-staging
<span class="token function">chmod</span> <span class="token number">750</span> /appl/sftp-staging
<span class="token function">chmod</span> <span class="token number">750</span> /appl/sftp-staging/jd
<span class="token function">chmod</span> <span class="token number">770</span> /appl/sftp-staging/jd/inbound
<span class="token function">ln</span> -s /appl/sftp-staging/jd /home/appadm/jd
<span class="token function">mkdir</span> -p /home/appadm/.ssh
<span class="token function">chown</span> appadm:javgrp /home/appadm/.ssh
<span class="token function">chmod</span> <span class="token number">750</span> /home/appadm/.ssh
<span class="token function">touch</span> /home/appadm/.ssh/authorized_keys
<span class="token function">chown</span> appadm:javgrp /home/appadm/.ssh/authorized_keys
<span class="token function">chmod</span> <span class="token number">750</span> /home/appadm/.ssh/authorized_keys
<span class="token function">vim</span> /home/appadm/.ssh/authorized_keys
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="配置sshd-config"><a href="#配置sshd-config" class="header-anchor">#</a> 配置sshd_config</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">vim</span> /etc/ssh/sshd_config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>#Subsystem       sftp    /usr/libexec/openssh/sftp-server
#Subsystem sftp /usr/lib/openssh/sftp-server
#Subsystem sftp internal-sft 	 # 指定使用sftp服务使用系统自带的internal-sftp
#Match Group sftpgroup           # 匹配sftp组的用户，若要匹配多个组，可用逗号分开
#X11Forwarding no                # 禁止用户使用端口转发
#AllowTcpForwarding no           # 禁止用户使用端口转发 
#ChrootDirectory /home/sftp/%u   # 限制用户的根目录
#ForceCommand internal-sftp      # 只能用于sftp登录
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>sftp-server和internal-sftp都是OpenSSH的一部分。</p> <p>sftp-server是一个独立的二进制文件。</p> <p>internal-sftp是一个配置关键字，无需外部二进制文件额外启动一个进程，整合在sshd进程内了。</p> <p>internal-sftp相较于 /usr/lib/openssh/sftp-server 优点在于：</p> <ol><li>性能好，无需额外进程；</li> <li>安全性好，无需用户登录shell，且可使用ChrootDirectory 限制sftp行为活动的目录；</li> <li>sftp-server 的存在主要是向后兼容。</li></ol> <h3 id="连通性测试"><a href="#连通性测试" class="header-anchor">#</a> 连通性测试</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sftp</span> -oPort<span class="token operator">=</span><span class="token number">22</span> sftpusr@192.168.1.31
put /opt/foo.txt /home/sftpusr/sftp-staging/tms/inbound
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/category/linux/shell.html" class="prev">
            Shell学习笔记
          </a></span> <span class="next"><a href="/category/linux/user-and-group.html">
            用户与组管理
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/category/linux/ssh.html#ssh-简介" class="sidebar-link reco-side-ssh-简介" data-v-70334359>SSH 简介</a></li><li class="level-2" data-v-70334359><a href="/category/linux/ssh.html#ssh-环境搭建" class="sidebar-link reco-side-ssh-环境搭建" data-v-70334359>SSH 环境搭建</a></li><li class="level-3" data-v-70334359><a href="/category/linux/ssh.html#远程登录命令" class="sidebar-link reco-side-远程登录命令" data-v-70334359>远程登录命令</a></li><li class="level-3" data-v-70334359><a href="/category/linux/ssh.html#使用密码登录" class="sidebar-link reco-side-使用密码登录" data-v-70334359>使用密码登录</a></li><li class="level-3" data-v-70334359><a href="/category/linux/ssh.html#使用公钥登录" class="sidebar-link reco-side-使用公钥登录" data-v-70334359>使用公钥登录</a></li><li class="level-2" data-v-70334359><a href="/category/linux/ssh.html#ssh-生成密钥对" class="sidebar-link reco-side-ssh-生成密钥对" data-v-70334359>SSH 生成密钥对</a></li><li class="level-2" data-v-70334359><a href="/category/linux/ssh.html#sftp-服务器搭建" class="sidebar-link reco-side-sftp-服务器搭建" data-v-70334359>SFTP 服务器搭建</a></li><li class="level-3" data-v-70334359><a href="/category/linux/ssh.html#创建sftp用户与组" class="sidebar-link reco-side-创建sftp用户与组" data-v-70334359>创建SFTP用户与组</a></li><li class="level-3" data-v-70334359><a href="/category/linux/ssh.html#配置sshd-config" class="sidebar-link reco-side-配置sshd-config" data-v-70334359>配置sshd_config</a></li><li class="level-3" data-v-70334359><a href="/category/linux/ssh.html#连通性测试" class="sidebar-link reco-side-连通性测试" data-v-70334359>连通性测试</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.a8f1b8c2.js" defer></script><script src="/assets/js/4.3ce32107.js" defer></script><script src="/assets/js/1.f767751f.js" defer></script><script src="/assets/js/27.0e20a0f9.js" defer></script>
  </body>
</html>
