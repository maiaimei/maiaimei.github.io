<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ansible学习笔记 | 初冬十月的笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <script>
		       var _hmt = _hmt || [];
		       (function() {
		         var hm = document.createElement("script");
		         hm.src = "https://hm.baidu.com/hm.js?ea067d5ff639c55d3843c3f224a1c187";
		         var s = document.getElementsByTagName("script")[0]; 
		         s.parentNode.insertBefore(hm, s);
		       })();
		         </script>
    <meta name="description" content="初冬十月的笔记努力加载中~~">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="keywords" content="初冬十月,maiaimei,maiamy,maiam">
    
    <link rel="preload" href="/assets/css/0.styles.2038d0e5.css" as="style"><link rel="preload" href="/assets/js/app.da2f41f8.js" as="script"><link rel="preload" href="/assets/js/4.d7bde999.js" as="script"><link rel="preload" href="/assets/js/1.f767751f.js" as="script"><link rel="preload" href="/assets/js/17.0c856ead.js" as="script"><link rel="prefetch" href="/assets/js/10.d143a5e9.js"><link rel="prefetch" href="/assets/js/100.81f36f51.js"><link rel="prefetch" href="/assets/js/11.f2e91151.js"><link rel="prefetch" href="/assets/js/12.7d01dce2.js"><link rel="prefetch" href="/assets/js/13.91a17e12.js"><link rel="prefetch" href="/assets/js/14.dac12ba3.js"><link rel="prefetch" href="/assets/js/15.5ce51a44.js"><link rel="prefetch" href="/assets/js/16.49f2ff3b.js"><link rel="prefetch" href="/assets/js/18.f5da1616.js"><link rel="prefetch" href="/assets/js/19.4fefe633.js"><link rel="prefetch" href="/assets/js/20.8fec1474.js"><link rel="prefetch" href="/assets/js/21.f79c9937.js"><link rel="prefetch" href="/assets/js/22.50b5820b.js"><link rel="prefetch" href="/assets/js/23.468882ef.js"><link rel="prefetch" href="/assets/js/24.b942eded.js"><link rel="prefetch" href="/assets/js/25.347aac7c.js"><link rel="prefetch" href="/assets/js/26.ef240476.js"><link rel="prefetch" href="/assets/js/27.66233a16.js"><link rel="prefetch" href="/assets/js/28.d9ec0ac4.js"><link rel="prefetch" href="/assets/js/29.737ec816.js"><link rel="prefetch" href="/assets/js/3.2572b1ea.js"><link rel="prefetch" href="/assets/js/30.76f67659.js"><link rel="prefetch" href="/assets/js/31.a79758fe.js"><link rel="prefetch" href="/assets/js/32.36c32478.js"><link rel="prefetch" href="/assets/js/33.ba6d3d34.js"><link rel="prefetch" href="/assets/js/34.58a7ca38.js"><link rel="prefetch" href="/assets/js/35.ac60d51b.js"><link rel="prefetch" href="/assets/js/36.f0cdac4b.js"><link rel="prefetch" href="/assets/js/37.f5e2eafb.js"><link rel="prefetch" href="/assets/js/38.b1dc714b.js"><link rel="prefetch" href="/assets/js/39.b235fda4.js"><link rel="prefetch" href="/assets/js/40.49781697.js"><link rel="prefetch" href="/assets/js/41.09d06fd1.js"><link rel="prefetch" href="/assets/js/42.1b47cebe.js"><link rel="prefetch" href="/assets/js/43.b20e6029.js"><link rel="prefetch" href="/assets/js/44.8463a0ca.js"><link rel="prefetch" href="/assets/js/45.d6769321.js"><link rel="prefetch" href="/assets/js/46.67e20f95.js"><link rel="prefetch" href="/assets/js/47.4233f914.js"><link rel="prefetch" href="/assets/js/48.f5a25246.js"><link rel="prefetch" href="/assets/js/49.28c2077a.js"><link rel="prefetch" href="/assets/js/5.7991753a.js"><link rel="prefetch" href="/assets/js/50.aff0964a.js"><link rel="prefetch" href="/assets/js/51.d3f767f7.js"><link rel="prefetch" href="/assets/js/52.1e637d5f.js"><link rel="prefetch" href="/assets/js/53.789aad6f.js"><link rel="prefetch" href="/assets/js/54.31c8504c.js"><link rel="prefetch" href="/assets/js/55.188ef772.js"><link rel="prefetch" href="/assets/js/56.418e4cb3.js"><link rel="prefetch" href="/assets/js/57.9363bc3a.js"><link rel="prefetch" href="/assets/js/58.c4aecb23.js"><link rel="prefetch" href="/assets/js/59.59d90347.js"><link rel="prefetch" href="/assets/js/6.c7a11ae1.js"><link rel="prefetch" href="/assets/js/60.18ea9ac4.js"><link rel="prefetch" href="/assets/js/61.d6d54b63.js"><link rel="prefetch" href="/assets/js/62.020f8b2f.js"><link rel="prefetch" href="/assets/js/63.1b9f909a.js"><link rel="prefetch" href="/assets/js/64.4420ed6a.js"><link rel="prefetch" href="/assets/js/65.632294a6.js"><link rel="prefetch" href="/assets/js/66.ae672bd9.js"><link rel="prefetch" href="/assets/js/67.ea05d784.js"><link rel="prefetch" href="/assets/js/68.3260dc89.js"><link rel="prefetch" href="/assets/js/69.0afa5c0d.js"><link rel="prefetch" href="/assets/js/7.9028652f.js"><link rel="prefetch" href="/assets/js/70.336edb14.js"><link rel="prefetch" href="/assets/js/71.f1f14695.js"><link rel="prefetch" href="/assets/js/72.316801b0.js"><link rel="prefetch" href="/assets/js/73.c995fd17.js"><link rel="prefetch" href="/assets/js/74.3fbf0f18.js"><link rel="prefetch" href="/assets/js/75.1ba672ca.js"><link rel="prefetch" href="/assets/js/76.38c0d4f3.js"><link rel="prefetch" href="/assets/js/77.97f68f7c.js"><link rel="prefetch" href="/assets/js/78.02c62083.js"><link rel="prefetch" href="/assets/js/79.f38c0f0f.js"><link rel="prefetch" href="/assets/js/8.e7c3eaa3.js"><link rel="prefetch" href="/assets/js/80.3ec015de.js"><link rel="prefetch" href="/assets/js/81.79f844a5.js"><link rel="prefetch" href="/assets/js/82.fade3dd9.js"><link rel="prefetch" href="/assets/js/83.f0aea742.js"><link rel="prefetch" href="/assets/js/84.62a984aa.js"><link rel="prefetch" href="/assets/js/85.1186f3f8.js"><link rel="prefetch" href="/assets/js/86.79be8ea0.js"><link rel="prefetch" href="/assets/js/87.68f938d1.js"><link rel="prefetch" href="/assets/js/88.b102c973.js"><link rel="prefetch" href="/assets/js/89.edc14de5.js"><link rel="prefetch" href="/assets/js/9.a8a795d2.js"><link rel="prefetch" href="/assets/js/90.ebe3648f.js"><link rel="prefetch" href="/assets/js/91.20641b5b.js"><link rel="prefetch" href="/assets/js/92.95580e7f.js"><link rel="prefetch" href="/assets/js/93.25a1a004.js"><link rel="prefetch" href="/assets/js/94.c7ba6148.js"><link rel="prefetch" href="/assets/js/95.5e70c495.js"><link rel="prefetch" href="/assets/js/96.9c93c4da.js"><link rel="prefetch" href="/assets/js/97.ada6025c.js"><link rel="prefetch" href="/assets/js/98.f6a41e12.js"><link rel="prefetch" href="/assets/js/99.eab771ac.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2038d0e5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>初冬十月的笔记</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>初冬十月的笔记努力加载中~~</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>maiaimei</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2025
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="初冬十月的笔记" class="logo"> <span class="site-name">初冬十月的笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/数据结构/" class="nav-link"><i class="undefined"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/categories/DevOps/" class="nav-link"><i class="undefined"></i>
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端开发/" class="nav-link"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/categories/操作系统/" class="nav-link"><i class="undefined"></i>
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/中间件/" class="nav-link"><i class="undefined"></i>
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/categories/测试框架/" class="nav-link"><i class="undefined"></i>
  测试框架
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/Tool/" class="nav-link"><i class="undefined"></i>
  Tool
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机术语/" class="nav-link"><i class="undefined"></i>
  计算机术语
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mail server/" class="nav-link"><i class="undefined"></i>
  Mail server
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    maiaimei
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>81</h3> <h6 data-v-828910c6>文章</h6></div> <div data-v-828910c6><h3 data-v-828910c6>51</h3> <h6 data-v-828910c6>标签</h6></div></div> <ul class="social-links" data-v-828910c6><li class="social-item" data-v-828910c6><i class="iconfont reco-github" style="color:#f8b26a;" data-v-828910c6></i></li><li class="social-item" data-v-828910c6><i class="iconfont reco-mayun" style="color:#fb9b5f;" data-v-828910c6></i></li></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/数据结构/" class="nav-link"><i class="undefined"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/设计模式/" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/categories/DevOps/" class="nav-link"><i class="undefined"></i>
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端开发/" class="nav-link"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/categories/操作系统/" class="nav-link"><i class="undefined"></i>
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/中间件/" class="nav-link"><i class="undefined"></i>
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/categories/测试框架/" class="nav-link"><i class="undefined"></i>
  测试框架
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/Tool/" class="nav-link"><i class="undefined"></i>
  Tool
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机术语/" class="nav-link"><i class="undefined"></i>
  计算机术语
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mail server/" class="nav-link"><i class="undefined"></i>
  Mail server
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>我的笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/java/CompletableFuture" class="sidebar-heading clickable"><span>Java</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/python" class="sidebar-heading clickable"><span>Python</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/spring/@ConfigurationProperties" class="sidebar-heading clickable"><span>Spring</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/linux/command" class="sidebar-heading clickable"><span>Linux</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/devops/aliyun_docker_nginx" class="sidebar-heading clickable open"><span>DevOps</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/category/devops/aliyun_docker_nginx.html" class="sidebar-link">在阿里云上使用Docker部署静态站点</a></li><li><a href="/category/devops/ansible.html" aria-current="page" class="active sidebar-link">Ansible学习笔记</a></li><li><a href="/category/devops/atguigu_docker.html" class="sidebar-link">尚硅谷_Docker的安装与卸载</a></li><li><a href="/category/devops/atguigu_ShardingSphere5.html" class="sidebar-link">尚硅谷_ShardingSphere5</a></li><li><a href="/category/devops/bat_shell.html" class="sidebar-link">Windows的BAT批处理命令和Linux的Shell命令</a></li><li><a href="/category/devops/docker.html" class="sidebar-link">Docker学习笔记</a></li><li><a href="/category/devops/docker_redis.html" class="sidebar-link">在Docker下安装Redis</a></li><li><a href="/category/devops/git.html" class="sidebar-link">Git学习笔记</a></li><li><a href="/category/devops/gitlab.html" class="sidebar-link">GitLab学习笔记</a></li><li><a href="/category/devops/gradle.html" class="sidebar-link">Gradle学习笔记</a></li><li><a href="/category/devops/idea.html" class="sidebar-link">IDEA基本使用</a></li><li><a href="/category/devops/jdk_source_compile.html" class="sidebar-link">编译JDK17源码</a></li><li><a href="/category/devops/jenkins.html" class="sidebar-link">Jenkins学习笔记</a></li><li><a href="/category/devops/k8s.html" class="sidebar-link">K8S学习笔记</a></li><li><a href="/category/devops/linux_deploy_webapp.html" class="sidebar-link">在Linux上部署JavaWeb应用</a></li><li><a href="/category/devops/maven-surefire-plugin.html" class="sidebar-link">Maven配置JVM参数</a></li><li><a href="/category/devops/maven.html" class="sidebar-link">Maven安装与配置</a></li><li><a href="/category/devops/nodejs.html" class="sidebar-link">Node.js安装与配置</a></li><li><a href="/category/devops/shell.html" class="sidebar-link">Shell学习笔记</a></li><li><a href="/category/devops/shell_files.html" class="sidebar-link">Shell之文件操作</a></li><li><a href="/category/devops/sonar.html" class="sidebar-link">SonarQube学习笔记</a></li><li><a href="/category/devops/tomcat.html" class="sidebar-link">Tomcat安装与配置</a></li><li><a href="/category/devops/typora.html" class="sidebar-link">Typora</a></li><li><a href="/category/devops/vscode.html" class="sidebar-link">Visual Studio Code 使用技巧</a></li><li><a href="/category/devops/windows.html" class="sidebar-link">Windows实用技巧</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/oracle/get-started" class="sidebar-heading clickable"><span>Oracle</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/tool/PlantUML" class="sidebar-heading clickable"><span>Tool</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/middleware" class="sidebar-heading clickable"><span>中间件</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/database" class="sidebar-heading clickable"><span>数据库</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/data-structure" class="sidebar-heading clickable"><span>数据结构</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/design-pattern" class="sidebar-heading clickable"><span>设计模式</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/testing-frameworks" class="sidebar-heading clickable"><span>测试框架</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/front-end-development" class="sidebar-heading clickable"><span>前端开发</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/wiki" class="sidebar-heading clickable"><span>知识中心</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Ansible学习笔记</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>maiaimei</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2025
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Ansible学习笔记</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>maiaimei</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2024/9/2</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>Ansible</span></i></div></div> <div class="theme-reco-content content__default"><p><a href="https://www.ansible.com/" target="_blank" rel="noopener noreferrer">Ansible<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个基于Python开发的自动化运维工具，可以用来配置系统、部署软件和编排其他系统任务。Ansible没有客户端，底层通信依赖于系统软件，Linux系统下基于OpenSSH通信，Windows系统下基于PowerShell，管理端必须是Linux。Ansible通过SSH连接客户端执行任务。</p> <h2 id="ansible的三大组件"><a href="#ansible的三大组件" class="header-anchor">#</a> Ansible的三大组件</h2> <p>Ansible automates the management of remote systems and controls their desired state.</p> <p><img src="/assets/img/20240817100020.c77e2230.jpg" alt=""></p> <p>As shown in the preceding figure, most Ansible environments have three main components:</p> <ul><li><p>Control node</p> <p>A system on which Ansible is installed. You run Ansible commands such as <code>ansible</code> or <code>ansible-inventory</code> on a control node.</p></li> <li><p>Inventory</p> <p>A list of managed nodes that are logically organized. You create an inventory on the control node to describe host deployments to Ansible.</p></li> <li><p>Managed node</p> <p>A remote system, or host, that Ansible controls.</p></li></ul> <h2 id="ansible的安装部署"><a href="#ansible的安装部署" class="header-anchor">#</a> Ansible的安装部署</h2> <h3 id="control-node-requirements"><a href="#control-node-requirements" class="header-anchor">#</a> Control node requirements</h3> <p>For your <em>control</em> node (the machine that runs Ansible), you can use nearly any UNIX-like machine with Python installed. This includes Red Hat, Debian, Ubuntu, macOS, BSDs, and Windows under a <a href="https://docs.microsoft.com/en-us/windows/wsl/about" target="_blank" rel="noopener noreferrer">Windows Subsystem for Linux (WSL) distribution<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Windows without WSL is not natively supported as a control node; see <a href="http://blog.rolpdog.com/2020/03/why-no-ansible-controller-for-windows.html" target="_blank" rel="noopener noreferrer">Matt Davis’ blog post<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more information.</p> <h3 id="managed-node-requirements"><a href="#managed-node-requirements" class="header-anchor">#</a> Managed node requirements</h3> <p>The <em>managed</em> node (the machine that Ansible is managing) does not require Ansible to be installed, but requires Python to run Ansible-generated Python code. The managed node also needs a user account that can connect through SSH to the node with an interactive POSIX shell.</p> <p>以下是在基于Red Hat的系统（如CentOS和Fedora）中使用yum安装Ansible的步骤：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># epel-release的主要用途是提供一个额外的软件源，用于安装那些在官方软件源中不可用或难以找到的软件包。EPEL（Extra Packages for Enterprise Linux）是一个由Fedora社区创建的项目，旨在为RHEL（Red Hat Enterprise Linux）及其衍生版本（如CentOS、Scientific Linux等）提供高质量的软件包。通过安装epel-release软件包，用户实际上是在他们的系统中添加了一个第三方的yum源，这个源提供了比官方rpm仓库更丰富的软件包资源。这在官方源中软件包不足或缺少某些特定软件时非常有用，避免了用户自行编译软件的繁琐过程。</span>
<span class="token comment"># 安装epel-release源后可找到并安装ansible</span>
yum -y <span class="token function">install</span> epel-release
yum -y <span class="token function">install</span> ansible
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>验证安装结果：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ansible --version

<span class="token comment"># https://docs.ansible.com/ansible/2.9/index.html</span>
<span class="token punctuation">[</span>root@localhost0141 ~<span class="token punctuation">]</span><span class="token comment"># ansible --version</span>
ansible <span class="token number">2.9</span>.27
  config <span class="token function">file</span> <span class="token operator">=</span> /etc/ansible/ansible.cfg
  configured module search path <span class="token operator">=</span> <span class="token punctuation">[</span>u<span class="token string">'/root/.ansible/plugins/modules'</span>, u<span class="token string">'/usr/share/ansible/plugins/modules'</span><span class="token punctuation">]</span>
  ansible python module location <span class="token operator">=</span> /usr/lib/python2.7/site-packages/ansible
  executable location <span class="token operator">=</span> /usr/bin/ansible
  python version <span class="token operator">=</span> <span class="token number">2.7</span>.5 <span class="token punctuation">(</span>default, Nov <span class="token number">14</span> <span class="token number">2023</span>, <span class="token number">16</span>:14:06<span class="token punctuation">)</span> <span class="token punctuation">[</span>GCC <span class="token number">4.8</span>.5 <span class="token number">20150623</span> <span class="token punctuation">(</span>Red Hat <span class="token number">4.8</span>.5-44<span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>其他安装方式：<a href="https://docs.ansible.com/ansible/latest/installation_guide/index.html" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/latest/installation_guide/index.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="ansible的目录结构"><a href="#ansible的目录结构" class="header-anchor">#</a> Ansible的目录结构</h2> <p>可以通过以下命令获取ansible所有文件存放目录：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">rpm</span> -ql ansible
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>该命令输出内容较多，大致分为如下几类：</p> <ol><li>配置文件目录 ：/etc/ansible/，主要功能为：Inventory主机信息配置、Ansible工具功能配置等。所有Ansible的配置均存放在该目录下，运维日常的所有配置类操作也均基于此目录进行。</li> <li>执行文件目录 ：/usr/bin/，主要功能为：Ansible系列命令默认存放目录。Ansible所有可执行文件均存放在该目录下。</li> <li>Lib库依赖目录：/usr/lib/pythonX.X/site-packages/ansible/，Ansible所有lib库文件和模块文件也均存放于该目录下。</li> <li>Help文档目录 ：/usr/share/doc/ansible-X.X.X/</li> <li>Man文档目录 ：/usr/share/man/man1/</li></ol> <p><img src="/assets/img/20240818183607.a20fa99f.jpg" alt=""></p> <h2 id="ansible的配置文件"><a href="#ansible的配置文件" class="header-anchor">#</a> Ansible的配置文件</h2> <p><a href="https://docs.ansible.com/ansible/latest/reference_appendices/config.html#ansible-configuration-settings-locations" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/latest/reference_appendices/config.html#ansible-configuration-settings-locations<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Ansible的配置文件是：<code>/etc/ansible/ansible.cfg</code>。</p> <p>ansible.cfg可以存放于多个地方，Ansible读取配置文件的顺序依次是：</p> <ul><li><code>ANSIBLE_CONFIG</code> (environment variable if set)</li> <li><code>ansible.cfg</code> (in the current directory)</li> <li><code>~/.ansible.cfg</code> (in the home directory)</li> <li><code>/etc/ansible/ansible.cfg</code></li></ul> <p>先找到哪个就使用哪个的配置。其ansible.cfg配置的所有内容均可在命令行通过参数的形式传递或定义在Playbooks中。</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment"># config file for ansible -- https://ansible.com/</span>
<span class="token comment"># ===============================================</span>

<span class="token comment"># nearly all parameters can be overridden in ansible-playbook</span>
<span class="token comment"># or with command line flags. ansible will read ANSIBLE_CONFIG,</span>
<span class="token comment"># ansible.cfg in the current working directory, .ansible.cfg in</span>
<span class="token comment"># the home directory or /etc/ansible/ansible.cfg, whichever it</span>
<span class="token comment"># finds first</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">defaults</span><span class="token punctuation">]</span></span>

<span class="token comment"># some basic default values...</span>

<span class="token comment">#inventory      = /etc/ansible/hosts		# 定义Inventory</span>
<span class="token comment">#library        = /usr/share/my_modules/	# 自定义lib库存放目录</span>
<span class="token comment">#module_utils   = /usr/share/my_module_utils/</span>
<span class="token comment">#remote_tmp     = ~/.ansible/tmp	# 临时文件远程主机存放目录</span>
<span class="token comment">#local_tmp      = ~/.ansible/tmp	# 临时文件本地存放目录</span>
<span class="token comment">#plugin_filters_cfg = /etc/ansible/plugin_filters.yml</span>
<span class="token comment">#forks          = 5		# 默认开启的并发数</span>
<span class="token comment">#poll_interval  = 15	# 默认轮询时间间隔</span>
<span class="token comment">#sudo_user      = root	# 默认sudo用户</span>
<span class="token comment">#ask_sudo_pass = True	# 是否需要sudo密码</span>
<span class="token comment">#ask_pass      = True	# 是否需要密码</span>
<span class="token comment">#transport      = smart</span>
<span class="token comment">#remote_port    = 22</span>
<span class="token comment">#module_lang    = C</span>
<span class="token comment">#module_set_locale = False</span>

<span class="token comment"># plays will gather facts by default, which contain information about</span>
<span class="token comment"># the remote system.</span>
<span class="token comment">#</span>
<span class="token comment"># smart - gather by default, but don't regather if already gathered</span>
<span class="token comment"># implicit - gather by default, turn off with gather_facts: False</span>
<span class="token comment"># explicit - do not gather by default, must say gather_facts: True</span>
<span class="token comment">#gathering = implicit</span>

<span class="token comment"># This only affects the gathering done by a play's gather_facts directive,</span>
<span class="token comment"># by default gathering retrieves all facts subsets</span>
<span class="token comment"># all - gather all subsets</span>
<span class="token comment"># network - gather min and network facts</span>
<span class="token comment"># hardware - gather hardware facts (longest facts to retrieve)</span>
<span class="token comment"># virtual - gather min and virtual facts</span>
<span class="token comment"># facter - import facts from facter</span>
<span class="token comment"># ohai - import facts from ohai</span>
<span class="token comment"># You can combine them using comma (ex: network,virtual)</span>
<span class="token comment"># You can negate them using ! (ex: !hardware,!facter,!ohai)</span>
<span class="token comment"># A minimal set of facts is always gathered.</span>
<span class="token comment">#gather_subset = all</span>

<span class="token comment"># some hardware related facts are collected</span>
<span class="token comment"># with a maximum timeout of 10 seconds. This</span>
<span class="token comment"># option lets you increase or decrease that</span>
<span class="token comment"># timeout to something more suitable for the</span>
<span class="token comment"># environment.</span>
<span class="token comment"># gather_timeout = 10</span>

<span class="token comment"># Ansible facts are available inside the ansible_facts.* dictionary</span>
<span class="token comment"># namespace. This setting maintains the behaviour which was the default prior</span>
<span class="token comment"># to 2.5, duplicating these variables into the main namespace, each with a</span>
<span class="token comment"># prefix of 'ansible_'.</span>
<span class="token comment"># This variable is set to True by default for backwards compatibility. It</span>
<span class="token comment"># will be changed to a default of 'False' in a future release.</span>
<span class="token comment"># ansible_facts.</span>
<span class="token comment"># inject_facts_as_vars = True</span>

<span class="token comment"># additional paths to search for roles in, colon separated</span>
<span class="token comment">#roles_path    = /etc/ansible/roles	# 默认下载的Roles存放的目录</span>

<span class="token comment"># uncomment this to disable SSH key host checking</span>
<span class="token comment">#host_key_checking = False	# 首次连接是否需要检查key认证</span>

<span class="token comment"># change the default callback, you can only have one 'stdout' type  enabled at a time.</span>
<span class="token comment">#stdout_callback = skippy</span>


<span class="token comment">## Ansible ships with some plugins that require whitelisting,</span>
<span class="token comment">## this is done to avoid running all of a type by default.</span>
<span class="token comment">## These setting lists those that you want enabled for your system.</span>
<span class="token comment">## Custom plugins should not need this unless plugin author specifies it.</span>

<span class="token comment"># enable callback plugins, they can output to stdout but cannot be 'stdout' type.</span>
<span class="token comment">#callback_whitelist = timer, mail</span>

<span class="token comment"># Determine whether includes in tasks and handlers are &quot;static&quot; by</span>
<span class="token comment"># default. As of 2.0, includes are dynamic by default. Setting these</span>
<span class="token comment"># values to True will make includes behave more like they did in the</span>
<span class="token comment"># 1.x versions.</span>
<span class="token comment">#task_includes_static = False</span>
<span class="token comment">#handler_includes_static = False</span>

<span class="token comment"># Controls if a missing handler for a notification event is an error or a warning</span>
<span class="token comment">#error_on_missing_handler = True</span>

<span class="token comment"># change this for alternative sudo implementations</span>
<span class="token comment">#sudo_exe = sudo</span>

<span class="token comment"># What flags to pass to sudo</span>
<span class="token comment"># WARNING: leaving out the defaults might create unexpected behaviours</span>
<span class="token comment">#sudo_flags = -H -S -n</span>

<span class="token comment"># SSH timeout</span>
<span class="token comment">#timeout = 10	# 默认超时时间</span>

<span class="token comment"># default user to use for playbooks if user is not specified</span>
<span class="token comment"># (/usr/bin/ansible will use current user as default)</span>
<span class="token comment">#remote_user = root</span>

<span class="token comment"># logging is off by default unless this path is defined</span>
<span class="token comment"># if so defined, consider logrotate</span>
<span class="token comment">#log_path = /var/log/ansible.log	# 执行日志存放目录</span>

<span class="token comment"># default module name for /usr/bin/ansible</span>
<span class="token comment">#module_name = command	# 默认执行的模块</span>

<span class="token comment"># use this shell for commands executed under sudo</span>
<span class="token comment"># you may need to change this to bin/bash in rare instances</span>
<span class="token comment"># if sudo is constrained</span>
<span class="token comment">#executable = /bin/sh</span>

<span class="token comment"># if inventory variables overlap, does the higher precedence one win</span>
<span class="token comment"># or are hash values merged together?  The default is 'replace' but</span>
<span class="token comment"># this can also be set to 'merge'.</span>
<span class="token comment">#hash_behaviour = replace</span>

<span class="token comment"># by default, variables from roles will be visible in the global variable</span>
<span class="token comment"># scope. To prevent this, the following option can be enabled, and only</span>
<span class="token comment"># tasks and handlers within the role will see the variables there</span>
<span class="token comment">#private_role_vars = yes</span>

<span class="token comment"># list any Jinja2 extensions to enable here:</span>
<span class="token comment">#jinja2_extensions = jinja2.ext.do,jinja2.ext.i18n</span>

<span class="token comment"># if set, always use this private key file for authentication, same as</span>
<span class="token comment"># if passing --private-key to ansible or ansible-playbook</span>
<span class="token comment">#private_key_file = /path/to/file</span>

<span class="token comment"># If set, configures the path to the Vault password file as an alternative to</span>
<span class="token comment"># specifying --vault-password-file on the command line.</span>
<span class="token comment">#vault_password_file = /path/to/vault_password_file</span>

<span class="token comment"># format of string {{ ansible_managed }} available within Jinja2</span>
<span class="token comment"># templates indicates to users editing templates files will be replaced.</span>
<span class="token comment"># replacing {file}, {host} and {uid} and strftime codes with proper values.</span>
<span class="token comment">#ansible_managed = Ansible managed: {file} modified on %Y-%m-%d %H:%M:%S by {uid} on {host}</span>
<span class="token comment"># {file}, {host}, {uid}, and the timestamp can all interfere with idempotence</span>
<span class="token comment"># in some situations so the default is a static string:</span>
<span class="token comment">#ansible_managed = Ansible managed</span>

<span class="token comment"># by default, ansible-playbook will display &quot;Skipping [host]&quot; if it determines a task</span>
<span class="token comment"># should not be run on a host.  Set this to &quot;False&quot; if you don't want to see these &quot;Skipping&quot;</span>
<span class="token comment"># messages. NOTE: the task header will still be shown regardless of whether or not the</span>
<span class="token comment"># task is skipped.</span>
<span class="token comment">#display_skipped_hosts = True</span>

<span class="token comment"># by default, if a task in a playbook does not include a name: field then</span>
<span class="token comment"># ansible-playbook will construct a header that includes the task's action but</span>
<span class="token comment"># not the task's args.  This is a security feature because ansible cannot know</span>
<span class="token comment"># if the *module* considers an argument to be no_log at the time that the</span>
<span class="token comment"># header is printed.  If your environment doesn't have a problem securing</span>
<span class="token comment"># stdout from ansible-playbook (or you have manually specified no_log in your</span>
<span class="token comment"># playbook on all of the tasks where you have secret information) then you can</span>
<span class="token comment"># safely set this to True to get more informative messages.</span>
<span class="token comment">#display_args_to_stdout = False</span>

<span class="token comment"># by default (as of 1.3), Ansible will raise errors when attempting to dereference</span>
<span class="token comment"># Jinja2 variables that are not set in templates or action lines. Uncomment this line</span>
<span class="token comment"># to revert the behavior to pre-1.3.</span>
<span class="token comment">#error_on_undefined_vars = False</span>

<span class="token comment"># by default (as of 1.6), Ansible may display warnings based on the configuration of the</span>
<span class="token comment"># system running ansible itself. This may include warnings about 3rd party packages or</span>
<span class="token comment"># other conditions that should be resolved if possible.</span>
<span class="token comment"># to disable these warnings, set the following value to False:</span>
<span class="token comment">#system_warnings = True</span>

<span class="token comment"># by default (as of 1.4), Ansible may display deprecation warnings for language</span>
<span class="token comment"># features that should no longer be used and will be removed in future versions.</span>
<span class="token comment"># to disable these warnings, set the following value to False:</span>
<span class="token comment">#deprecation_warnings = True</span>

<span class="token comment"># (as of 1.8), Ansible can optionally warn when usage of the shell and</span>
<span class="token comment"># command module appear to be simplified by using a default Ansible module</span>
<span class="token comment"># instead.  These warnings can be silenced by adjusting the following</span>
<span class="token comment"># setting or adding warn=yes or warn=no to the end of the command line</span>
<span class="token comment"># parameter string.  This will for example suggest using the git module</span>
<span class="token comment"># instead of shelling out to the git command.</span>
<span class="token comment"># command_warnings = False</span>


<span class="token comment"># set plugin path directories here, separate with colons</span>
<span class="token comment">#action_plugins     = /usr/share/ansible/plugins/action</span>
<span class="token comment">#become_plugins     = /usr/share/ansible/plugins/become</span>
<span class="token comment">#cache_plugins      = /usr/share/ansible/plugins/cache</span>
<span class="token comment">#callback_plugins   = /usr/share/ansible/plugins/callback</span>
<span class="token comment">#connection_plugins = /usr/share/ansible/plugins/connection</span>
<span class="token comment">#lookup_plugins     = /usr/share/ansible/plugins/lookup</span>
<span class="token comment">#inventory_plugins  = /usr/share/ansible/plugins/inventory</span>
<span class="token comment">#vars_plugins       = /usr/share/ansible/plugins/vars</span>
<span class="token comment">#filter_plugins     = /usr/share/ansible/plugins/filter</span>
<span class="token comment">#test_plugins       = /usr/share/ansible/plugins/test</span>
<span class="token comment">#terminal_plugins   = /usr/share/ansible/plugins/terminal</span>
<span class="token comment">#strategy_plugins   = /usr/share/ansible/plugins/strategy</span>


<span class="token comment"># by default, ansible will use the 'linear' strategy but you may want to try</span>
<span class="token comment"># another one</span>
<span class="token comment">#strategy = free</span>

<span class="token comment"># by default callbacks are not loaded for /bin/ansible, enable this if you</span>
<span class="token comment"># want, for example, a notification or logging callback to also apply to</span>
<span class="token comment"># /bin/ansible runs</span>
<span class="token comment">#bin_ansible_callbacks = False</span>


<span class="token comment"># don't like cows?  that's unfortunate.</span>
<span class="token comment"># set to 1 if you don't want cowsay support or export ANSIBLE_NOCOWS=1</span>
<span class="token comment">#nocows = 1</span>

<span class="token comment"># set which cowsay stencil you'd like to use by default. When set to 'random',</span>
<span class="token comment"># a random stencil will be selected for each task. The selection will be filtered</span>
<span class="token comment"># against the `cow_whitelist` option below.</span>
<span class="token comment">#cow_selection = default</span>
<span class="token comment">#cow_selection = random</span>

<span class="token comment"># when using the 'random' option for cowsay, stencils will be restricted to this list.</span>
<span class="token comment"># it should be formatted as a comma-separated list with no spaces between names.</span>
<span class="token comment"># NOTE: line continuations here are for formatting purposes only, as the INI parser</span>
<span class="token comment">#       in python does not support them.</span>
<span class="token comment">#cow_whitelist=bud-frogs,bunny,cheese,daemon,default,dragon,elephant-in-snake,elephant,eyes,\</span>
<span class="token comment">#              hellokitty,kitty,luke-koala,meow,milk,moofasa,moose,ren,sheep,small,stegosaurus,\</span>
<span class="token comment">#              stimpy,supermilker,three-eyes,turkey,turtle,tux,udder,vader-koala,vader,www</span>

<span class="token comment"># don't like colors either?</span>
<span class="token comment"># set to 1 if you don't want colors, or export ANSIBLE_NOCOLOR=1</span>
<span class="token comment">#nocolor = 1</span>

<span class="token comment"># if set to a persistent type (not 'memory', for example 'redis') fact values</span>
<span class="token comment"># from previous runs in Ansible will be stored.  This may be useful when</span>
<span class="token comment"># wanting to use, for example, IP information from one group of servers</span>
<span class="token comment"># without having to talk to them in the same playbook run to get their</span>
<span class="token comment"># current IP information.</span>
<span class="token comment">#fact_caching = memory</span>

<span class="token comment">#This option tells Ansible where to cache facts. The value is plugin dependent.</span>
<span class="token comment">#For the jsonfile plugin, it should be a path to a local directory.</span>
<span class="token comment">#For the redis plugin, the value is a host:port:database triplet: fact_caching_connection = localhost:6379:0</span>

<span class="token comment">#fact_caching_connection=/tmp</span>



<span class="token comment"># retry files</span>
<span class="token comment"># When a playbook fails a .retry file can be created that will be placed in ~/</span>
<span class="token comment"># You can enable this feature by setting retry_files_enabled to True</span>
<span class="token comment"># and you can change the location of the files by setting retry_files_save_path</span>

<span class="token comment">#retry_files_enabled = False</span>
<span class="token comment">#retry_files_save_path = ~/.ansible-retry</span>

<span class="token comment"># squash actions</span>
<span class="token comment"># Ansible can optimise actions that call modules with list parameters</span>
<span class="token comment"># when looping. Instead of calling the module once per with_ item, the</span>
<span class="token comment"># module is called once with all items at once. Currently this only works</span>
<span class="token comment"># under limited circumstances, and only with parameters named 'name'.</span>
<span class="token comment">#squash_actions = apk,apt,dnf,homebrew,pacman,pkgng,yum,zypper</span>

<span class="token comment"># prevents logging of task data, off by default</span>
<span class="token comment">#no_log = False</span>

<span class="token comment"># prevents logging of tasks, but only on the targets, data is still logged on the master/controller</span>
<span class="token comment">#no_target_syslog = False</span>

<span class="token comment"># controls whether Ansible will raise an error or warning if a task has no</span>
<span class="token comment"># choice but to create world readable temporary files to execute a module on</span>
<span class="token comment"># the remote machine.  This option is False by default for security.  Users may</span>
<span class="token comment"># turn this on to have behaviour more like Ansible prior to 2.1.x.  See</span>
<span class="token comment"># https://docs.ansible.com/ansible/become.html#becoming-an-unprivileged-user</span>
<span class="token comment"># for more secure ways to fix this than enabling this option.</span>
<span class="token comment">#allow_world_readable_tmpfiles = False</span>

<span class="token comment"># controls the compression level of variables sent to</span>
<span class="token comment"># worker processes. At the default of 0, no compression</span>
<span class="token comment"># is used. This value must be an integer from 0 to 9.</span>
<span class="token comment">#var_compression_level = 9</span>

<span class="token comment"># controls what compression method is used for new-style ansible modules when</span>
<span class="token comment"># they are sent to the remote system.  The compression types depend on having</span>
<span class="token comment"># support compiled into both the controller's python and the client's python.</span>
<span class="token comment"># The names should match with the python Zipfile compression types:</span>
<span class="token comment"># * ZIP_STORED (no compression. available everywhere)</span>
<span class="token comment"># * ZIP_DEFLATED (uses zlib, the default)</span>
<span class="token comment"># These values may be set per host via the ansible_module_compression inventory</span>
<span class="token comment"># variable</span>
<span class="token comment">#module_compression = 'ZIP_DEFLATED'</span>

<span class="token comment"># This controls the cutoff point (in bytes) on --diff for files</span>
<span class="token comment"># set to 0 for unlimited (RAM may suffer!).</span>
<span class="token comment">#max_diff_size = 1048576</span>

<span class="token comment"># This controls how ansible handles multiple --tags and --skip-tags arguments</span>
<span class="token comment"># on the CLI.  If this is True then multiple arguments are merged together.  If</span>
<span class="token comment"># it is False, then the last specified argument is used and the others are ignored.</span>
<span class="token comment"># This option will be removed in 2.8.</span>
<span class="token comment">#merge_multiple_cli_flags = True</span>

<span class="token comment"># Controls showing custom stats at the end, off by default</span>
<span class="token comment">#show_custom_stats = True</span>

<span class="token comment"># Controls which files to ignore when using a directory as inventory with</span>
<span class="token comment"># possibly multiple sources (both static and dynamic)</span>
<span class="token comment">#inventory_ignore_extensions = ~, .orig, .bak, .ini, .cfg, .retry, .pyc, .pyo</span>

<span class="token comment"># This family of modules use an alternative execution path optimized for network appliances</span>
<span class="token comment"># only update this setting if you know how this works, otherwise it can break module execution</span>
<span class="token comment">#network_group_modules=eos, nxos, ios, iosxr, junos, vyos</span>

<span class="token comment"># When enabled, this option allows lookups (via variables like {{lookup('foo')}} or when used as</span>
<span class="token comment"># a loop with `with_foo`) to return data that is not marked &quot;unsafe&quot;. This means the data may contain</span>
<span class="token comment"># jinja2 templating language which will be run through the templating engine.</span>
<span class="token comment"># ENABLING THIS COULD BE A SECURITY RISK</span>
<span class="token comment">#allow_unsafe_lookups = False</span>

<span class="token comment"># set default errors for all plays</span>
<span class="token comment">#any_errors_fatal = False</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">inventory</span><span class="token punctuation">]</span></span>
<span class="token comment"># enable inventory plugins, default: 'host_list', 'script', 'auto', 'yaml', 'ini', 'toml'</span>
<span class="token comment">#enable_plugins = host_list, virtualbox, yaml, constructed</span>

<span class="token comment"># ignore these extensions when parsing a directory as inventory source</span>
<span class="token comment">#ignore_extensions = .pyc, .pyo, .swp, .bak, ~, .rpm, .md, .txt, ~, .orig, .ini, .cfg, .retry</span>

<span class="token comment"># ignore files matching these patterns when parsing a directory as inventory source</span>
<span class="token comment">#ignore_patterns=</span>

<span class="token comment"># If 'true' unparsed inventory sources become fatal errors, they are warnings otherwise.</span>
<span class="token comment">#unparsed_is_failed=False</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">privilege_escalation</span><span class="token punctuation">]</span></span>
<span class="token comment">#become=True</span>
<span class="token comment">#become_method=sudo</span>
<span class="token comment">#become_user=root</span>
<span class="token comment">#become_ask_pass=False</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">paramiko_connection</span><span class="token punctuation">]</span></span>

<span class="token comment"># uncomment this line to cause the paramiko connection plugin to not record new host</span>
<span class="token comment"># keys encountered.  Increases performance on new host additions.  Setting works independently of the</span>
<span class="token comment"># host key checking setting above.</span>
<span class="token comment">#record_host_keys=False</span>

<span class="token comment"># by default, Ansible requests a pseudo-terminal for commands executed under sudo. Uncomment this</span>
<span class="token comment"># line to disable this behaviour.</span>
<span class="token comment">#pty=False</span>

<span class="token comment"># paramiko will default to looking for SSH keys initially when trying to</span>
<span class="token comment"># authenticate to remote devices.  This is a problem for some network devices</span>
<span class="token comment"># that close the connection after a key failure.  Uncomment this line to</span>
<span class="token comment"># disable the Paramiko look for keys function</span>
<span class="token comment">#look_for_keys = False</span>

<span class="token comment"># When using persistent connections with Paramiko, the connection runs in a</span>
<span class="token comment"># background process.  If the host doesn't already have a valid SSH key, by</span>
<span class="token comment"># default Ansible will prompt to add the host key.  This will cause connections</span>
<span class="token comment"># running in background processes to fail.  Uncomment this line to have</span>
<span class="token comment"># Paramiko automatically add host keys.</span>
<span class="token comment">#host_key_auto_add = True</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">ssh_connection</span><span class="token punctuation">]</span></span>

<span class="token comment"># ssh arguments to use</span>
<span class="token comment"># Leaving off ControlPersist will result in poor performance, so use</span>
<span class="token comment"># paramiko on older platforms rather than removing it, -C controls compression use</span>
<span class="token comment">#ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s</span>

<span class="token comment"># The base directory for the ControlPath sockets.</span>
<span class="token comment"># This is the &quot;%(directory)s&quot; in the control_path option</span>
<span class="token comment">#</span>
<span class="token comment"># Example:</span>
<span class="token comment"># control_path_dir = /tmp/.ansible/cp</span>
<span class="token comment">#control_path_dir = ~/.ansible/cp</span>

<span class="token comment"># The path to use for the ControlPath sockets. This defaults to a hashed string of the hostname,</span>
<span class="token comment"># port and username (empty string in the config). The hash mitigates a common problem users</span>
<span class="token comment"># found with long hostnames and the conventional %(directory)s/ansible-ssh-%%h-%%p-%%r format.</span>
<span class="token comment"># In those cases, a &quot;too long for Unix domain socket&quot; ssh error would occur.</span>
<span class="token comment">#</span>
<span class="token comment"># Example:</span>
<span class="token comment"># control_path = %(directory)s/%%h-%%r</span>
<span class="token comment">#control_path =</span>

<span class="token comment"># Enabling pipelining reduces the number of SSH operations required to</span>
<span class="token comment"># execute a module on the remote server. This can result in a significant</span>
<span class="token comment"># performance improvement when enabled, however when using &quot;sudo:&quot; you must</span>
<span class="token comment"># first disable 'requiretty' in /etc/sudoers</span>
<span class="token comment">#</span>
<span class="token comment"># By default, this option is disabled to preserve compatibility with</span>
<span class="token comment"># sudoers configurations that have requiretty (the default on many distros).</span>
<span class="token comment">#</span>
<span class="token comment">#pipelining = False</span>

<span class="token comment"># Control the mechanism for transferring files (old)</span>
<span class="token comment">#   * smart = try sftp and then try scp [default]</span>
<span class="token comment">#   * True = use scp only</span>
<span class="token comment">#   * False = use sftp only</span>
<span class="token comment">#scp_if_ssh = smart</span>

<span class="token comment"># Control the mechanism for transferring files (new)</span>
<span class="token comment"># If set, this will override the scp_if_ssh option</span>
<span class="token comment">#   * sftp  = use sftp to transfer files</span>
<span class="token comment">#   * scp   = use scp to transfer files</span>
<span class="token comment">#   * piped = use 'dd' over SSH to transfer files</span>
<span class="token comment">#   * smart = try sftp, scp, and piped, in that order [default]</span>
<span class="token comment">#transfer_method = smart</span>

<span class="token comment"># if False, sftp will not use batch mode to transfer files. This may cause some</span>
<span class="token comment"># types of file transfer failures impossible to catch however, and should</span>
<span class="token comment"># only be disabled if your sftp version has problems with batch mode</span>
<span class="token comment">#sftp_batch_mode = False</span>

<span class="token comment"># The -tt argument is passed to ssh when pipelining is not enabled because sudo </span>
<span class="token comment"># requires a tty by default. </span>
<span class="token comment">#usetty = True</span>

<span class="token comment"># Number of times to retry an SSH connection to a host, in case of UNREACHABLE.</span>
<span class="token comment"># For each retry attempt, there is an exponential backoff,</span>
<span class="token comment"># so after the first attempt there is 1s wait, then 2s, 4s etc. up to 30s (max).</span>
<span class="token comment">#retries = 3</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">persistent_connection</span><span class="token punctuation">]</span></span>

<span class="token comment"># Configures the persistent connection timeout value in seconds.  This value is</span>
<span class="token comment"># how long the persistent connection will remain idle before it is destroyed.</span>
<span class="token comment"># If the connection doesn't receive a request before the timeout value</span>
<span class="token comment"># expires, the connection is shutdown. The default value is 30 seconds.</span>
<span class="token comment">#connect_timeout = 30</span>

<span class="token comment"># The command timeout value defines the amount of time to wait for a command</span>
<span class="token comment"># or RPC call before timing out. The value for the command timeout must</span>
<span class="token comment"># be less than the value of the persistent connection idle timeout (connect_timeout)</span>
<span class="token comment"># The default value is 30 second.</span>
<span class="token comment">#command_timeout = 30</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">accelerate</span><span class="token punctuation">]</span></span>
<span class="token comment">#accelerate_port = 5099</span>
<span class="token comment">#accelerate_timeout = 30</span>
<span class="token comment">#accelerate_connect_timeout = 5.0</span>

<span class="token comment"># The daemon timeout is measured in minutes. This time is measured</span>
<span class="token comment"># from the last activity to the accelerate daemon.</span>
<span class="token comment">#accelerate_daemon_timeout = 30</span>

<span class="token comment"># If set to yes, accelerate_multi_key will allow multiple</span>
<span class="token comment"># private keys to be uploaded to it, though each user must</span>
<span class="token comment"># have access to the system via SSH to add a new key. The default</span>
<span class="token comment"># is &quot;no&quot;.</span>
<span class="token comment">#accelerate_multi_key = yes</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">selinux</span><span class="token punctuation">]</span></span>
<span class="token comment"># file systems that require special treatment when dealing with security context</span>
<span class="token comment"># the default behaviour that copies the existing context or uses the user default</span>
<span class="token comment"># needs to be changed to use the file system dependent context.</span>
<span class="token comment">#special_context_filesystems=nfs,vboxsf,fuse,ramfs,9p,vfat</span>

<span class="token comment"># Set this to yes to allow libvirt_lxc connections to work without SELinux.</span>
<span class="token comment">#libvirt_lxc_noseclabel = yes</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">colors</span><span class="token punctuation">]</span></span>
<span class="token comment">#highlight = white</span>
<span class="token comment">#verbose = blue</span>
<span class="token comment">#warn = bright purple</span>
<span class="token comment">#error = red</span>
<span class="token comment">#debug = dark gray</span>
<span class="token comment">#deprecate = purple</span>
<span class="token comment">#skip = cyan</span>
<span class="token comment">#unreachable = red</span>
<span class="token comment">#ok = green</span>
<span class="token comment">#changed = yellow</span>
<span class="token comment">#diff_add = green</span>
<span class="token comment">#diff_remove = red</span>
<span class="token comment">#diff_lines = cyan</span>


<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">diff</span><span class="token punctuation">]</span></span>
<span class="token comment"># Always print diff when running ( same as always running with -D/--diff )</span>
<span class="token comment"># always = no</span>

<span class="token comment"># Set how many context lines to show in diff</span>
<span class="token comment"># context = 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br></div></div><h2 id="ansible的命令"><a href="#ansible的命令" class="header-anchor">#</a> Ansible的命令</h2> <h3 id="ansible"><a href="#ansible" class="header-anchor">#</a> ansible</h3> <p><a href="https://docs.ansible.com/ansible/latest/command_guide/intro_adhoc.html#intro-adhoc" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/latest/command_guide/intro_adhoc.html#intro-adhoc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://docs.ansible.com/ansible/latest/cli/ansible.html#ansible" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/latest/cli/ansible.html#ansible<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ad-hoc（临时命令模式）主要用于临时命令的执行。使用格式如下：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ansible <span class="token operator">&lt;</span>host-pattern<span class="token operator">&gt;</span> -m <span class="token punctuation">[</span>module<span class="token punctuation">]</span> -a <span class="token string">&quot;[module options]&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>&lt;host-pattern&gt;</code> 是Inventory中定义的主机或主机组，可以为ip、hostname、Inventory中的group组名、具有“.”或“*”或“:”等特殊字符的匹配型字符串。</p> <p><code>[module options]</code>是ansible的参数选项。</p> <ul><li><p>-i 'PATH', --inventory 'PATH'：指定hosts文件路径，默认/etc/ansible/hosts</p></li> <li><p>-m 'MODULE_NAME', --module-name 'MODULE_NAME'：指定执行使用的模块 ，默认是command。</p></li> <li><p>-a 'MODULE_ARGS', --args 'MODULE_ARGS'：指定模块参数。</p></li> <li><p>-u 'REMOTE_USER', --user 'REMOTE_USER'：指定远程主机以USERNAME运行命令。</p></li> <li><p>-k, --ask-pass：询问连接密码。</p></li> <li><p>-v, --verbose：详细模式（-vvv更多，-vvv启用连接调试）。使用 -vvv 参数可以清楚地了解Ansible命令执行流程。</p> <p><img src="/assets/img/20240825175858.2af40ba2.jpg" alt=""></p></li></ul> <p>使用<code>man ansible</code>可以查看详细选项。</p> <h3 id="ansible-playbook"><a href="#ansible-playbook" class="header-anchor">#</a> ansible-playbook</h3> <p><a href="https://docs.ansible.com/ansible/latest/cli/ansible-playbook.html#ansible-playbook" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/latest/cli/ansible-playbook.html#ansible-playbook<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>使用格式如下：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ansible-playbook playbook.yml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="playbook"><a href="#playbook" class="header-anchor">#</a> playbook</h4> <p><a href="https://docs.ansible.com/ansible/latest/reference_appendices/playbooks_keywords.html" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/latest/reference_appendices/playbooks_keywords.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>playbook（剧本模式）可以理解为ad-hoc的集合，通过一定的规则编排在一起。</p> <p>一个playbook就是play的列表。</p> <table><thead><tr><th></th> <th>是否必需</th> <th>描述</th></tr></thead> <tbody><tr><td>hosts</td> <td>是</td> <td>需要配置的一组主机。</td></tr> <tr><td>tasks</td> <td>是</td> <td>需要在这组主机上执行的任务。<br>每个task必须包含一个键值对。<br>键是模块的名字，值是要传递到模块的参数。<br>task中可以声明一个notify，键是notify，值是handler的名字。</td></tr> <tr><td>vars</td> <td>否</td> <td>定义变量。在vars区段中定义变量的名字与值。使用<code></code>引用变量。</td></tr> <tr><td>vars_files</td> <td>否</td> <td>定义变量。把变量放到一个或多个文件中。</td></tr> <tr><td>handlers</td> <td>否</td> <td>与tasks很相似。<br>handler只会在所有task执行完后执行。<br>哪怕被通知了多次，它也只执行一次。<br>当play中定义了多个handler时，handler安装play中定义的顺序执行，而不是通知的顺序。</td></tr></tbody></table> <h4 id="role"><a href="#role" class="header-anchor">#</a> role</h4> <p>role是将playbook分割为多个文件的主要机制。</p> <p><a href="https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_reuse_roles.html" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_reuse_roles.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="ansible-doc"><a href="#ansible-doc" class="header-anchor">#</a> ansible-doc</h3> <p>ansible-doc是Ansible模块文档说明。</p> <p>使用方式：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ansible-doc <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>module<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>常用选项：</p> <ul><li>-l, --list：列出可用模块</li> <li>-s, --snippet：显示指定模块的playbook片段</li></ul> <p>具体示例：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 列出可用模块</span>
ansible-doc -l
<span class="token comment"># 功能模块说明</span>
ansible-doc <span class="token builtin class-name">command</span>
ansible-doc shell
<span class="token comment"># 显示指定模块的playbook片段</span>
ansible-doc -s <span class="token builtin class-name">command</span>
ansible-doc -s shell
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="ansible的模块"><a href="#ansible的模块" class="header-anchor">#</a> Ansible的模块</h2> <p><a href="https://docs.ansible.com/ansible/latest/module_plugin_guide/modules_intro.html" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/latest/module_plugin_guide/modules_intro.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="debug模块"><a href="#debug模块" class="header-anchor">#</a> debug模块</h3> <p>debug模块：打印任意信息。例如：输出变量的值<code>- debug: var=myvarname</code>。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> usage of register and debug module
<span class="token key atrule">hosts</span><span class="token punctuation">:</span> managednodes
<span class="token key atrule">tasks</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> capture output of id command
    <span class="token key atrule">command</span><span class="token punctuation">:</span> id <span class="token punctuation">-</span>un
    <span class="token key atrule">register</span><span class="token punctuation">:</span> login  <span class="token comment"># 捕获id -un命令的输出到名为login的变量中</span>
  <span class="token punctuation">-</span> <span class="token key atrule">debug</span><span class="token punctuation">:</span> var=login <span class="token comment"># 使用debug模块输出login变量</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>debug模块的输出类似如下：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code></code></pre> <div class="line-numbers-wrapper"></div></div><h3 id="command模块‌"><a href="#command模块‌" class="header-anchor">#</a> command模块‌</h3> <p>‌command模块‌：用于在远程主机上执行命令。此模块为默认模块。</p> <table><thead><tr><th style="text-align:left;">常用参数</th> <th style="text-align:left;">功能</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>chdir</code></td> <td style="text-align:left;">执行命令前先进入到指定目录</td></tr> <tr><td style="text-align:left;"><code>cmd</code></td> <td style="text-align:left;">运行命令指定</td></tr> <tr><td style="text-align:left;"><code>creates</code></td> <td style="text-align:left;">如果文件存在将不运行命令</td></tr> <tr><td style="text-align:left;"><code>removes</code></td> <td style="text-align:left;">如果文件存在将运行命令</td></tr></tbody></table> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ansible all -m <span class="token builtin class-name">command</span> -a <span class="token string">'chdir=/mnt pwd'</span>
ansible all -m <span class="token builtin class-name">command</span> -a <span class="token string">'chdir=/mnt cmd=pwd'</span>
ansible all -m <span class="token builtin class-name">command</span> -a <span class="token string">'chdir=/mnt creates=/mnt/file pwd'</span>
ansible all -m <span class="token builtin class-name">command</span> -a <span class="token string">'chdir=/mnt removes=/mnt/file pwd'</span>
ansible all -m <span class="token builtin class-name">command</span> -a <span class="token string">'chdir=/mnt touch file'</span>
ansible all -m <span class="token builtin class-name">command</span> -a <span class="token string">'chdir=/mnt creates=/mnt/file pwd'</span>
ansible all -m <span class="token builtin class-name">command</span> -a <span class="token string">'chdir=/mnt removes=/mnt/file pwd'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="shell模块"><a href="#shell模块" class="header-anchor">#</a> shell模块</h3> <p>shell模块‌：用于在远程主机上执行命令。Shell模块支持变量引用、管道符和重定向，可以执行更复杂的命令‌。</p> <table><thead><tr><th style="text-align:left;">常用参数</th> <th style="text-align:left;">功能</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>chdir</code></td> <td style="text-align:left;">执行命令前先进入到指定目录</td></tr> <tr><td style="text-align:left;"><code>cmd</code></td> <td style="text-align:left;">运行命令指定</td></tr> <tr><td style="text-align:left;"><code>creates</code></td> <td style="text-align:left;">如果文件存在将不运行命令</td></tr> <tr><td style="text-align:left;"><code>removes</code></td> <td style="text-align:left;">如果文件存在将运行命令</td></tr> <tr><td style="text-align:left;"><code>executable</code></td> <td style="text-align:left;">指定执行环境，默认为sh</td></tr></tbody></table> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ansible all -m shell -a <span class="token string">'chdir=/mnt/ touch file{1..3}'</span>
ansible all -m shell -a <span class="token string">'chdir=/mnt/ ls -ld /mnt'</span>
ansible all -m shell -a <span class="token string">'chdir=/mnt/ ls -lR /mnt'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="script模块"><a href="#script模块" class="header-anchor">#</a> script模块</h3> <p>在ansible主机中写好的脚本在受控主机中执行。</p> <h3 id="file模块"><a href="#file模块" class="header-anchor">#</a> file模块</h3> <p>file模块‌：用于管理文件和目录，包括创建、删除、修改文件属性等操作。例如，设置文件的属主、属组、权限，以及创建空文件或目录‌。</p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">功能</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>path</code></td> <td style="text-align:left;">指定文件名称</td></tr> <tr><td style="text-align:left;"><code>state</code></td> <td style="text-align:left;">指定操作状态<br> <code>touch</code>：建立<br> <code>absent</code>：删除<br> <code>directory</code>：递归目录<br> <code>link</code>：建立软链接<br> <code>hard</code>：建立硬链接</td></tr> <tr><td style="text-align:left;"><code>mode</code></td> <td style="text-align:left;">设定权限</td></tr> <tr><td style="text-align:left;"><code>owner</code></td> <td style="text-align:left;">设定属主</td></tr> <tr><td style="text-align:left;"><code>group</code></td> <td style="text-align:left;">设定属组</td></tr> <tr><td style="text-align:left;"><code>src</code></td> <td style="text-align:left;">源文件</td></tr> <tr><td style="text-align:left;"><code>dest</code></td> <td style="text-align:left;">目标文件</td></tr> <tr><td style="text-align:left;"><code>recurse=yes</code></td> <td style="text-align:left;">递归更改</td></tr></tbody></table> <h3 id="template模块"><a href="#template模块" class="header-anchor">#</a> template模块</h3> <p>template模块：从模板生成一个文件并复制到远程主机上。</p> <h3 id="copy模块‌-和-‌fetch模块‌"><a href="#copy模块‌-和-‌fetch模块‌" class="header-anchor">#</a> copy模块‌ 和 ‌fetch模块‌</h3> <p>copy模块‌：用于从本地复制文件到远程主机。</p> <p>copy模块参数：</p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">功能</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>src</code></td> <td style="text-align:left;">源文件</td></tr> <tr><td style="text-align:left;"><code>dest</code></td> <td style="text-align:left;">目的地文件</td></tr> <tr><td style="text-align:left;"><code>owner</code></td> <td style="text-align:left;">指定目的地文件所有人</td></tr> <tr><td style="text-align:left;"><code>group</code></td> <td style="text-align:left;">指定目的地文件所有组</td></tr> <tr><td style="text-align:left;"><code>mode</code></td> <td style="text-align:left;">指定目的地文件权限</td></tr> <tr><td style="text-align:left;"><code>backup=yes</code></td> <td style="text-align:left;">当受控主机中存在文件时备份原文件</td></tr> <tr><td style="text-align:left;"><code>content</code></td> <td style="text-align:left;">指定文本内容直接在受控主机中生成文件</td></tr></tbody></table> <p>fetch模块‌：用于从远程主机复制文件到本地。fetch模块‌不支持目录。</p> <p>fetch模块参数：</p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">功能</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>src</code></td> <td style="text-align:left;">受控主机的源文件</td></tr> <tr><td style="text-align:left;"><code>dest</code></td> <td style="text-align:left;">本机目录</td></tr> <tr><td style="text-align:left;"><code>flat</code></td> <td style="text-align:left;">基本名称功能，单纯只要文件，不要路径的层层目录</td></tr></tbody></table> <h3 id="archive模块‌-和-‌unarchive模块‌"><a href="#archive模块‌-和-‌unarchive模块‌" class="header-anchor">#</a> archive模块‌ 和 ‌unarchive模块‌</h3> <p>‌archive模块‌ 和 ‌unarchive模块‌：用于压缩和解压缩文件。</p> <p>archive模块‌参数：</p> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">功能</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>path</code></td> <td style="text-align:left;">打包目录名称</td></tr> <tr><td style="text-align:left;"><code>dest</code></td> <td style="text-align:left;">声称打包文件名称</td></tr> <tr><td style="text-align:left;"><code>format</code></td> <td style="text-align:left;">打包格式</td></tr> <tr><td style="text-align:left;"><code>owner</code></td> <td style="text-align:left;">指定文件所属人</td></tr> <tr><td style="text-align:left;"><code>mode</code></td> <td style="text-align:left;">指定文件权限</td></tr></tbody></table> <p>unarchive模块‌参数：</p> <h3 id="其他模块"><a href="#其他模块" class="header-anchor">#</a> 其他模块</h3> <ul><li>hostname模块‌：用于管理远程主机上的主机名。</li> <li>‌cron模块‌：用于管理cron任务。</li> <li>‌yum_repository模块‌ 和 ‌yum(dnf)模块‌：用于管理YUM仓库。</li> <li>‌service模块‌ 和 ‌firewalld模块‌：分别用于管理服务（启动、停止或者重启一个服务）和防火墙规则。</li> <li>‌user模块‌ 和 ‌group模块‌：用于管理用户和组。</li> <li>‌lineinfile模块‌ 和 ‌replace模块‌：用于修改配置文件中的特定行或文本。</li> <li>‌setup模块‌ 和 ‌debug模块‌：分别用于收集远程主机的信息和进行调试。</li></ul> <h2 id="ansible的示例"><a href="#ansible的示例" class="header-anchor">#</a> Ansible的示例</h2> <p>在 /etc/ansible/hosts 配置</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code>192.168.1.42
192.168.1.43

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">managednodes</span><span class="token punctuation">]</span></span>
192.168.1.42
192.168.1.43
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>使用 ad-hoc 方式执行命令</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ansible <span class="token number">192.168</span>.1.42 -m <span class="token builtin class-name">command</span> -a <span class="token string">'hostname'</span>
ansible managednodes -m shell -a <span class="token string">'df -lh'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用 playbook 方式执行命令</p> <ol><li><p>创建文件 test.yml</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> test
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> managednodes
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> hostname
      <span class="token key atrule">command</span><span class="token punctuation">:</span> hostname  
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> view disk space
      <span class="token key atrule">shell</span><span class="token punctuation">:</span> df <span class="token punctuation">-</span>lh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>检查语法</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ansible-playbook --syntax-check test.yml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>执行命令</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ansible-playbook test.yml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h2 id="python-api"><a href="#python-api" class="header-anchor">#</a> Python API</h2> <p><a href="https://docs.ansible.com/ansible/2.9/dev_guide/developing_api.html" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/2.9/dev_guide/developing_api.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://docs.ansible.com/ansible/latest/dev_guide/developing_api.html" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/latest/dev_guide/developing_api.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <p><a href="https://docs.ansible.com/ansible/latest/index.html" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/latest/index.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/category/devops/aliyun_docker_nginx.html" class="prev">
            在阿里云上使用Docker部署静态站点
          </a></span> <span class="next"><a href="/category/devops/atguigu_docker.html">
            尚硅谷_Docker的安装与卸载
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/category/devops/ansible.html#ansible的三大组件" class="sidebar-link reco-side-ansible的三大组件" data-v-70334359>Ansible的三大组件</a></li><li class="level-2" data-v-70334359><a href="/category/devops/ansible.html#ansible的安装部署" class="sidebar-link reco-side-ansible的安装部署" data-v-70334359>Ansible的安装部署</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#control-node-requirements" class="sidebar-link reco-side-control-node-requirements" data-v-70334359>Control node requirements</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#managed-node-requirements" class="sidebar-link reco-side-managed-node-requirements" data-v-70334359>Managed node requirements</a></li><li class="level-2" data-v-70334359><a href="/category/devops/ansible.html#ansible的目录结构" class="sidebar-link reco-side-ansible的目录结构" data-v-70334359>Ansible的目录结构</a></li><li class="level-2" data-v-70334359><a href="/category/devops/ansible.html#ansible的配置文件" class="sidebar-link reco-side-ansible的配置文件" data-v-70334359>Ansible的配置文件</a></li><li class="level-2" data-v-70334359><a href="/category/devops/ansible.html#ansible的命令" class="sidebar-link reco-side-ansible的命令" data-v-70334359>Ansible的命令</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#ansible" class="sidebar-link reco-side-ansible" data-v-70334359>ansible</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#ansible-playbook" class="sidebar-link reco-side-ansible-playbook" data-v-70334359>ansible-playbook</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#ansible-doc" class="sidebar-link reco-side-ansible-doc" data-v-70334359>ansible-doc</a></li><li class="level-2" data-v-70334359><a href="/category/devops/ansible.html#ansible的模块" class="sidebar-link reco-side-ansible的模块" data-v-70334359>Ansible的模块</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#debug模块" class="sidebar-link reco-side-debug模块" data-v-70334359>debug模块</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#command模块‌" class="sidebar-link reco-side-command模块‌" data-v-70334359>command模块‌</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#shell模块" class="sidebar-link reco-side-shell模块" data-v-70334359>shell模块</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#script模块" class="sidebar-link reco-side-script模块" data-v-70334359>script模块</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#file模块" class="sidebar-link reco-side-file模块" data-v-70334359>file模块</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#template模块" class="sidebar-link reco-side-template模块" data-v-70334359>template模块</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#copy模块‌-和-‌fetch模块‌" class="sidebar-link reco-side-copy模块‌-和-‌fetch模块‌" data-v-70334359>copy模块‌ 和 ‌fetch模块‌</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#archive模块‌-和-‌unarchive模块‌" class="sidebar-link reco-side-archive模块‌-和-‌unarchive模块‌" data-v-70334359>archive模块‌ 和 ‌unarchive模块‌</a></li><li class="level-3" data-v-70334359><a href="/category/devops/ansible.html#其他模块" class="sidebar-link reco-side-其他模块" data-v-70334359>其他模块</a></li><li class="level-2" data-v-70334359><a href="/category/devops/ansible.html#ansible的示例" class="sidebar-link reco-side-ansible的示例" data-v-70334359>Ansible的示例</a></li><li class="level-2" data-v-70334359><a href="/category/devops/ansible.html#python-api" class="sidebar-link reco-side-python-api" data-v-70334359>Python API</a></li><li class="level-2" data-v-70334359><a href="/category/devops/ansible.html#参考资料" class="sidebar-link reco-side-参考资料" data-v-70334359>参考资料</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.da2f41f8.js" defer></script><script src="/assets/js/4.d7bde999.js" defer></script><script src="/assets/js/1.f767751f.js" defer></script><script src="/assets/js/17.0c856ead.js" defer></script>
  </body>
</html>
