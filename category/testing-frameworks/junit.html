<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Junit单元测试框架 | 初冬十月的笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <script>
		       var _hmt = _hmt || [];
		       (function() {
		         var hm = document.createElement("script");
		         hm.src = "https://hm.baidu.com/hm.js?ea067d5ff639c55d3843c3f224a1c187";
		         var s = document.getElementsByTagName("script")[0]; 
		         s.parentNode.insertBefore(hm, s);
		       })();
		         </script>
    <meta name="description" content="初冬十月的笔记努力加载中~~">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="keywords" content="初冬十月,maiaimei,maiamy,maiam">
    
    <link rel="preload" href="/assets/css/0.styles.2038d0e5.css" as="style"><link rel="preload" href="/assets/js/app.34976f8f.js" as="script"><link rel="preload" href="/assets/js/4.d7bde999.js" as="script"><link rel="preload" href="/assets/js/1.f767751f.js" as="script"><link rel="preload" href="/assets/js/22.433dec0e.js" as="script"><link rel="prefetch" href="/assets/js/10.cc051348.js"><link rel="prefetch" href="/assets/js/11.f2b351f7.js"><link rel="prefetch" href="/assets/js/12.51770130.js"><link rel="prefetch" href="/assets/js/13.8b0e624d.js"><link rel="prefetch" href="/assets/js/14.c42723ad.js"><link rel="prefetch" href="/assets/js/15.5ce51a44.js"><link rel="prefetch" href="/assets/js/16.4f618862.js"><link rel="prefetch" href="/assets/js/17.5bb328fd.js"><link rel="prefetch" href="/assets/js/18.196a9cef.js"><link rel="prefetch" href="/assets/js/19.9f95af52.js"><link rel="prefetch" href="/assets/js/20.2907ae54.js"><link rel="prefetch" href="/assets/js/21.9be00014.js"><link rel="prefetch" href="/assets/js/23.b5a443aa.js"><link rel="prefetch" href="/assets/js/24.e4d946dd.js"><link rel="prefetch" href="/assets/js/25.2db88b30.js"><link rel="prefetch" href="/assets/js/26.5d3fbcfe.js"><link rel="prefetch" href="/assets/js/27.4affb193.js"><link rel="prefetch" href="/assets/js/28.e00769e8.js"><link rel="prefetch" href="/assets/js/29.5c63c387.js"><link rel="prefetch" href="/assets/js/3.e7b45309.js"><link rel="prefetch" href="/assets/js/30.eb5563e3.js"><link rel="prefetch" href="/assets/js/31.7f4e35a6.js"><link rel="prefetch" href="/assets/js/32.d781e54a.js"><link rel="prefetch" href="/assets/js/33.e2efa213.js"><link rel="prefetch" href="/assets/js/34.58a7ca38.js"><link rel="prefetch" href="/assets/js/35.85ae7afa.js"><link rel="prefetch" href="/assets/js/36.d1697a22.js"><link rel="prefetch" href="/assets/js/37.fa049169.js"><link rel="prefetch" href="/assets/js/38.b925d6f6.js"><link rel="prefetch" href="/assets/js/39.9ccb2249.js"><link rel="prefetch" href="/assets/js/40.8277f4c6.js"><link rel="prefetch" href="/assets/js/41.29f057a8.js"><link rel="prefetch" href="/assets/js/42.f8cd5e07.js"><link rel="prefetch" href="/assets/js/43.3f203bb7.js"><link rel="prefetch" href="/assets/js/44.1673593c.js"><link rel="prefetch" href="/assets/js/45.4951b78b.js"><link rel="prefetch" href="/assets/js/46.cd1b2997.js"><link rel="prefetch" href="/assets/js/47.f9e0c64b.js"><link rel="prefetch" href="/assets/js/48.f5a25246.js"><link rel="prefetch" href="/assets/js/49.a77ed084.js"><link rel="prefetch" href="/assets/js/5.79cef01c.js"><link rel="prefetch" href="/assets/js/50.a15d1cc4.js"><link rel="prefetch" href="/assets/js/51.90045b4c.js"><link rel="prefetch" href="/assets/js/52.b39c463f.js"><link rel="prefetch" href="/assets/js/53.0bb9274b.js"><link rel="prefetch" href="/assets/js/54.9eb6552f.js"><link rel="prefetch" href="/assets/js/55.62629b27.js"><link rel="prefetch" href="/assets/js/56.09ff0bf1.js"><link rel="prefetch" href="/assets/js/57.3474fa07.js"><link rel="prefetch" href="/assets/js/58.1e6e7957.js"><link rel="prefetch" href="/assets/js/59.41fb3ba0.js"><link rel="prefetch" href="/assets/js/6.c7a11ae1.js"><link rel="prefetch" href="/assets/js/60.a4b41e74.js"><link rel="prefetch" href="/assets/js/61.b6cdcab8.js"><link rel="prefetch" href="/assets/js/62.472bb012.js"><link rel="prefetch" href="/assets/js/63.d579c2fa.js"><link rel="prefetch" href="/assets/js/64.7fff9a2a.js"><link rel="prefetch" href="/assets/js/65.e0cae11c.js"><link rel="prefetch" href="/assets/js/66.279e49a6.js"><link rel="prefetch" href="/assets/js/67.9d5e7200.js"><link rel="prefetch" href="/assets/js/68.aec06d3f.js"><link rel="prefetch" href="/assets/js/69.f8ef2c05.js"><link rel="prefetch" href="/assets/js/7.9028652f.js"><link rel="prefetch" href="/assets/js/70.63b6ce80.js"><link rel="prefetch" href="/assets/js/71.a728ba93.js"><link rel="prefetch" href="/assets/js/72.027cac56.js"><link rel="prefetch" href="/assets/js/73.19b45678.js"><link rel="prefetch" href="/assets/js/74.53eb1a3f.js"><link rel="prefetch" href="/assets/js/75.75d89d1f.js"><link rel="prefetch" href="/assets/js/76.0b8fb37a.js"><link rel="prefetch" href="/assets/js/77.3d7f0334.js"><link rel="prefetch" href="/assets/js/78.1ed18fdf.js"><link rel="prefetch" href="/assets/js/79.2001c8b1.js"><link rel="prefetch" href="/assets/js/8.e7c3eaa3.js"><link rel="prefetch" href="/assets/js/80.5b6a700a.js"><link rel="prefetch" href="/assets/js/81.0882018b.js"><link rel="prefetch" href="/assets/js/82.c669f22e.js"><link rel="prefetch" href="/assets/js/83.82e2e0fb.js"><link rel="prefetch" href="/assets/js/84.62a984aa.js"><link rel="prefetch" href="/assets/js/85.ede9f093.js"><link rel="prefetch" href="/assets/js/86.70028d39.js"><link rel="prefetch" href="/assets/js/87.5407c17d.js"><link rel="prefetch" href="/assets/js/88.dedbdd24.js"><link rel="prefetch" href="/assets/js/89.14223377.js"><link rel="prefetch" href="/assets/js/9.dcee647e.js"><link rel="prefetch" href="/assets/js/90.879768e3.js"><link rel="prefetch" href="/assets/js/91.99e6ab29.js"><link rel="prefetch" href="/assets/js/92.21beb9c4.js"><link rel="prefetch" href="/assets/js/93.54c89ecc.js"><link rel="prefetch" href="/assets/js/94.5d49a0d7.js"><link rel="prefetch" href="/assets/js/95.8aa14f0f.js"><link rel="prefetch" href="/assets/js/96.08bfa46a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2038d0e5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>初冬十月的笔记</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>初冬十月的笔记努力加载中~~</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>maiaimei</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2024
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="初冬十月的笔记" class="logo"> <span class="site-name">初冬十月的笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/数据结构/" class="nav-link"><i class="undefined"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/DevOps/" class="nav-link"><i class="undefined"></i>
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端开发/" class="nav-link"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/categories/操作系统/" class="nav-link"><i class="undefined"></i>
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/中间件/" class="nav-link"><i class="undefined"></i>
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/categories/测试框架/" class="nav-link"><i class="undefined"></i>
  测试框架
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机术语/" class="nav-link"><i class="undefined"></i>
  计算机术语
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mail server/" class="nav-link"><i class="undefined"></i>
  Mail server
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    maiaimei
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>75</h3> <h6 data-v-828910c6>文章</h6></div> <div data-v-828910c6><h3 data-v-828910c6>49</h3> <h6 data-v-828910c6>标签</h6></div></div> <ul class="social-links" data-v-828910c6><li class="social-item" data-v-828910c6><i class="iconfont reco-github" style="color:#3498db;" data-v-828910c6></i></li><li class="social-item" data-v-828910c6><i class="iconfont reco-mayun" style="color:#849b87;" data-v-828910c6></i></li></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/数据结构/" class="nav-link"><i class="undefined"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/DevOps/" class="nav-link"><i class="undefined"></i>
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端开发/" class="nav-link"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/categories/操作系统/" class="nav-link"><i class="undefined"></i>
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/中间件/" class="nav-link"><i class="undefined"></i>
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/categories/测试框架/" class="nav-link"><i class="undefined"></i>
  测试框架
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机术语/" class="nav-link"><i class="undefined"></i>
  计算机术语
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mail server/" class="nav-link"><i class="undefined"></i>
  Mail server
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>我的笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/java" class="sidebar-heading clickable"><span>Java</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/python" class="sidebar-heading clickable"><span>Python</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/spring/@ConfigurationProperties" class="sidebar-heading clickable"><span>Spring</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/linux" class="sidebar-heading clickable"><span>Linux</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/devops" class="sidebar-heading clickable"><span>DevOps</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/middleware" class="sidebar-heading clickable"><span>中间件</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/database" class="sidebar-heading clickable"><span>数据库</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/data-structure" class="sidebar-heading clickable"><span>数据结构</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/testing-frameworks" class="sidebar-heading clickable router-link-active open"><span>测试框架</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/category/testing-frameworks/allure.html" class="sidebar-link">Allure自动化测试报告学习笔记</a></li><li><a href="/category/testing-frameworks/cucumber.html" class="sidebar-link">Cucumber学习笔记</a></li><li><a href="/category/testing-frameworks/junit.html" aria-current="page" class="active sidebar-link">Junit单元测试框架</a></li><li><a href="/category/testing-frameworks/swagger.html" class="sidebar-link">Swagger学习笔记</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/front-end-development" class="sidebar-heading clickable"><span>前端开发</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/category/wiki" class="sidebar-heading clickable"><span>知识中心</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Junit单元测试框架</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>maiaimei</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2024
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Junit单元测试框架</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>maiaimei</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2024/5/11</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>单元测试</span><span class="tag-item" data-v-1ff7123e>JUnit</span><span class="tag-item" data-v-1ff7123e>Mockito</span><span class="tag-item" data-v-1ff7123e>PowerMock</span><span class="tag-item" data-v-1ff7123e>Spring</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h2> <h3 id="junit"><a href="#junit" class="header-anchor">#</a> JUnit</h3> <p>JUnit is a simple framework to write repeatable tests.</p> <p>测试运行器：决定了用什么方式偏好去运行这些测试集/类/方法。</p> <p>测试集：可能包含多个测试类。</p> <p>测试类：包含一个或多个测试方法的文件。</p> <p>测试方法/测试用例：用@Test注解标记的方法。</p> <p>测试类及测试用例命名规范:</p> <ul><li>测试类命名规范: 被测试类+Test，例如：UserServiceTest</li> <li>测试用例命名规范: test+被测试方法，例如：testGet</li></ul> <p>常见的测试运行器：</p> <table><thead><tr><th>JUnit 4</th> <th>JUnit 5</th> <th>Description</th></tr></thead> <tbody><tr><td>@RunWith(JUnit38ClassRunner.class)</td> <td></td> <td>用于兼容JUnit3.8的运行器</td></tr> <tr><td>@RunWith(JUnit4.class)</td> <td></td> <td>JUnit 4的默认运行器，用JUnit4测试工具来运行测试</td></tr> <tr><td>@RunWith(MockitoJUnitRunner.class)</td> <td>@ExtendWith(MockitoExtension.class)</td> <td>运行Mockito的运行环境</td></tr> <tr><td>@RunWith(SpringJUnit4ClassRunner.class)<br>@RunWith(SpringRunner.class)</td> <td>@ExtendWith(SpringExtension.class)</td> <td>让类运行在Spring的测试环境，以便测试开始时自动创建Spring应用上下文，并使用JUnit4测试工具运行测试。<br>@RunWith(SpringRunner.class)继承了 @RunWith(SpringJUnit4ClassRunner.class) ，用法相同。</td></tr> <tr><td>@RunWith(Parameterized.class)</td> <td></td> <td>参数化运行器，配合@Parameters使用JUnit的参数化功能</td></tr> <tr><td>@RunWith(Suite.class)<br>@SuiteClasses({ATest.class,BTest.class,CTest.class})</td> <td></td> <td>测试集运行器，配合@SuiteClasses使用JUnit的测试集功能</td></tr></tbody></table> <p>JUnit3中测试用例需要继承TestCase类</p> <p>JUnit4中测试用例无需继承TestCase类，只需标记@Test注解即可。</p> <table><thead><tr><th></th> <th>JUnit 3</th> <th>JUnit 4</th> <th>JUnit 5</th></tr></thead> <tbody><tr><td>所有测试用例前仅执行一次</td> <td>N/A</td> <td>@BeforeClass</td> <td>@BeforeAll</td></tr> <tr><td>每个测试用例前执行</td> <td>setUp()</td> <td>@Before</td> <td>@BeforeEach</td></tr> <tr><td>执行测试用例</td> <td>N/A</td> <td>@Test</td> <td>@Test</td></tr> <tr><td>每个测试用例后执行</td> <td>tearDown()</td> <td>@After</td> <td>@AfterEach</td></tr> <tr><td>所有测试用例后仅执行一次</td> <td>N/A</td> <td>@AfterClass</td> <td>@AfterAll</td></tr></tbody></table> <table><thead><tr><th>JUnit 4 Annotation</th> <th style="text-align:left;">JUnit 5 Annotation</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td><code>@Test</code></td> <td style="text-align:left;"><code>@Test</code></td> <td style="text-align:left;">Denotes that a method is a test method. Unlike JUnit 4’s <code>@Test</code> annotation, this annotation does not declare any attributes, since test extensions in JUnit Jupiter operate based on their own dedicated annotations. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@ParameterizedTest</code></td> <td style="text-align:left;">Denotes that a method is a <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests" target="_blank" rel="noopener noreferrer">parameterized test<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@RepeatedTest</code></td> <td style="text-align:left;">Denotes that a method is a test template for a <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-repeated-tests" target="_blank" rel="noopener noreferrer">repeated test<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@TestFactory</code></td> <td style="text-align:left;">Denotes that a method is a test factory for <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-dynamic-tests" target="_blank" rel="noopener noreferrer">dynamic tests<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@TestTemplate</code></td> <td style="text-align:left;">Denotes that a method is a <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-templates" target="_blank" rel="noopener noreferrer">template for test cases<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> designed to be invoked multiple times depending on the number of invocation contexts returned by the registered <a href="https://junit.org/junit5/docs/current/user-guide/#extensions-test-templates" target="_blank" rel="noopener noreferrer">providers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Such methods are <em>inherited</em> unless they are <em>overridden</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@TestClassOrder</code></td> <td style="text-align:left;">Used to configure the <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-execution-order-classes" target="_blank" rel="noopener noreferrer">test class execution order<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for <code>@Nested</code> test classes in the annotated test class. Such annotations are <em>inherited</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@TestMethodOrder</code></td> <td style="text-align:left;">Used to configure the <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-execution-order-methods" target="_blank" rel="noopener noreferrer">test method execution order<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for the annotated test class; similar to JUnit 4’s <code>@FixMethodOrder</code>. Such annotations are <em>inherited</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@TestInstance</code></td> <td style="text-align:left;">Used to configure the <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle" target="_blank" rel="noopener noreferrer">test instance lifecycle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for the annotated test class. Such annotations are <em>inherited</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@DisplayName</code></td> <td style="text-align:left;">Declares a custom <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-display-names" target="_blank" rel="noopener noreferrer">display name<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for the test class or test method. Such annotations are not <em>inherited</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@DisplayNameGeneration</code></td> <td style="text-align:left;">Declares a custom <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-display-name-generator" target="_blank" rel="noopener noreferrer">display name generator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for the test class. Such annotations are <em>inherited</em>.</td></tr> <tr><td><code>@Before</code></td> <td style="text-align:left;"><code>@BeforeEach</code></td> <td style="text-align:left;">Denotes that the annotated method should be executed <em>before</em> <strong>each</strong> <code>@Test</code>, <code>@RepeatedTest</code>, <code>@ParameterizedTest</code>, or <code>@TestFactory</code> method in the current class; analogous to JUnit 4’s <code>@Before</code>. Such methods are <em>inherited</em> – unless they are <em>overridden</em> or <em>superseded</em> (i.e., replaced based on signature only, irrespective of Java’s visibility rules).</td></tr> <tr><td><code>@After</code></td> <td style="text-align:left;"><code>@AfterEach</code></td> <td style="text-align:left;">Denotes that the annotated method should be executed <em>after</em> <strong>each</strong> <code>@Test</code>, <code>@RepeatedTest</code>, <code>@ParameterizedTest</code>, or <code>@TestFactory</code> method in the current class; analogous to JUnit 4’s <code>@After</code>. Such methods are <em>inherited</em> – unless they are <em>overridden</em> or <em>superseded</em> (i.e., replaced based on signature only, irrespective of Java’s visibility rules).</td></tr> <tr><td><code>@BeforeClass</code></td> <td style="text-align:left;"><code>@BeforeAll</code></td> <td style="text-align:left;">Denotes that the annotated method should be executed <em>before</em> <strong>all</strong> <code>@Test</code>, <code>@RepeatedTest</code>, <code>@ParameterizedTest</code>, and <code>@TestFactory</code> methods in the current class; analogous to JUnit 4’s <code>@BeforeClass</code>. Such methods are <em>inherited</em> – unless they are <em>hidden</em>, <em>overridden</em>, or <em>superseded</em>, (i.e., replaced based on signature only, irrespective of Java’s visibility rules) – and must be <code>static</code> unless the &quot;per-class&quot; <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle" target="_blank" rel="noopener noreferrer">test instance lifecycle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is used.</td></tr> <tr><td><code>@AfterClass</code></td> <td style="text-align:left;"><code>@AfterAll</code></td> <td style="text-align:left;">Denotes that the annotated method should be executed <em>after</em> <strong>all</strong> <code>@Test</code>, <code>@RepeatedTest</code>, <code>@ParameterizedTest</code>, and <code>@TestFactory</code> methods in the current class; analogous to JUnit 4’s <code>@AfterClass</code>. Such methods are <em>inherited</em> – unless they are <em>hidden</em>, <em>overridden</em>, or <em>superseded</em>, (i.e., replaced based on signature only, irrespective of Java’s visibility rules) – and must be <code>static</code> unless the &quot;per-class&quot; <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle" target="_blank" rel="noopener noreferrer">test instance lifecycle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is used.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@Nested</code></td> <td style="text-align:left;">Denotes that the annotated class is a non-static <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-nested" target="_blank" rel="noopener noreferrer">nested test class<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. On Java 8 through Java 15, <code>@BeforeAll</code> and <code>@AfterAll</code> methods cannot be used directly in a <code>@Nested</code> test class unless the &quot;per-class&quot; <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle" target="_blank" rel="noopener noreferrer">test instance lifecycle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is used. Beginning with Java 16, <code>@BeforeAll</code> and <code>@AfterAll</code> methods can be declared as <code>static</code> in a <code>@Nested</code> test class with either test instance lifecycle mode. Such annotations are not <em>inherited</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@Tag</code></td> <td style="text-align:left;">Used to declare <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-tagging-and-filtering" target="_blank" rel="noopener noreferrer">tags for filtering tests<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, either at the class or method level; analogous to test groups in TestNG or Categories in JUnit 4. Such annotations are <em>inherited</em> at the class level but not at the method level.</td></tr> <tr><td><code>@Ignore</code></td> <td style="text-align:left;"><code>@Disabled</code></td> <td style="text-align:left;">Used to <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-disabling" target="_blank" rel="noopener noreferrer">disable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> a test class or test method; analogous to JUnit 4’s <code>@Ignore</code>. Such annotations are not <em>inherited</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@Timeout</code></td> <td style="text-align:left;">Used to fail a test, test factory, test template, or lifecycle method if its execution exceeds a given duration. Such annotations are <em>inherited</em>.</td></tr> <tr><td><code>@RunWith</code></td> <td style="text-align:left;"><code>@ExtendWith</code></td> <td style="text-align:left;">Used to <a href="https://junit.org/junit5/docs/current/user-guide/#extensions-registration-declarative" target="_blank" rel="noopener noreferrer">register extensions declaratively<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Such annotations are <em>inherited</em>.<br>指定测试用例运行环境</td></tr> <tr><td></td> <td style="text-align:left;"><code>@RegisterExtension</code></td> <td style="text-align:left;">Used to <a href="https://junit.org/junit5/docs/current/user-guide/#extensions-registration-programmatic" target="_blank" rel="noopener noreferrer">register extensions programmatically<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> via fields. Such fields are <em>inherited</em> unless they are <em>shadowed</em>.</td></tr> <tr><td></td> <td style="text-align:left;"><code>@TempDir</code></td> <td style="text-align:left;">Used to supply a <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-built-in-extensions-TempDirectory" target="_blank" rel="noopener noreferrer">temporary directory<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> via field injection or parameter injection in a lifecycle method or test method; located in the <code>org.junit.jupiter.api.io</code> package.</td></tr></tbody></table> <h4 id="junit-4"><a href="#junit-4" class="header-anchor">#</a> JUnit 4</h4> <p>https://junit.org/junit4/</p> <h4 id="junit-5"><a href="#junit-5" class="header-anchor">#</a> JUnit 5</h4> <p>Unlike previous versions of JUnit, JUnit 5 is composed of several different modules from three different sub-projects.</p> <p>JUnit 5 = JUnit Platform + JUnit Jupiter+ JUnit Vintage</p> <p>JUnit Platform：用于在 JVM 上运行测试的基础设施，无论是编程模型还是命令行工具。</p> <p>JUnit Jupiter：JUnit 5 的新模块，它提供了编写测试的新的程序化模型。</p> <p>JUnit Vintage：用于在 JUnit 平台上运行旧的 JUnit 3 和 JUnit 4 测试的引擎。</p> <p>JUnit Platform是JUnit5的核心组成部分，它定义了一个抽象的TestEngine API，用于在平台上运行测试框架。这意味着其他自动化测试引擎或开发人员自己定制的引擎都可以接入JUnit5实现对接和执行。JUnit Platform还支持通过命令行、Gradle和Maven来运行测试。</p> <p>JUnit Jupiter是JUnit5的扩展部分，它提供了新的编程模型和扩展模型，使编写测试用例更加方便。这个部分可以看作是承载JUnit4原有功能的演进，包含了JUnit5最新的编程模型和扩展机制。通过这些新特性，JUnit Jupiter使自动化测试更加方便、功能更加强大。</p> <p>JUnit Vintage提供了一个在平台上运行JUnit3和JUnit4的TestEngine。这意味着，如果你在使用JUnit3或JUnit4编写的旧测试用例，你可以将这些用例迁移到JUnit5上，并从中受益。</p> <p>IntelliJ IDEA supports running tests on the JUnit Platform since version 2016.2. For details please see the <a href="https://blog.jetbrains.com/idea/2016/08/using-junit-5-in-intellij-idea/" target="_blank" rel="noopener noreferrer">post on the IntelliJ IDEA blog<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Note, however, that it is recommended to use IDEA 2017.3 or newer since these newer versions of IDEA will download the following JARs automatically based on the API version used in the project: <code>junit-platform-launcher</code>, <code>junit-jupiter-engine</code>, and <code>junit-vintage-engine</code>.</p> <p>https://junit.org/junit5/</p> <p><a href="https://junit.org/junit5/docs/current/user-guide/" target="_blank" rel="noopener noreferrer">https://junit.org/junit5/docs/current/user-guide/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://github.com/junit-team/junit5-samples" target="_blank" rel="noopener noreferrer">https://github.com/junit-team/junit5-samples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h5 id="参数化测试-数据驱动测试"><a href="#参数化测试-数据驱动测试" class="header-anchor">#</a> 参数化测试/数据驱动测试</h5> <p>参数化测试必须将 @Test 注解替换为 @ParameterizedTest 注解。</p> <ul><li>@ValueSource 注解可提供单个数组作为测试数据。</li> <li>@NullSource 注解用于传递null值。</li> <li>@EmptySource 注解用于传递空值。</li> <li>@NullAndEmptySource 注解是 @NullSource 和 @EmptySource 的组合注解，可同时提供null值和空值。</li> <li>@EnumSource 注解可提供单个枚举作为测试数据。</li> <li>@MethodSource 注解读取指定方法的返回值作为参数化测试的入参（注意方法返回类型必须是一个流）。</li> <li>@CsvSource 注解可提供单组或多组参数。</li> <li>@CsvFileSource 注解通过读取CSV文件作为参数化测试的入参。</li> <li>实现 ArgumentsProvider 接口，并配合 @ArgumentsSource 注解来给测试方法提供测试数据。</li></ul> <h3 id="spring常用注解"><a href="#spring常用注解" class="header-anchor">#</a> Spring常用注解</h3> <table><thead><tr><th>注解</th> <th>作用</th></tr></thead> <tbody><tr><td>@WebMvcTest</td> <td>启动一个应用程序上下文，该上下文只包含测试 Web 控制器所需的 bean</td></tr> <tr><td>@AutoConfigureMockMvc</td> <td>可以应用于测试类以启用和配置MockMvc的自动配置的注释。</td></tr> <tr><td>@PropertySource</td> <td>加载配置文件</td></tr> <tr><td>@TestPropertySource</td> <td>加载配置文件。@TestPropertySource可以用来覆盖掉来自于系统环境变量，Java的系统属性，@PropertySource的属性。</td></tr> <tr><td>@ActiveProfiles</td> <td>激活指定环境<br>@ActiveProfiles(profiles = {&quot;default&quot;, &quot;local&quot;, &quot;test&quot;})<br>如果有相同配置，后面同名配置会覆盖前面的。</td></tr> <tr><td>@ContextConfiguration</td> <td>用来加载ApplicationContext</td></tr></tbody></table> <p>@WebMvcTest 示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebMvcTest</span><span class="token punctuation">(</span>controllers <span class="token operator">=</span> <span class="token class-name">UserController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ExtendWith</span><span class="token punctuation">(</span><span class="token class-name">SpringExtension</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>@AutoConfigureMockMvc 示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@AutoConfigureMockMvc</span>
<span class="token annotation punctuation">@SpringBootTest</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>@ContextConfiguration 示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ActiveProfiles</span><span class="token punctuation">(</span><span class="token string">&quot;local&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span><span class="token string">&quot;/application-local.yml&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>
    classes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">SftpOutboundFactoryTest<span class="token punctuation">.</span>ContextConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 用来加载配置类</span>
    initializers <span class="token operator">=</span> <span class="token class-name">ConfigDataApplicationContextInitializer</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token comment">// 用来加载配置文件</span>
<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ExtendWith</span><span class="token punctuation">(</span><span class="token class-name">SpringExtension</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="常见的mock框架"><a href="#常见的mock框架" class="header-anchor">#</a> 常见的Mock框架</h2> <p><img src="/assets/img/20240511132157.d5724636.png" alt=""></p> <h3 id="mockito"><a href="#mockito" class="header-anchor">#</a> Mockito</h3> <p><a href="https://site.mockito.org/" target="_blank" rel="noopener noreferrer">https://site.mockito.org/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>mockito-core</strong>：Mockito 核心依赖，提供了 Mockito 框架的核心功能和 API。</p> <p><strong>mockito-junit-jupiter</strong>：Mockito 与 JUnit Jupiter 的集成依赖，用于在 JUnit 5 环境下使用 Mockito 进行单元测试。</p> <p><strong>mockito-inline</strong>：Mockito 的内联依赖，用于支持内联（inline）Mocks 的创建和使用。</p> <p><strong>Note that you must use @RunWith(MockitoJUnitRunner.class) or MockitoAnnotations.initMocks(this) to initialize these mocks and inject them.</strong></p> <ul><li><a href="https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#mock-java.lang.Class-" target="_blank" rel="noopener noreferrer"><code>mock()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>/<a href="https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mock.html" target="_blank" rel="noopener noreferrer"><code>@Mock</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: create mock
<ul><li>optionally specify how it should behave via <a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/stubbing/Answer.html" target="_blank" rel="noopener noreferrer"><code>Answer</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>/<a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/MockSettings.html" target="_blank" rel="noopener noreferrer"><code>MockSettings</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#when-T-" target="_blank" rel="noopener noreferrer"><code>when()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>/<a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/BDDMockito.html#given-T-" target="_blank" rel="noopener noreferrer"><code>given()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to specify how a mock should behave</li> <li>If the provided answers don’t fit your needs, write one yourself extending the <a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/stubbing/Answer.html" target="_blank" rel="noopener noreferrer"><code>Answer</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> interface</li></ul></li> <li><a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#spy-T-" target="_blank" rel="noopener noreferrer"><code>spy()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>/<a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Spy.html" target="_blank" rel="noopener noreferrer"><code>@Spy</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: partial mocking, real methods are invoked but still can be verified and stubbed</li> <li><a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/InjectMocks.html" target="_blank" rel="noopener noreferrer"><code>@InjectMocks</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: automatically inject mocks/spies fields annotated with <code>@Spy</code> or <code>@Mock</code></li> <li><a href="https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#verify-T-" target="_blank" rel="noopener noreferrer"><code>verify()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: to check methods were called with given arguments
<ul><li>can use flexible argument matching, for example any expression via the <a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/ArgumentMatchers.html#any--" target="_blank" rel="noopener noreferrer"><code>any()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>or capture what arguments were called using <a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Captor.html" target="_blank" rel="noopener noreferrer"><code>@Captor</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> instead</li></ul></li></ul> <p>What are the limitations of Mockito: <a href="https://github.com/mockito/mockito/wiki/FAQ" target="_blank" rel="noopener noreferrer">https://github.com/mockito/mockito/wiki/FAQ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>常见注解使用：</p> <table><thead><tr><th>Non-Spring Env</th> <th>Spring Env</th> <th>Description</th></tr></thead> <tbody><tr><td>@InjectMocks</td> <td>@Autowired</td> <td>创建类实例并注入依赖的模拟，以便在单元测试中更好地控制测试环境，提高测试的准确性。<br>@InjectMocks creates an instance of the class and injects the mocks that are created with the @Mock (or @Spy ) annotations into this instance.<br>@InjectMocks will only inject mocks/spies created using the @Spy or @Mock annotation.<br>@Autowired will only inject mocks/spies created using the @SpyBean or @MockBean annotation.</td></tr> <tr><td>@Mock</td> <td>@MockBean</td> <td>创建模拟<br>@Mock 相当于 Mockito.mock(Class<T> classToMock)<br>打桩的方法均使用模拟，不会真实调用</T></td></tr> <tr><td>@Spy</td> <td>@SpyBean</td> <td>创建模拟<br>@Spy 相当于 Mockito.spy(Class<T> classToSpy)<br>如果某方法没有打桩，则真实调用，否则使用模拟。</T></td></tr></tbody></table> <h4 id="打桩-stubbing"><a href="#打桩-stubbing" class="header-anchor">#</a> 打桩（stubbing）</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 有返回值</span>
<span class="token function">when</span><span class="token punctuation">(</span>mockObject<span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span>someReturnValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">doReturn</span><span class="token punctuation">(</span>someReturnValue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>mockObject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 无返回值</span>
<span class="token function">doNothing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>mockObject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 抛出异常</span>
<span class="token function">when</span><span class="token punctuation">(</span>mockObject<span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenThrow</span><span class="token punctuation">(</span>someException<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">doThrow</span><span class="token punctuation">(</span>someException<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>mockObject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="断言-assertion"><a href="#断言-assertion" class="header-anchor">#</a> 断言（assertion）</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// org.junit.jupiter.api.Assertions</span>
<span class="token comment">// 方法是否被调用</span>
<span class="token function">verify</span><span class="token punctuation">(</span>mockObject<span class="token punctuation">,</span> <span class="token function">never</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token string">&quot;never called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">verify</span><span class="token punctuation">(</span>mockObject<span class="token punctuation">,</span> <span class="token function">atLeastOnce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token string">&quot;called at least once&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">verify</span><span class="token punctuation">(</span>mockObject<span class="token punctuation">,</span> <span class="token function">atLeast</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token string">&quot;called at least twice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">verify</span><span class="token punctuation">(</span>mockObject<span class="token punctuation">,</span> <span class="token function">atMost</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token string">&quot;called at most three times&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">verify</span><span class="token punctuation">(</span>mockObject<span class="token punctuation">,</span> <span class="token function">times</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token string">&quot;called four times&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="powermock"><a href="#powermock" class="header-anchor">#</a> PowerMock</h3> <p>当所测逻辑里有静态工具类方法或私有方法时，我们希望它返回特定值时（极值边界、异常测试场景），我们可以用PowerMock弥补Mockito的不足。</p> <p><a href="http://powermock.github.io/" target="_blank" rel="noopener noreferrer">http://powermock.github.io/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://github.com/powermock/powermock/wiki/Mockito-Maven" target="_blank" rel="noopener noreferrer">https://github.com/powermock/powermock/wiki/Mockito-Maven<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="常用插件"><a href="#常用插件" class="header-anchor">#</a> 常用插件</h2> <h3 id="maven-surefire-plugin"><a href="#maven-surefire-plugin" class="header-anchor">#</a> Maven Surefire Plugin</h3> <p>Maven Surefire Plugin的作用是用于执行单元测试。</p> <p>这个插件可以自动识别和运行src/test目录下利用特定测试框架（如JUnit、TestNG等）编写的测试用例。Surefire Plugin也能识别和执行符合一定命名约定的普通类中的测试方法，例如，以Test结尾的测试类（如helloTest.java）。在Maven的生命周期中，test阶段默认绑定了Surefire Plugin的test目标，无需额外配置，直接运行run test即可。此外，Surefire Plugin还具有高度的可配置性和灵活性，支持多种单元测试框架，并且可以自定义测试用例的命名模式，通过合理配置和使用该插件，可以帮助开发者提高代码质量和项目稳定性。</p> <h3 id="jacoco-java-code-coverage"><a href="#jacoco-java-code-coverage" class="header-anchor">#</a> JaCoCo（Java Code Coverage）</h3> <p>JaCoCo（Java Code Coverage）是一种分析单元测试覆盖率的工具。</p> <p>The JaCoCo Maven Plugin provides the JaCoCo runtime agent to your tests and allows basic report creation.</p> <p>IDEA配置JaCoCo</p> <p><img src="/assets/img/20240511104742.b81c0e3b.jpg" alt=""></p> <p>正常情况下，测试类所在包结构与被测试的类所在包结构相同，直接点击run tests with coverage就可以运行测试查看覆盖率。若包结构不同，但是你又没有权限修改该项目的包结构，那么可以通过配置来查看单测覆盖率。</p> <p><img src="/assets/img/20240511105351.5f6f0ebc.jpg" alt=""></p> <h2 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h2> <h3 id="springextension-mockitoextension"><a href="#springextension-mockitoextension" class="header-anchor">#</a> SpringExtension &amp; MockitoExtension</h3> <p><code>SpringExtension</code> integrates the Spring TestContext Framework into JUnit 5's Jupiter.</p> <p><code>MockitoExtension</code> is the JUnit Jupiter equivalent of our JUnit4 <code>MockitoJUnitRunner</code>.</p> <p><strong>When to use @Extendwith(SpringExtension.class) or @Extendwith(MockitoExtension.class) in JUnit 5?</strong></p> <p><strong>When involving Spring</strong>:</p> <p>If you want to use Spring test framework features in your tests like for example <code>@MockBean</code> , then you have to use <code>@Extendwith(SpringExtension.class)</code>. It replaces the deprecated JUnit 4 <code>@Runwith(SpringJUnit4classRunner.class)</code></p> <p><strong>When NOT involving Spring</strong>:</p> <p>If you just want to involve Mockito and don't have to involve Spring, for example,when you just want to use the <code>@Mock</code> / <code>@InjectMocks</code> annotations, then you want to use <code>@Extendwith(MockitoExtension.class)</code> as it doesn't load in a bunch of unneeded Spring stuff. It replaces the deprecated JUnit 4 <code>@Runwith(MockitooUnitRunner.class)</code>.</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/category/testing-frameworks/cucumber.html" class="prev">
            Cucumber学习笔记
          </a></span> <span class="next"><a href="/category/testing-frameworks/swagger.html">
            Swagger学习笔记
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/category/testing-frameworks/junit.html#基本概念" class="sidebar-link reco-side-基本概念" data-v-70334359>基本概念</a></li><li class="level-3" data-v-70334359><a href="/category/testing-frameworks/junit.html#junit" class="sidebar-link reco-side-junit" data-v-70334359>JUnit</a></li><li class="level-3" data-v-70334359><a href="/category/testing-frameworks/junit.html#spring常用注解" class="sidebar-link reco-side-spring常用注解" data-v-70334359>Spring常用注解</a></li><li class="level-2" data-v-70334359><a href="/category/testing-frameworks/junit.html#常见的mock框架" class="sidebar-link reco-side-常见的mock框架" data-v-70334359>常见的Mock框架</a></li><li class="level-3" data-v-70334359><a href="/category/testing-frameworks/junit.html#mockito" class="sidebar-link reco-side-mockito" data-v-70334359>Mockito</a></li><li class="level-3" data-v-70334359><a href="/category/testing-frameworks/junit.html#powermock" class="sidebar-link reco-side-powermock" data-v-70334359>PowerMock</a></li><li class="level-2" data-v-70334359><a href="/category/testing-frameworks/junit.html#常用插件" class="sidebar-link reco-side-常用插件" data-v-70334359>常用插件</a></li><li class="level-3" data-v-70334359><a href="/category/testing-frameworks/junit.html#maven-surefire-plugin" class="sidebar-link reco-side-maven-surefire-plugin" data-v-70334359>Maven Surefire Plugin</a></li><li class="level-3" data-v-70334359><a href="/category/testing-frameworks/junit.html#jacoco-java-code-coverage" class="sidebar-link reco-side-jacoco-java-code-coverage" data-v-70334359>JaCoCo（Java Code Coverage）</a></li><li class="level-2" data-v-70334359><a href="/category/testing-frameworks/junit.html#常见问题" class="sidebar-link reco-side-常见问题" data-v-70334359>常见问题</a></li><li class="level-3" data-v-70334359><a href="/category/testing-frameworks/junit.html#springextension-mockitoextension" class="sidebar-link reco-side-springextension-mockitoextension" data-v-70334359>SpringExtension &amp; MockitoExtension</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.34976f8f.js" defer></script><script src="/assets/js/4.d7bde999.js" defer></script><script src="/assets/js/1.f767751f.js" defer></script><script src="/assets/js/22.433dec0e.js" defer></script>
  </body>
</html>
